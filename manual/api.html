<!DOCTYPE html> <html> <head> <meta charset=utf-8> <meta http-equiv=Content-Type content="text/html; charset=UTF-8"> <meta name=viewport content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"> <meta name=format-detection content="telephone=no"> <meta name=apple-mobile-web-app-capable content="yes"> <meta name=apple-mobile-web-app-status-bar-style content="black"> <title>API</title> <script>(function(){"use strict";var e,t,n,r,i,a,o,s,u,c,l,f,g,p,d,h,m,y,v,w,b,S,k,x,A,j,E,M,O,C,T,N=[].slice,I={}.hasOwnProperty,J=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};for(A=this,e=function(t){return t instanceof e?t:this instanceof e?void(this._wrapped=t):new e(t)},e.now=function(){return(Date.now||function(){return(new Date).getTime()})()},e.script_time=e.now(),O=0,e.CRLF="\r\n",M=e,y={log:1,info:2,warn:3,error:4,none:5},a={c:!1},w={ctxPath:"",basePath:"",logger:y.log,toStringEvent:!1,toStringShowType:!0,logPrefix:function(t){return">> "+t+" ["+e.when.log()+"]"},dateMask:{"default":"yyyy-mm-dd HH:MM:ss",log:"yyyy-mm-dd HH:MM:ss l",day:"yyyy-mm-dd",time:"HH:MM:ss",week:"dddd"},dateI18n:{day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]}},n=Array.prototype.forEach,t=Array.prototype.filter,i=!1,g=encodeURIComponent,e.each=function(t,r,a){var o,s,u,c,l,f;if(null===t)return t;if(n&&t.forEach===n)t.forEach(r,a);else if(t.length===+t.length)for(o=0,l=t.length;!(l>o||r.call(a,t[o],o,t)===i);)o++;else for(c=e.keys(t),s=0,f=c.length;f>s;s++)if(u=c[s],r.call(a,t[u],u,t)===i)return;return t},e.filter=function(n,r,i){var a;return a=[],null===n?a:t&&n.filter===t?n.filter(r,i):(e.each(n,function(e,t,n){r.call(i,e,t,n)&&a.push({index:e})}),a)},e.extend=function(t){return e.each(e.slice(arguments,1),function(e){var n;if(e)for(n in e)t[n]=e[n]}),t},e.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},f=function(t,n,r,i){return function(n){return t[i?i+e.capitalize(n):n]=r}(n)},e.type=function(e,t){var n;return null==t&&(t=!1),n=Object.prototype.toString.call(e),t?n:n.slice(8,-1)},u=["Arguments","Array","Boolean","Date","Error","Function","Null","Number","Object","RegExp","String","Undefined","global"],r=function(t){return f(M,t,function(n){return t===e.type(n)},"is")},d=0,m=u.length;m>d;d++)C=u[d],r(C);e.isFunc=e.isFunction,e.isWin=e.isGlobal,e.isJson=function(t){return"object"==typeof t&&e.isObject(t)&&!t.length},e.isEvent=function(t){return!(e.isNull(t)||e.isUndefined(t)||e.isUndefined(t.altKey)&&e.isUndefined(t.preventDefault))},e.isBlank=function(){var t,n,r,i,a;if(n=arguments[0],a=2<=arguments.length?N.call(arguments,1):[],n=e.isString(n)?e.trim(n):n,null!=a)for(r=0,t=a.length;t>r;r++)if(i=a[r],i===n)return!0;return e.isNull(n)||e.isUndefined(n)||e.isString(n)&&n.length<1||e.isJson(n)&&e.keys(n).length<1?!0:!1},e.isPlainObject=function(t){return e.isObject(t)&&!e.isWin(t)&&Object.getPrototypeOf(t)===Object.prototype},p=function(t,n,r){var i;i=r||M,f(i,t,function(){return e.isFunc(w[t])?w[t].apply(this,arguments):w[t]},"get"),f(i,t,function(e){return w[t]=e},"set"),w[t]=n},e.getset=function(t,n){var r,i,a,o,s,u;if(o={},e.isString(t))o[t]=null;else if(e.isArray(t))for(r=s=0,a=t.length;a>s;r=++s)u=t[r],o[u]=null;else{if(!e.isJson(t))throw new Error(e.type(arguments)+" is unsupported, must string|string array|JSON");o=t}for(i in o)u=o[i],p(i,u,n)},e.getset(w),e.getset(a,a),e.settings=function(){return w},e.clone=function(t){return e.isObject(t)?e.isArray(t)?t.slice():e.extend({},t):t},j=function(t,n,r,i){var a,o;a=e.isArray(n),o=e.isPlainObject(n),e.each(n,function(n,s){var c;c=e.type(n),i&&(s=r?i:i+"["+(o||c===u[8]||c===u[1]?s:"")+"]"),!i&&a?t.add(n.name,n.value):c===u[1]||!r&&c===u[8]?j(t,n,r,s):t.add(s,n)})},e.param=function(e,t){var n;return n=[],n.add=function(e,t){return this.push(g(e)+"="+g(t))},j(n,e,t),n.join("&").replace(/%20/g,"+")},e.getUrl=function(t,n){var r;return r=e.isBlank(n)?"":"?"+(e.isJson(n)?e.param(n):String(n)),/^http/.test(t)?t+r:e.getBasePath()+e.aroundIf(e.getCtxPath(),"/")+t+r},e.getUrlVars=function(){var e,t,n,r,i,a,o,s;if(s={},t=A.location.href,n=t.indexOf("?"),-1===n)return s;for(a=t.slice(n+1).split("&"),i=0,r=a.length;r>i;i++)o=a[i],e=o.split("="),s[e[0]]=e[1];return s},e.href=function(t,n){A.location.href=e.getUrl(t,n)},e.slice=function(t,n){return e.isArguments(t)?Array.prototype.slice.call(t,n):(t||[]).slice(n||0)},e.startWith=function(t,n){return new RegExp("^"+(e.isArray(n)?"["+n.join("|")+"]":n)).test(t)},e.endWith=function(t,n){return new RegExp((e.isArray(n)?"["+n.join("|")+"]":n)+"$").test(t)},e.startIf=function(t,n){return e.startWith(t,n)?t:n+t},e.endIf=function(t,n){return e.endWith(t,n)?t:t+n},e.aroundWith=function(t,n){return e.startWith(t,n)&&e.endWith(t,n)},e.aroundIf=function(t,n){return e.endIf(e.startIf(t,n),n)},e.prefix=function(e,t,n){return(Array(t).join(n||"0")+e).slice(-t)},e.suffix=function(e,t,n){return e+Array(t+1).join(n||"0").slice(e.length)},e.trim=function(t,n){return e.isString(t)?e.isUndefined(n)?t.replace(/(^\s*)|(\s*$)/g,""):t.replace(new RegExp("(^("+n+")*)|(("+n+")*$)","gi"),""):t},e.repeat=function(e,t){return new Array(1+t).join(e)},e.ltrim=function(t,n){return e.isString(t)?t.replace(new RegExp("(^"+(e.isBlank(n)?"\\s":n)+"*)"),""):t},e.rtrim=function(t,n){return e.isString(t)?t.replace(new RegExp("("+(e.isBlank(n)?"\\s":n)+"*$)"),""):t},e.randomStr=function(e){var t;for(t="";t+=Math.random().toString(36).substr(2),!(t.length>=e););return t.substr(0,e)},e.uniqueId=function(e){var t;return t=++O+"",e?e+t:t},e.times=function(e,t,n){var r,i;for(r=Array(Math.max(0,e)),i=0;r[i]=t.call(n,i),++i,!(i>=e););return r},e.delay=function(t,n){var r;return r=e.slice(arguments,2),setTimeout(function(){return t.apply(null,r)},n)},e.once=function(e){var t,n;return n=!1,t=null,function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},e.wrap=function(e,t){return function(){var n;return n=[e],Array.prototype.push.apply(n,arguments),t.apply(this,n)}},e.prop=function(e){return function(t){return t[e]}},e.format=function(t,n){return e.isArray(n)||(n=e.slice(arguments,1)),t.replace(/\{(\d+)\}/gm,function(t,r){var i;return i=e.isUndefined(n[r])?t:n[r],e.isObject(i)?o(i):i})},S=function(t,n){var r,i,a;if(e.isArray(t))r=t.indexOf(n),r>-1&&t.splice(r,1);else if(e.isJson(t))for(i in t)a=t[i],a===n&&delete t[i]},e.rmByVal=function(){var e,t,n,r,i;for(r=arguments[0],e=2<=arguments.length?N.call(arguments,1):[],n=0,t=e.length;t>n;n++)i=e[n],S(r,i);return r},e.getKey=function(e,t){var n,r;for(n in e)if(I.call(e,n)&&(r=e[n],r===t))return n;return null},e.has=function(t,n){return e.isBlank(t)?!1:e.isArray(t)?J.call(t,n)>=0:e.isObject(t)?n in t:Object.prototype.hasOwnProperty.call(t,n)},e.sleep=function(t){var n,r;for(r=e.now(),n=-1;n++,!(e.now()-r>=t););},e.betn=function(t,n,r,i){var a,o,s,u,c,l,f,g,p,d;if(e.isBlank(n)||e.isBlank(r))return t;if(g=new Array,c=new RegExp("(?:\\"+n+")([\\s\\S]*?)(?:"+r+")","gim"),o=t.match(c),i){for(d=s=0,l=o.length-1;l>=0?l>=s:s>=l;d=l>=0?++s:--s)g.push(o[d]);return g}if(p=null,e.isNull(o))return g;for(a=u=0,f=o.length-1;f>=0?f>=u:u>=f;a=f>=0?++u:--u)p=c.exec(t),e.isNull(p)||g.push(p[1]);return g},e.betns=function(t,n,r,i){return e.isBlank(n)||e.isBlank(r)||!e.isFunc(i)?t:t.replace(new RegExp("(?:\\"+n+")([\\s\\S]*?)(?:"+r+")","gim"),i)},e.querySelector=function(e,t,n){return null==t&&(t=!1),null==n&&(n=document),t?n.querySelectorAll(e):n.querySelector(e)},e.query=function(){var t,n,r,i,a,o;switch(i=1<=arguments.length?N.call(arguments,0):[],r=i.length,o="",n=!1,r){case 1:case 2:case 3:o=i[0],2===r&&(e.isBoolean(i[1])?n=i[1]:t=i[1]),3===r&&(t=i[1],n=i[2])}if(t=t||document,/^[A-Za-z0-9]+$/.test(o)){if(a=e.querySelector(o,n,t),null!==a)return a;o="[name="+o+"]"}return e.querySelector(o,n,t)},e.removeEl=function(){var t,n;n=1<=arguments.length?N.call(arguments,0):[],t=e.query(n),t&&t.parentNode.removeChild(t)},e.chkParam=function(){var t,n,r,i;if(i=1<=arguments.length?N.call(arguments,0):[],r=i[0],n=i[1]||"",t=e.slice(i,2),!r)throw new Error(e.format(n,t));return!0},e.fillParam=function(){var t,n,r,i,a,o,s,u,c,l;switch(o=1<=arguments.length?N.call(arguments,0):[],n="",t=null,c=["div","span"],a=o.length){case 1:t=o[0];break;case 3:case 2:3===a&&(c=c.concat(e.isArray(o[2])?o[2]:[o[2]])),n=o[0],t=o[1]}n=e.startIf(n,"#");for(i in t)l=t[i],u=null,u=e.startWith(i,["#","\\."])?n+" "+i:n+" [name="+i+"]",r=e.query(u),e.isBlank(r)||(s=(r.tagName||"").toLowerCase(),J.call(c,s)>=0?r.innerHTML=l:r.value=l)},e.getParam=function(){var t,n,r,i,a,o,s,u,c,l,f,g,p,d,h,m;for(s=arguments[0],u=2<=arguments.length?N.call(arguments,1):[],s=e.startIf(s,"#"),i=["hidden","text","checkbox","password","tel","email","url","number","date","time","datetime","month"],c=["li"],r=["select"].concat(u),g=0,l=i.length;l>g;g++)m=i[g],r.push("input[type="+m+"]");if(n={},t=e.query(s),e.isBlank(t))return n;for(d=e.query(r.join(","),t,!0),p=0,f=d.length;f>p;p++)a=d[p],o=a.getAttribute("name"),(o||"").length>0&&(n[o]=e.has(a,"value")?(h=(a.tagName||"").toLowerCase(),J.call(c,h)>=0?a.innerText:e.trim(a.value)):a.innerHTML);return n},k=function(e){var t,n,r,i;n=[];for(t in e)i=e[t],n.push(t);return r=new RegExp(n.join("|"),"ig"),function(t){return t.replace(r,function(t,n,r,i,a){var o;return o=e[t]||o})}},e.replacer=function(e){return new k(e)},b=function(t,n,r,i){var a,o;if(a=r||M,e.has(a,t)&&!i)throw new Error("module exists: "+t);a[t]=n,e.isFunc(n)&&a.mixin&&(o={},o[t]=n,a.mixin(o))},e.register=function(){var t,n,r,i;if(n=1<=arguments.length?N.call(arguments,0):[],e.isJson(n[0])){r=n[0];for(t in r)i=r[t],b(t,i,n[1],n[2])}else b.apply(this,arguments)},e.unregister=function(e,t){delete(t||M)[e]},e.methodRegister=function(e,t,n,r){f(e,t,n,r)},E=function(t,n){return(e.isUndefined(n)?e.getToStringShowType():n)?t:""},e.asStr=function(e,t,n){return o(e,t||"",n||!1)},e.rmEvtProp=function(t,n){var r,i,o,s;if(o={},e.isObject(t)&&e.isJson(t))for(i in t)s=t[i],e.isEvent(s)?(r=E("[object event]: ")+s.type,n&&(o[i]=r),e.isInfoEnabled()&&(a.getC().info("The "+r+" from '"+i+"' below is event detail:"),a.getC().info(s))):o[i]=s;return o},o=function(t,n,r){var i,a,s,c,l,f,g,p,d,h,m,y,v,w,b;switch(c=[],y=n||e.CRLF,m=e.type(t),g=e.type(t,!0)+": ",w=o,m){case u[11]:case u[7]:case u[10]:case u[2]:case u[5]:case u[6]:c.push(E(g,r)+t);break;case u[3]:case u[9]:c.push(E(g,r)+String(t));break;case u[4]:c.push(E(g,r)+(t.stack||t));break;case u[0]:case u[1]:for(m===u[0]&&(t=e.slice(t)),a=[],v=0,h=t.length;h>v;v++)b=t[v],a.push("object"==typeof b?w(b,y,!1):b);c.push(E(g,r)+"["+y+a.join(","+y)+y+"]");break;case u[8]:if(e.getToStringEvent()||(t=e.rmEvtProp(t,!0)),A.JSON&&e.isJson(t))try{i=[],c.push(JSON.stringify(t,function(e,t){if("object"==typeof t&&null!==t){if(-1!==i.indexOf(t))return;i.push(t)}return t}))}catch(S){f=S,e.warn(f.message,"JSON.stringify error (ignorable)")}break;default:s=[];for(d in t)I.call(t,d)&&(b=t[d],/^HTML/.test(m)?(p="innerHTML",l="documentElement",e.has(b,p)?b=b+" "+b[p]:e.has(b,l)&&(b=b+" "+b[l])):b=e.isJson(b)?w(b):b,s.push(d+": "+b));c.push(E(g,r)+"{"+y+s.join(","+y)+y+"}")}return c.join(y)},v=function(t,n){return f(M,t,function(e,r,i,a){return l({name:t,level:n},e,r,i,a)}),f(M,t+"Enabled",function(){return a.getC()&&parseInt(n)>=parseInt(e.getLogger())},"is"),f(M,t+"Enabled",function(){return e.setLogger(y[t])},"set")};for(h in y)T=y[h],T!==y.none&&v(h,T);l=function(t,n,r,i,s){var u,c;u=a.getC(),u&&parseInt(t.level)>=parseInt(e.getLogger())&&u[t.name]&&(c=e.getLogPrefix(t.name)+(r?r+e.CRLF:"")+o(n,i,s),u[t.name].call(u,c))},e.console=function(t,n){return e.isNull(t)?(a.setC(!1),t):((!a.getC()||n)&&(e.isFunc(t)?a.setC({log:t,info:t,warn:t,error:t}):e.isObject(t)?a.setC(t):e.isUndefined(A.console)||a.setC(A.console)),a.getC())},e.getLoggerName=function(t){return t=t||e.getLogger(),e.getKey(y,parseInt(t)>y.none?y.none:t)},s=function(){var t,n,r,i;return i=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,n=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,t=function(t,n){return e.prefix(t,n||2)},function(a,o,s){var u,c,l,f,g,p,d,h,m,y,v,w,b;if(e.isUndefined(o)&&e.isString(a)&&!/\d/.test(a)&&(o=a,a=void 0),m=e.getDateI18n(),d=e.getDateMask(),a=e.isBlank(a)?new Date:new Date(a),isNaN(a))throw SyntaxError("invalid date: "+a);return o=String(d[o]||o||d["default"]),"UTC:"===o.slice(0,4)&&(o=o.slice(4),s=!0),g=e.isBlank(s)?"get":"getUTC",p=a[g+"Date"](),u=a[g+"Day"](),y=a[g+"Month"](),b=a[g+"FullYear"](),c=a[g+"Hours"](),f=a[g+"Minutes"](),w=a[g+"Seconds"](),l=a[g+"Milliseconds"](),v=e.isBlank(s)?a.getTimezoneOffset():0,h={d:p,dd:t(p),ddd:m.day[u],dddd:m.day[u+7],m:y+1,mm:t(y+1),mmm:m.month[y],mmmm:m.month[y+12],yy:String(b).slice(2),yyyy:b,h:c%12||12,hh:t(c%12||12),H:c,HH:t(c),M:f,MM:t(f),s:w,ss:t(w),l:t(l,3),L:t(l>99?Math.round(l/10):l),t:12>c?"a":"p",tt:12>c?"am":"pm",T:12>c?"A":"P",TT:12>c?"AM":"PM",Z:s?"UTC":(String(a).match(n)||[""]).pop().replace(r,""),o:(v>0?"-":"+")+t(100*Math.floor(Math.abs(v)/60)+Math.abs(v)%60,4),S:["th","st","nd","rd"][p%10>3?0:(p%100-p%10!==10)*p%10]},o.replace(i,function(e){return e in h?h[e]:e.slice(1,e.length-1)})}},s=s(),e.addDateMask=function(t,n){e.extend(w.dateMask,t=t||{}),e.each(t,function(t,r){e.methodRegister(n||e.when,r,function(n,r){return e.dateFmt(n,t,r)})})},e.dateFmt=function(e,t,n){return s(e,t,n)},e.keys=function(t,n){var r;if(null==n&&(n=function(){return!0}),e.isObject(t)&&Object.keys)return Object.keys(t);r=[];for(h in t)I.call(t,h)&&(T=t[h],n(T,h)&&r.push(h));return r},e.vals=function(t){var n,r,i,a,o,s;for(n=e.keys(t),r=n.length,s=new Array(r),o=[],a=0,i=n.length;i>a;a++)h=n[a],o.push(t[h]);return o},e.funcs=function(t){return e.keys(t,function(t){return e.isFunc(t)})},c=function(t,n){return e.prototype[t]=function(){var t;return t=[this._wrapped],Array.prototype.push.apply(t,arguments),x.call(this,n.apply(e,t))}},e.mixin=function(t){var n,r,i,a,o;for(o=e.funcs(t),a=0,r=o.length;r>a;a++)i=o[a],n=e[i]=t[i],c(i,n)},x=function(t){return this._chain?e(t).chain():t},e.mixin(e),e.chain=function(t){return e(t).chain()},e.prototype.chain=function(){return this._chain=!0,this},e.prototype.value=function(){return this._wrapped},function(e,t){var n;n=function(t,n,r){return e.dateFmt(n,t,r)},e.addDateMask(e.getDateMask(),n),n.idesc={year:" years ago",month:" months ago",week:" weeks ago",day:" days ago",hour:" hours ago",minute:" minutes ago",just:"just now"},n.time=function(t){var n;return t=t||new Date,e.isDate(t)||(n=new Date(t),t=isNaN(n)?new Date(t.replace(/-/g,"/")):n),t.getTime()},n.interval=function(e){var t,r,i,a,o;return o=1e3,t=86400,r=3600,a=60,e=n.time(e),i=(n.time()-e)/o,i>=0?i/15768e4>1?n["default"](e):i/31536e3>1?parseInt(i/31536e3)+n.idesc.year:i/2592e3>1?parseInt(i/2592e3)+n.idesc.month:i/604800>=1?7+n.idesc.day:1>i/604800&&i/t>=1?parseInt(i/t)+n.idesc.day:1>i/t&&i/r>=1?parseInt(i/r)+n.idesc.hour:r>i&&i>=a?parseInt(i/a)+n.idesc.minute:n.idesc.just:n["default"](e)},e.register(t,n)}(M,"when"),function(e,t){var n,r;r=function(e,t){return i(e,t)},n={};var i=function a(e,t){var r=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):n[e]=n[e]||a(document.getElementById(e).innerHTML);return t?r(t):r};e.register(t,r)}(M,"tmpl"),function(e,t){"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=e:(A.kiwi=A[t]=e,"function"==typeof define&&define.amd&&define(t,[],function(){return e}),"function"==typeof define&&define.cmd&&define(function(n,r,i){r[t]=e}))}(M,"lemon")}).call(this),!function(e,t){var n,r,i,a,o,s,u;a=function(e){return r(e)},a.reverse=function(e){return u(e)},a.highlight=function(e){return c(e)},a.get=function(e,t){return value(e,t)},i=function(e,t){return p[t-1]},o=function(e){return new Array(e+1).join("	")},value=function(t,n){n=n||"";var r=n.indexOf(".")>0?n.split("."):[n],i=t;return e.each(r,function(t,n){var r=t;if(t.indexOf("[")>0&&t.indexOf("]")>0){var a=e.betn(t,"[","]",!0);t=t.replace(a.join(""),"")}if(i=i&&i[t],e.isArray(i)){var o=e.betn(r,"[","]");if(o.length>0){var s=i;e.each(o,function(e,t){s=s&&s[parseInt(e)]}),i=s}}}),i},s=function(t,n,r){var i,a,o,s;return o="",i=e.trim(t),a=i.split(n),a.length>0?(s=[],e.each(a,function(t,n){s.push(e.trim(t))}),o=s.join(r?"":n)):o=i,o},n=function(t){if(e.isBlank(t))return"{}";if(e.isString(t))return t;if(JSON&&e.isJson(t))return JSON.stringify(t);throw new Error("This browser JSON.stringify is unsupported.")},u=function(e){var t;return t=s(n(e),"\n"),t=s(t,"["),t=s(t,"]"),t=s(t,"{"),t=s(t,"}"),t=s(t,","),t=s(t,":")},a.style={".string":{color:"green"},".number":{color:"blue"},".boolean":{color:"darkorange"},".null":{color:"magenta"},".key":{color:"gray"}},a.toCSS=function(e){var t="";for(var n in e){t+=n+" {\n";for(var r in e[n])if("CSS-INHERIT-SELECTOR"==r)for(var i in e[e[n][r]])t+="	"+i+":"+e[e[n][r]][i]+";\n";else t+="	"+r+":"+e[n][r]+";\n";t+="}\n"}return t},a.addStyle=function(t,n){var r;n=n||"json_syntax",e.removeEl("#"+n),r=document,t=r.createElement("style"),t.type="text/css",t.id=n,t.innerHTML=e.isString(t)?t:a.toCSS(a.style),e.query("head").appendChild(t)};var c=function(e){return a.addStyle(),e=r(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'+t+'">'+e+"</span>"})};r=function(e){var t,r,a,s,c,l;if(JSON)return JSON.stringify(JSON.parse(n(e)),void 0,4);for(s="",a=0,e=u(n(e)),r=c=0,l=e.length;l>=0?l>c:c>l;r=l>=0?++c:--c)switch(t=e.charAt(r)){case"{":case"[":s+=t+"\n"+o(++a);break;case"}":case"]":s+="\n"+o(--a)+t;break;case",":s+=",\n"+o(a);break;case":":s+=": ";break;default:s+=t}return s=s.replace(/\[[\d,\s]+?\]/g,function(e){return e.replace(/\s/g,"")}).replace(/\\(\d+)\\/g,i).replace(/\\(\d+)\\/g,i)},e.register(t,a)}(this.kiwi,"json"),!function(e,t,n){function r(e){return function(){var t=_a.slice.call(arguments,0);t.unshift(o),l.appendChild(o),o.addBehavior("#default#userData"),o.load(u);var n=e.apply(store,t);return l.removeChild(o),n}}function i(e){return e.replace(/^d/,"___$&").replace(p,"___")}var a={};a=function(e,n,r){if(t.isUndefined(n))return a.get(e);if(t.isNull(n)){var i=a.get(e);return a.remove(e),i}return a.set(e,n),n};var o,s=e.document,u="localStorage",c="script";if(a.isSupport=function(){try{return u in e&&e[u]}catch(t){return!1}},a.serialize=function(n){return e.JSON&&t.isJson(n)?JSON.stringify(n):n},a.deserialize=function(e){if("string"!=typeof e)return e||void 0;try{return JSON.parse(e)}catch(t){return e||void 0}},a.transact=function(e,t,n){var r=a.get(e);null==n&&(n=t,t=null),typeof r==_undef&&(r=t||{}),n(r),a.set(e,r)},a.exists=function(e){return null!=a.get(e)},a.keys=function(){var e=[];return $.each(a.getAll(),function(t,n){e.push(t)}),e},a.size=function(e,t){return a.keys().length},a.isSupport())o=e[u],a.set=function(e,t){return void 0===t?a.remove(e):(o.setItem(e,a.serialize(t)),t)},a.get=function(e){return a.deserialize(o.getItem(e))},a.remove=function(e){o.removeItem(e)},a.clear=function(){o.clear()},a.getAll=function(){var e={};return a.forEach(function(t,n){e[t]=n}),e},a.forEach=function(e){for(var t=0;t<o.length;t++){var n=o.key(t);e(n,a.get(n))}};else if(s.documentElement.addBehavior){var l,f;try{f=new ActiveXObject("htmlfile"),f.open(),f.write("<"+c+">document.w=window</"+c+'><iframe src="/favicon.ico"></iframe>'),f.close(),l=f.w.frames[0].document,o=l.createElement("div")}catch(g){o=s.createElement("div"),l=s.body}var p=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");a.set=r(function(e,t,n){return t=i(t),void 0===n?a.remove(t):(e.setAttribute(t,a.serialize(n)),e.save(u),n)}),a.get=r(function(e,t){return t=i(t),a.deserialize(e.getAttribute(t))}),a.remove=r(function(e,t){t=i(t),e.removeAttribute(t),e.save(u)}),a.clear=r(function(e){var t=e.XMLDocument.documentElement.attributes;e.load(u);for(var n,r=0;n=t[r];r++)e.removeAttribute(n.name);e.save(u)}),a.getAll=function(e){var t={};return a.forEach(function(e,n){t[e]=n}),t},a.forEach=r(function(e,t){for(var n,r=e.XMLDocument.documentElement.attributes,i=0;n=r[i];++i)t(n.name,a.deserialize(e.getAttribute(n.name)))})}t.register(n,a)}(this,this.kiwi,"store"),function(e,t,n){var r={};r.pushState=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/),r.store=t.store.isSupport()?!0:!1,t.register(n,r)}(this,this.kiwi,"support"),!function(e,t,n){var r={};r=function(e,t){return a(e,t)},r.mozilla=/firefox/.test(navigator.userAgent.toLowerCase()),r.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),r.opera=/opera/.test(navigator.userAgent.toLowerCase()),r.msie=/msie/.test(navigator.userAgent.toLowerCase()),r.form=function(e,t,n,r){i(e,t,n,r)};var i=function(t,n,i,a){var o,s,u,c=!1;u=$(lemon.startIf(n,"#")),u.submit(function(){function n(){try{var e=s.get(0).contentWindow.name||null;null!=e&&(s.remove(),u.remove(),t(e))}catch(n){}}s=$('<iframe name="_rmfrm_form" id="_rmfrm_form" style="display:none;" scrolling="no" frameborder="0"></iframe>'),$(document.body).append(s),u.attr("target","_rmfrm_form"),u.attr("action",i),u.attr("method",a),e.postMessage?t&&(o=null,o=function(n){$(e).unbind("message",o),s.remove(),u.remove(),t(n.originalEvent.data)},$(e).bind("message",o)):(s.load(function(){c?r.msie||n():(c=!0,s.get(0).contentWindow.location="about:blank")}),r.msie&&(s.get(0).onreadystatechange=function(){c&&n()}))})},a=function(t,n){function i(){try{var e=o.get(0).contentWindow.name||null;null!=e&&(o.remove(),n(e))}catch(t){}}var a,o,s=!1;o=$('<iframe name="_rmfrm" id="_rmfrm" style="display:none;" scrolling="no" frameborder="0"></iframe>'),$(document.body).append(o),o.attr("src",t),e.postMessage?n&&(a=null,a=function(t){$(e).unbind("message",a),o.remove(),n(t.originalEvent.data)},$(e).bind("message",a)):(o.load(function(){s?r.msie||i():(s=!0,o.get(0).contentWindow.location="about:blank")}),r.msie&&(o.get(0).onreadystatechange=function(){s&&i()}))};t.register(n,r)}(this,this.kiwi,"cross"),!function(e,t,n){function r(e){var t={};if(lemon.isString(e)&&$(e).length){var n=$(e).offset();n.w=$(e).width(),n.h=$(e).height(),t.el=e,t.area=n}else{if(!(lemon.isJson(e)&&lemon.has(e,"left")&&lemon.has(e,"top")&&lemon.has(e,"w")&&lemon.has(e,"h")))throw new Error("Arguments ilegal, supports jQuery selector || area eg: {left: 10, top: 70, w: 100, h: 300}");t.el="body",t.area=e}this.watch=t,this.area={},this.start()}var i={};i=function(e){return new r(e)};var a={};r.prototype.start=function(){var e=this.watch.el;return a[e]||($(e).bind("mousemove",{rel:this},o),a[e]=1),this},r.prototype.stop=function(){var e=this.watch.el;return a[e]&&($(e).unbind("mousemove",o),a[e]=0),this},r.prototype.listen=function(e){return e=t.extend({direct:"left",offsetX:5,offsetY:5,movein:null,moveout:null},e||{}),e.inplace=!1,this.area[e.direct]=e,this},i.status=function(){return{listening:a}};var o=function(e){var n=e.data.rel,r=null,i=n.watch.area,a=!1,o={x:e.pageX,y:e.pageY};t.each(n.area,function(e,n){switch(r=e,o.options=e,n){case"left":a=o.x>=i.left&&o.x<=i.left+r.offsetX&&o.y>=i.top+r.offsetY&&o.y<=i.top+i.h-r.offsetY;break;case"right":a=o.x>=i.left+i.w-r.offsetX&&o.x<=i.left+i.w&&o.y>=i.top+r.offsetY&&o.y<=i.top+i.h-r.offsetY;break;case"top":a=o.x>=i.left+r.offsetX&&o.x<=i.left+i.w-r.offsetX&&o.y>=i.top&&o.y<=i.top+r.offsetY;break;case"bottom":a=o.x>=i.left+r.offsetX&&o.x<=i.left+i.w-r.offsetX&&o.y>=i.top+i.h-r.offsetY&&o.y<=i.top+i.h;break;case"leftTop":a=o.x>=i.left&&o.x<=i.left+r.offsetX&&o.y>=i.top&&o.y<=i.top+r.offsetY;break;case"rightTop":a=o.x>=i.left+i.w-r.offsetX&&o.x<=i.left+i.w&&o.y>=i.top&&o.y<=i.top+r.offsetY;break;case"leftBottom":a=o.x>=i.left&&o.x<=i.left+r.offsetX&&o.y>=i.top+i.h-r.offsetY&&o.y<=i.top+i.h;break;case"rightBottom":a=o.x>=i.left+i.w-r.offsetX&&o.x<=i.left+i.w&&o.y>=i.top+i.h-r.offsetY&&o.y<=i.top+i.h}a?r.inplace||(r.inplace=!0,t.isFunc(r.movein)&&r.movein(o)):r.inplace&&(r.inplace=!1,t.isFunc(r.moveout)&&r.moveout(o))})};t.register(n,i)}(this,this.kiwi,"mousepos");</script><style>.fixed-panel{min-height:430px;max-height:430px;overflow-y:scroll}.fixed-dropdown{min-height:130px;max-height:530px;overflow-y:scroll;max-width:350px}.block-grey{background-color:#e6e6e6}.cm-s-lemon .CodeMirror{background-color:#fff;color:#2e383c;line-height:1.4375}.cm-s-lemon .cm-comment{color:#75787b}.cm-s-lemon .cm-keyword,.cm-s-lemon .cm-property{color:gray}.cm-s-lemon .cm-atom{color:#ff00ff}.cm-s-lemon .cm-number{color:#00f}.cm-s-lemon .cm-node,.cm-s-lemon .cm-tag{color:#9c3328}.cm-s-lemon .cm-string{color:green}.cm-s-lemon .cm-qualifier,.cm-s-lemon .cm-variable{color:#047d65}.cm-s-lemon pre{padding:0}.cm-s-lemon .CodeMirror-gutters{border:none;border-right:10px solid transparent;background-color:transparent}.cm-s-lemon .CodeMirror-linenumber{padding:0;color:#e0e2e5}.cm-s-lemon .CodeMirror-guttermarker{color:#1d75b3}.cm-s-lemon .CodeMirror-guttermarker-subtle{color:#e0e2e5}</style></head><body> <nav class="navbar navbar-default" id=home_navbar style=border:0> <div class=container-fluid> <div class=navbar-header> <a class=navbar-brand href=javascript:void(0);></a> </div> <div class="collapse navbar-collapse"> <ul class="nav navbar-nav" id=env_container> <li class=dropdown> <a href=javascript:void(0); class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Environment <span class=caret></span> </a> <ul class="dropdown-menu fixed-dropdown" role=menu id=which_env> <li><a href=#>Test</a></li> <li><a href=#>Product</a></li> </ul> </li> </ul> <ul class="nav navbar-nav"> <li class=dropdown> <a href=# class=dropdown-toggle data-toggle=dropdown role=button aria-expanded=false>Which API <span class=caret></span> </a> <ul class="dropdown-menu fixed-dropdown" role=menu id=which_api style=border:0> <li><a href=#>api1</a></li> <li><a href=#>api2</a></li> </ul> </li> </ul> <button type=button class=hidden id=btn_advance></button> <form class="navbar-form navbar-left" role=search> <div class=form-group> <div class=input-group id=group_search> <div class=input-group-btn> <button type=button class="btn btn-default dropdown-toggle" style=border:0 data-toggle=dropdown aria-haspopup=true aria-expanded=false> <span class="caret text-muted"></span></button> <ul class=dropdown-menu style=border:0 k> <li role=separator class=divider></li> <li> <a href=javascript:void(0); onclick=api.typeSearch(12)><span class=text-muted>Advance Search</span></a> </li> <li role=separator class=divider></li> <li><a href=javascript:void(0); onclick=api.typeSearch(1)><span class=text-muted>Defined APIs</span></a></li> <li><a href=javascript:void(0); onclick=api.typeSearch(4)><span class=text-muted>Tag</span></a></li> <li><a href=javascript:void(0); onclick=api.typeSearch(5)><span class=text-muted>Favourite</span></a></li> <li><a href=javascript:void(0); onclick=api.typeSearch(11)><span class=text-muted>Mutation</span></a></li> <li role=separator class=divider></li> </ul> </div>  <textarea type=text class=form-control id=input_search style=border:0;width:230px;height:34px placeholder="API & Histories.."></textarea> </div> </div> <button type=button class="btn btn-default" style=border:0 id=btn_search> <span class="glyphicon glyphicon-search text-muted" title=Search></span> </button> <button type=button class="btn btn-default" id=btn_request style=border:0><span class=text-muted>Request</span></button> <div class=btn-group> <button type=button class="btn btn-default" style=border:0 id=btn_request_tab><span class=text-muted>Request In New Tab</span></button> <button type=button class="btn btn-default dropdown-toggle" style=border:0 data-toggle=dropdown aria-haspopup=true aria-expanded=false> <span class="caret text-muted"></span> <span class=sr-only>Toggle Dropdown</span> </button> <ul class=dropdown-menu style=border:0> <li role=separator class=divider></li> <li><a href=javascript:void(0); id=btn_request_get><span class=text-muted>Request with Get</span></a></li> <li role=separator class=divider></li> <li><a href=javascript:void(0); id=btn_request_post><span class=text-muted>Request with Post</span></a></li> <li role=separator class=divider></li> </ul> </div> <button type=button class="btn btn-default" style=border:0 id=btn_history><span class=text-muted>History</span></button> <div class=btn-group> <button type=button class="btn btn-default" style=border:0 id=btn_note><span class=text-muted>Note</span></button> <button type=button class="btn btn-default dropdown-toggle" style=border:0 data-toggle=dropdown aria-haspopup=true aria-expanded=false> <span class="caret text-muted"></span> <span class=sr-only>Toggle Dropdown</span> </button> <ul class=dropdown-menu style=border:0> <li role=separator class=divider></li> <li><a href=javascript:void(0); id=btn_note_diff><span class=text-muted>Diff & Merge</span></a></li> <li role=separator class=divider></li> </ul> </div> <div id=input_note_wrap style=display:none> <textarea type=text class=hidden id=input_note></textarea> <div id=note_tool style=display:none state=close></div> <input type=file id=note_open_file class="hidden"> <input type=file id=diff_left_file class="hidden"> <input type=file id=diff_editor_file class="hidden"> <input type=file id=diff_right_file class="hidden"> <a class=hidden id=note_merge></a> </div> </form> <ul class="nav navbar-nav navbar-right"> </ul> </div> </div> </nav> <div id=message></div> <div class=row style="margin:0 5px"> <div class=col-md-6> <div class="panel panel-default" style=margin-bottom:2px;border:0> <div class=panel-body id=view_left> <form> <div class=form-group> <div class=pull-left> <button type=button class="btn btn-default" style=border:0><span class=text-muted>Request</span></button> </div> <div class="btn-group pull-right" id=left_toolbar> <button type=button class="btn btn-default" style=border:0 id=from_url> <span class="text-muted glyphicon glyphicon-road" title="Set Request Data From URL OR Join Selection with Comma Symbol"></span></button> <button type=button class="btn btn-default" style=border:0 id=as_default> <span class="text-muted glyphicon glyphicon-camera" title="Set Request Default Value"></span></button> <button type=button class="btn btn-default" style=border:0 id=define_api> <span class="text-muted glyphicon glyphicon-pencil" title="Define API"></span></button> <button type=button class="btn btn-default" style=border:0 data-element=#request data-toggle=modal data-target=#modal_tpl> <span class="text-muted glyphicon glyphicon-tree-deciduous" title="Show Request In Fullscreen (Esc Quit)"></span></button> <button type=button class="btn btn-default" style=border:0 data-element=both data-toggle=modal data-target=#modal_tpl> <span class="text-muted glyphicon glyphicon-eye-open" title="Show Request and Response In Fullscreen (Esc Quit)"></span></button> <button type=button class="btn btn-default" style=border:0 id=copy_url> <span class="text-muted glyphicon glyphicon-copy" title="Show Request URL"></span></button> <button type=button class="btn btn-default" style=border:0 id=snapshoot_share> <span class="text-muted glyphicon glyphicon-qrcode" title="Generate QRcode"></span></button> <button type=button class="btn btn-default" style=border:0 id=share_this> <span class="text-muted glyphicon glyphicon-share" title="Snapshoot Current Status to Share"></span></button> <button type=button class="btn btn-default" style=border:0 id=api_define> <span class="text-muted glyphicon glyphicon-question-sign" title="Show the Define API"></span></button> </div> <textarea class=form-control style=border:0 rows=21 id=request></textarea> </div> </form> </div>  </div> </div> <div class=col-md-6> <div class="panel panel-default" style=margin-bottom:2px;border:0> <div class=panel-body id=view_right> <form> <div class=form-group> <div class=pull-left> <button type=button class="btn btn-default" id=btn_repl style=border:0><span class=text-muted>Response</span></button> <div id=area_repl> <button type=button class=hidden id=btn_resp style=border:0></button> </div> </div> <div class="btn-group pull-right" id=right_toolbar> <button type=button class="btn btn-default" id=btn_his_prev step=-1 style=border:0><span title="Previous History" class="text-muted glyphicon glyphicon-chevron-left"></span></button> <button type=button class="btn btn-default" id=btn_his_next step=1 style=border:0><span title="Next History" class="text-muted glyphicon glyphicon-chevron-right"></span></button> <button type=button class="btn btn-default" style=border:0 data-element=#response data-toggle=modal data-target=#modal_tpl> <span class="text-muted glyphicon glyphicon-leaf" title="Show Response In Fullscreen (Esc Quit)"></span></button> <button type=button class="btn btn-default" style=border:0 data-element=both data-toggle=modal data-target=#modal_tpl> <span class="text-muted glyphicon glyphicon-eye-open" title="Show Request and Response In Fullscreen (Esc Quit)"></span></button> <button type=button class="btn btn-default" style=border:0 id=btn_preview> <span class="text-muted glyphicon glyphicon-info-sign" title=Previews></span></button> </div> <textarea class=form-control rows=21 style=border:0 id=response></textarea> </div> </form> </div> </div> </div> </div> <div class="modal fade" tabindex=-1 id=modal_tpl role=dialog></div> <button type=button class=hidden id=btn_modal_blank data-element=blank data-toggle=modal data-target=#modal_tpl></button> <script src=http://cdn.bootcss.com/labjs/2.0.3/LAB.min.js></script><script>lemon.setBasePath("http://cdn.bootcss.com"),lemon.register({css:function(e){lemon.each(lemon.isArray(e)?e:[e],function(e,n){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",lemon.getUrl(e)),lemon.query("head").appendChild(i)})},isUrl:function(e){return/^(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/.test(e)},iframe:function(e,n){var i="ifr_"+lemon.uniqueId();e=lemon.extend({id:i,name:i,align:null,allowfullscreen:null,frameborder:null,height:null,width:null,longdesc:null,marginheight:null,marginwidth:null,mozallowfullscreen:null,webkitallowfullscreen:null,referrerpolicy:null,scrolling:null,sandbox:null,seamless:null,src:null,srcdoc:null},e||{});var t=document.createElement("iframe"),r={iframe:t,attr:function(e){return lemon.each(e,function(e,n){lemon.isNull(e)||t.setAttribute(n,e)}),r},fit:function(e,n){return n=lemon.extend({height:0,width:0},n||{}),r.attr({width:$(e).width()+n.width,height:$(e).height()+n.height}),r},write:function(e){var n=r.getDocument();return n.open(),n.write(e),n.close(),r},openUrl:function(n,i){return r.attr({src:n}),$("#"+e.id).load(function(){lemon.isFunc(i)&&i(r)}),r},reload:function(){return r.getDocument().location.reload(!0),r},getDocument:function(){return t.contentDocument||t.contentWindow.document}};return r.attr(e),$(n||"body").append(t),r.dom=$(root.frames[e.name].document).contents(),r.doc=$(r.getDocument()),r}}),lemon.css(["bootstrap/3.3.5/css/bootstrap.min.css","progress.js/0.1.0/progressjs.min.css"]);var homeldend=function(){lemon.homeld&&lemon.homeld.base&&lemon.homeld.queue&&lemon.homeld.css&&(lemon.delay(function(){api.env.lemon()},500),lemon.homeld.end())};$LAB.script(lemon.getUrl("/jquery/2.1.4/jquery.min.js")).wait().script(lemon.getUrl("/bootstrap/3.3.5/js/bootstrap.min.js")).script(lemon.getUrl("/progress.js/0.1.0/progress.min.js")).wait(function(){lemon.homeld=progressJs().start().autoIncrease(5,100),lemon.prevhash=location.hash,$(root).bind("popstate",function(e){var n=location.hash;lemon.isBlank(n)||n==lemon.prevhash?api.nav.title():(api.hash.page(lemon.ltrim(n,"#")),lemon.prevhash=n)}),api.initialize(),lemon.homeld.base=1,homeldend()});var cmprfix="codemirror/5.10.0/";lemon.keymapvim=lemon.getUrl(cmprfix+"keymap/vim.min.js");var queue=$LAB.queueScript(lemon.getUrl(cmprfix+"codemirror.min.js")).queueWait().queueScript(lemon.getUrl(cmprfix+"addon/dialog/dialog.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/scroll/annotatescrollbar.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/search/searchcursor.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/search/matchesonscrollbar.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/search/search.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/search/match-highlighter.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/edit/matchbrackets.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/edit/matchtags.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/edit/closebrackets.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/edit/closetag.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/lint/javascript-lint.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/lint/json-lint.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/hint/javascript-hint.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/hint/show-hint.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/hint/anyword-hint.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/hint/xml-hint.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/hint/html-hint.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/hint/css-hint.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/hint/sql-hint.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/search/jump-to-line.min.js")).queueScript(lemon.getUrl(cmprfix+"mode/markdown/markdown.min.js")).queueScript(lemon.getUrl(cmprfix+"mode/javascript/javascript.min.js")).queueScript(lemon.getUrl(cmprfix+"mode/xml/xml.min.js")).queueScript(lemon.getUrl(cmprfix+"mode/htmlmixed/htmlmixed.min.js")).queueScript(lemon.getUrl(cmprfix+"mode/css/css.min.js")).queueScript(lemon.getUrl(cmprfix+"mode/meta.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/mode/loadmode.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/mode/simple.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/mode/overlay.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/mode/multiplex.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/display/fullscreen.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/display/panel.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/display/autorefresh.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/comment/comment.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/comment/continuecomment.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/fold/foldcode.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/fold/foldgutter.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/fold/brace-fold.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/fold/indent-fold.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/fold/comment-fold.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/fold/markdown-fold.min.js")).queueScript(lemon.getUrl(cmprfix+"addon/fold/xml-fold.min.js")).queueScript(lemon.keymapvim).queueScript(lemon.getUrl(cmprfix+"addon/selection/active-line.min.js")).queueScript(lemon.getUrl("diff_match_patch/20121119/diff_match_patch.js")).queueScript(lemon.getUrl(cmprfix+"addon/merge/merge.min.js")).queueScript(lemon.getUrl("/lz-string/1.4.4/lz-string.min.js")).queueScript(lemon.getUrl("/jquery.qrcode/1.0/jquery.qrcode.min.js")).queueScript(lemon.getUrl("/velocity/1.2.3/velocity.min.js")).queueScript(lemon.getUrl("/velocity/1.2.3/velocity.ui.min.js")).queueScript("http://jronrun.github.io/refs/jquery.blast.min.js").queueWait(function(){after.initialize(),lemon.isBlank(lemon.prevhash)?api.nav.title():api.hash.page(lemon.ltrim(location.hash,"#")),lemon.homeld.queue=1,homeldend()});lemon.delay(function(){api.intialized||api.initialize(),lemon.css([cmprfix+"codemirror.min.css",cmprfix+"addon/dialog/dialog.min.css",cmprfix+"addon/search/matchesonscrollbar.min.css",cmprfix+"addon/display/fullscreen.min.css",cmprfix+"addon/hint/show-hint.min.css",cmprfix+"addon/merge/merge.min.css",cmprfix+"addon/fold/foldgutter.min.css"]),queue.runQueue();try{root.isFileSaverSupported=!!new Blob,isFileSaverSupported&&$LAB.script(lemon.getUrl("/FileSaver.js/2014-11-29/FileSaver.min.js"))}catch(e){}lemon.homeld.css=1,homeldend()},500),lemon.delay(function(){lemon.css(lemon.getUrl("/intro.js/1.1.1/introjs.min.css")),$LAB.script(lemon.getUrl("/intro.js/1.1.1/intro.min.js")).wait(function(){root.help=introJs().setOptions({steps:[{intro:"hee!"},{element:lemon.query("#view_left"),intro:"This is a tooltip."}]})}),$LAB.script("http://jronrun.github.io/refs/console/console.min.js").wait(function(){lemon.css([lemon.getUrl(cmprfix+"theme/eclipse.min.css"),lemon.getUrl(cmprfix+"theme/base16-dark.min.css"),"http://jronrun.github.io/refs/console/console.css"]),api.repl.intl()})},1e3);</script><script type=text/html id=table_tmpl><div class="panel panel-default" id="r_search" style="border:0px;"> <% var clientW = document.body.clientWidth - 110; if (lemon.isBlank(histories)) { clientW = clientW + 35; } var panelH = document.body.clientHeight - 85; %> <div class="panel-body fixed-panel" style="height:<%=panelH%>px;max-height:<%=panelH%>px;"> <% if (!lemon.isBlank(apis)) { %> <table class="table table-hover"> <caption>API</caption> <thead> <tr> <th>#</th> <th> <button type="button" class="btn btn-default btn-sm" id="btn_tgl_apirequ">Request</button> <button type="button" class="btn btn-default btn-sm" id="btn_tgl_apiresp">Response</button> <button type="button" class="btn btn-default btn-sm" id="btn_tgl_interf">Collapse Toggle</button> </th> <th></th></tr> </thead> <tbody> <%  var interfType = ''; lemon.each(apis, function(v, k) { if (v && !lemon.isBlank(v.request)) { if (interfType != v.type.id) { interfType = v.type.id; %> <tr onclick="api.interfType(<%= interfType %>)"> <th></th> <td> <h4><span class="label label-info"><span class="glyphicon glyphicon-flag"></span> <%= v.type.name %></span></h4> </td> </tr> <% } %> <tr id="<%= k %>" type="<%= interfType %>"> <th scope="row"> </th> <td onDblClick="api.onSelect('<%= k %>', this)" ctype="2"> <blockquote style="width:<%=clientW - 60%>px;"> <% if (v.mutation > 0) { %>  <span class="label label-success"> <%= v.name %> Mutation </span>  <span class="text-success"  style="font-size:85%;"><%= lemon.repeat('&nbsp;', 3) %> <%= v.note %></span>  <% } %> <p> <pre style="background-color:#ffffff;border:0px;" tgl-apirequ="tgl"><p class="pull-right text-muted">Request</p><%= lemon.json.highlight(v.request) %></pre> </p> <% if (!lemon.isBlank(v.response)) { %> <%= api.showResponse(v.response) %>					 <% } %> <% if (0 == v.mutation) { %>				 <%= api.showNote(v.note) %> <% } %> <footer> <%= v.name %> <cite><%= v.desc %></cite> </footer> </blockquote> </td> <td> <% if (0 == v.mutation) { %> <button type="button" class="btn btn-default btn-xs" style="border:0px;" onclick="api.setAPIDefaultVal('<%= v.name %>')" id="set_default_<%= v.name %>"> <span class="glyphicon glyphicon-camera text-muted" title="Set API Default Value"></span> </button> <% } %> <% if (!lemon.isBlank(v.response)) { %> <button type="button" class="btn btn-default btn-xs" style="border:0px;" onclick="api.onSelectSinleClick(this, 3, 4)" clkey="<%= k %>"> <span class="glyphicon glyphicon-eye-open text-muted" title="Toggle Request Response"></span> </button> <% } %> <button type="button" class="btn btn-default btn-xs" style="border:0px;" onclick="api.hisTglRequResp('<%= k %>', 3)" id="his_tgl_apirequ_<%= k %>"> <span class="glyphicon glyphicon-tree-deciduous text-muted" title="Toggle Request"></span> </button> <% if (!lemon.isBlank(v.response)) { %> <button type="button" class="btn btn-default btn-xs" style="border:0px;" onclick="api.hisTglRequResp('<%= k %>', 4)" id="his_tgl_apiresp_<%= k %>"> <span class="glyphicon glyphicon-leaf text-muted" title="Toggle Response"></span> </button>				 <% } %> <button type="button" class="btn btn-default btn-xs" style="border:0px;" onclick="api.redefineAPI('<%= k %>')"> <span class="glyphicon glyphicon-pencil text-muted" title="Define API"></span> </button> </td> </tr> <% }}); %> </tbody> </table> <% } %>  <% if (showHisBtn) { %> <button type="button" class="btn btn-info btn-lg btn-block" id="btn_show_match_his">Show Match Histories</button> <% } %>  <% if (!lemon.isBlank(histories)) { %> <div id="his_table"> <!-- Table --> <table class="table table-hover"> <caption>History Request</caption> <thead> <tr> <th>#</th> <th> <div class="row"> <div class="col-md-6">  <h4><span class="label label-info"><span class="glyphicon glyphicon-filter"></span> Request Response</span></h4> <button type="button" class="btn btn-default btn-sm" id="btn_tgl_requ"><span class="text-muted">Request</span></button>  <button type="button" class="btn btn-default btn-sm" id="btn_tgl_resp"><span class="text-muted">Response</span></button> <button type="button" class="btn btn-default btn-sm" id="btn_tgl_interval"><span class="text-muted">Collapse Toggle</span></button> <button type="button" class="btn btn-info btn-sm" id="btn_extract"> <span class="glyphicon glyphicon-tint"></span> Extract... </button>  <h4><span class="label label-info"><span class="glyphicon glyphicon-filter"></span> Filter Favourite</span></h4> <button type="button" class="btn btn-default btn-sm" id="prop_filter_1"> <span class="text-muted glyphicon glyphicon-star"></span> <span class="text-muted">Favourite</span></button>  <h4> <span class="label label-info"><span class="glyphicon glyphicon-filter"></span> Filter Tags</span> <div class="input-group input-group-sm">  <span class="input-group-addon" style="border:0px;"><span title="Toggle Tag Manage Bar" class="text-muted glyphicon glyphicon-tag"></span></span> <input type="text" class="form-control" style="border:0px;" placeholder="tag.." id="tag_input"> <span class="input-group-btn input-group-sm">  <button class="btn btn-default btn-sm" style="border:0px;" type="button" id="tag_add"><span class="text-muted glyphicon glyphicon-plus"></span></button>  <button class="btn btn-default btn-sm" style="border:0px;" type="button" id="tag_edit"><span class="text-muted glyphicon glyphicon-edit"></span></button>  <button class="btn btn-default btn-sm" style="border:0px;" type="button" id="tag_rem"><span class="text-muted glyphicon glyphicon-minus"></span></button>  </span> </div> </h4> <div id="tag_group"> <% lemon.each(api.tag(), function(v, k) { var tagName = decodeURI(v.name); var aTag = [ ' <button type="button" onclick="api.ontag('+ v.id + ');"', ' class="btn btn-default btn-sm" style="margin-top:5px;" ', ' id="tag_filter_'+ v.id + '"><span class="text-muted"> ' + tagName + ' </span></button> ' ].join(''); %> <%= aTag %> <% }); %> </div>  </div> <div class="col-md-6">  <h4><span class="label label-info"><span class="glyphicon glyphicon-filter"></span> Filter Environment</span></h4> <% lemon.each(api.preference.service(), function(v, k) { %> <button type="button" class="btn btn-default btn-sm" id="env_filter_<%= v.env %>"><span class="text-muted"><%= v.desc %></span></button> <% }); %>  <h4><span class="label label-info"><span class="glyphicon glyphicon-filter"></span> Filter Server</span></h4> <% lemon.each(api.preference.service(), function(env, k) { %> <h6><span class="label label-success"><span class="glyphicon glyphicon-hand-down"></span> <%= env.env %> </span></h6> <% lemon.each(env.serv, function(serv, k) { var servName = api.getInterfGroup(serv.type.id).name + (lemon.isBlank(serv.note) ? '' : (' - ' + serv.note)); %> <button type="button" class="btn btn-default btn-sm" style="margin-top:5px;" id="filter_<%= serv.id %>"><span class="text-muted"><%= servName %></span></button> <% }); }); %>  </div> </div>  </th><th></th></tr> </thead> <tbody id="his_body"> <%= theHisTrs %> </tbody> </table> </div> <% } %> </div> </div></script> <script type=text/html id=his_tr_tmpl><%  if (!lemon.isBlank(histories)) { var no = intlNo - 1; var clientW = document.body.clientWidth - 110; if (lemon.isBlank(histories)) { clientW = clientW + 35; } var panelH = document.body.clientHeight - 150;  var tmp = ''; var batch = 0; lemon.each(api.historySortDesc(histories), function(v, k) { var env = api.env.which(v.interf); if (lemon.isBlank(env)) { env = { id: -1, env: 'UNKNOWN', desc: '', type: { id: -2, name: '' } }; } no++, tmp = lemon.when.interval(v.when); if (tmp != api.previousInterval.when) { batch = lemon.uniqueId();  api.previousInterval = { when: tmp, batch: batch };			  api.batches.push(batch); %> <tr onclick="api.interval(<%= batch %>)"> <th></th> <td> <h4><span class="label label-info"><span class="glyphicon glyphicon-time"></span> <%= api.previousInterval.when %></span></h4> </td> </tr> <% } else { batch = api.previousInterval.batch; }  %> <% var hisTags = api.customHis(v.k, 'tag') || []; var hisTagMark = []; var hisShowTags = []; lemon.each(hisTags, function(tagId, idx) { var aTag = api.tag(tagId); if (lemon.isBlank(aTag)) { api.customHis(v.k, 'tag', -1, tagId); } else { hisTagMark.push('tag' + tagId + '="' + tagId + '"'); hisShowTags.push(api.elhistag(v.k, tagId, aTag.name)); } }); %> <tr id="<%= v.k %>" batch="<%= batch %>" <%= hisTagMark.join(' ') %> interf="<%= env.id %>" env="<%= env.env %>" his="1" prop="<%= api.customHis(v.k,'fav') %>"> <th scope="row"> </th> <td onDblClick="api.onSelect('<%= v.k %>', this)" rapi="<%= v.api %>" ctype="1"> <blockquote style="width:<%=clientW - 25%>px;"> <div id="tag_area_<%= v.k %>"><%= hisShowTags.join(' ') %></div> <p> <pre style="background-color:#ffffff;height:100%;border:0px;" tgl-requ="tgl"><p class="pull-right text-muted">Request</p><%= lemon.json.highlight(v.request) %></pre> <pre style="background-color:#ffffff;height:100%;border:0px;" tgl-resp="tgl"><p class="pull-right text-muted">Response</p><%= lemon.json.highlight(v.response) %></pre> </p> <% var envDesc = env.desc + '  ' + env.type.name + (lemon.isBlank(env.note) ? '' : (' - ' + env.note)); var theStyle = 'PRODUCT' === env.env ? 'danger' : 'success'; %> <div id="show_note_<%= v.k %>"> <%  var note = api.customHis(v.k, 'note') || ''; if (!lemon.isBlank(note)) { %> <div class="alert alert-warning" role="alert" style="font-size:75%;"><%= note %></div> <% } %> </div> <footer><span class="badge"><%= no %></span> <font class="text-<%= theStyle %>"><%= envDesc %></font></footer> <footer> <%= (v.name || '') + '  ' + (v.api || '') %>  <cite><code><font class="text-<%= theStyle %>"><%= v.interf %></font></code><%= ' ' + v.when %></cite> </footer> </blockquote> </td> <td> <button type="button" class="btn btn-default btn-xs" style="border:0px;" onclick="api.historyAPIDesc(<%= v.k %>, '<%= v.api %>')" id="desc_<%= v.k %>"> <span class="text-muted glyphicon glyphicon-question-sign" title="Show the Define API Description"></span> </button> <button type="button" class="btn btn-default btn-xs" style="border:0px;" onclick="api.onSelectSinleClick(this)" clkey="<%= v.k %>"> <span class="text-muted glyphicon glyphicon-eye-open" title="Toggle Request Response"></span> </button> <button type="button" class="btn btn-default btn-xs" style="border:0px;" onclick="api.hisTglRequResp(<%= v.k %>, 1)" id="his_tgl_requ_<%= v.k %>"> <span class="text-muted glyphicon glyphicon-tree-deciduous" title="Toggle Request"></span> </button> <button type="button" class="btn btn-default btn-xs" style="border:0px;" onclick="api.hisTglRequResp(<%= v.k %>, 2)" id="his_tgl_resp_<%= v.k %>"> <span class="text-muted glyphicon glyphicon-leaf" title="Toggle Response"></span> </button> <button type="button" class="btn btn-default btn-xs" style="border:0px;" onclick="api.favourite(this, <%= v.k %>)"> <% if (1 == api.customHis(v.k,'fav')) { %> <span class="text-muted glyphicon glyphicon-star" title="Toggle Favourite"></span> <% } else { %> <span class="text-muted glyphicon glyphicon-star-empty" title="Toggle Favourite"></span> <% } %> </button> <button type="button" class="btn btn-default btn-xs" style="border:0px;" onclick="api.pencil(<%= v.k %>, <%= no %>)" id="pencil_<%= v.k %>"> <span class="text-muted glyphicon glyphicon-pencil" title="Note"></span> </button> <button type="button" class="btn btn-default btn-xs" style="border:0px;" onclick="api.itemTag(<%= v.k %>, <%= no %>)" id="tags_<%= v.k %>"> <span class="text-muted glyphicon glyphicon-tags" title="Tags"></span> </button> </td> </tr> <% }); }%></script> <script type=text/html id=blank_tmpl><% var clientW = document.body.clientWidth - 30; var panelH = document.body.clientHeight - 70; if ('blank_popup' != id) { %> <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="z-index:55103"><span aria-hidden="true" class="text-danger">x</span>&nbsp;&nbsp;</button> <% } %> <div id="<%= id %>" style="height:<%=panelH%>px;max-height:<%=panelH%>px;width:<%=clientW%>px;"></div></script> <script type=text/html id=setting_tmpl><% var clientW = document.body.clientWidth - 30; var panelH = document.body.clientHeight - 70; %> <div id="settings" style="height:<%=panelH%>px;max-height:<%=panelH%>px;width:<%=clientW%>px;"> <ul id="" class="nav nav-tabs" role="tablist"> <li role="presentation" class=""> <a href="#basic" id="basic-tab" role="tab" data-toggle="tab" aria-controls="basic" aria-expanded="true">Basic Setting</a> </li> <li role="presentation" class=""> <a href="#server" role="tab" id="server-tab" data-toggle="tab" aria-controls="server" aria-expanded="false">Define Server</a> </li> <li role="presentation" class=""> <a href="#theapic" role="tab" id="theapic-tab" data-toggle="tab" aria-controls="theapic" aria-expanded="false">Define API</a> </li> <li role="presentation" class="dropdown"> <a href="#" id="import_export_tab" class="dropdown-toggle" data-toggle="dropdown" aria-controls="import_export_tab-contents"> Import & Export <span class="caret"></span> </a> <ul class="dropdown-menu" style="border:0px;" aria-labelledby="import_export_tab" id="import_export_tab-contents"> <li><a href="#import_tab" role="tab" id="import_tab-tab" data-toggle="tab" aria-controls="import_tab">@Import</a></li> <li><a href="#export_tab" role="tab" id="export_tab-tab" data-toggle="tab" aria-controls="export_tab">@Export</a></li> </ul> </li> <li role="presentation"> &nbsp; <button type="button" class="btn btn-info btn-xs" onclick="api.preference.close();"> <span class="glyphicon glyphicon-log-out" title="Tags"></span> Discard Changes</button> </li> </ul>  <div id="myTabContent" class="tab-content" style="overflow-y:auto;height:550px;"> <div id="message_settings"></div> <div role="tabpanel" class="tab-pane fade in" id="basic" aria-labelledby="basic-tab"> <div class="row" style="margin: 0 5px;">  <div class="col-md-4"> <h4>Interface Group</h4> <div class="panel panel-default"> <div class="panel-body"> <textarea id="p_interf" style="border:0px solid #ffffff;width:368px;height:450px;"></textarea> </div> </div> </div>  <div class="col-md-4"> <h4>Environment</h4> <div class="panel panel-default"> <div class="panel-body"> <textarea id="p_env" style="border:0px solid #ffffff;width:368px;height:450px;"></textarea> </div> </div> </div>  <div class="col-md-4"> <h4>Configuration</h4> <div class="panel panel-default"> <div class="panel-body"> <textarea id="p_config" style="border:0px solid #ffffff;width:368px;height:450px;"></textarea> </div> </div> </div>  </div> </div> <div role="tabpanel" class="tab-pane fade" id="server" aria-labelledby="server-tab">  </div> <div role="tabpanel" class="tab-pane fade active" id="theapic" aria-labelledby="theapic-tab">  </div> <div role="tabpanel" class="tab-pane fade" id="import_tab" aria-labelledby="import_tab-tab">  <h4></h4> <h1> <div class="btn-group pull-right"> <button type="button" class="btn btn-info btn-lg" onclick="api.impexp.load();" id="btn_imp">  <%= lemon.repeat('&nbsp;', 3) %> <span class="glyphicon glyphicon-import" title="Import"></span> Import <%= lemon.repeat('&nbsp;', 3) %> </button> </h1>         <input type="file" id="imp_file" class="hidden"/>  </div> <div role="tabpanel" class="tab-pane fade" id="export_tab" aria-labelledby="export_tab-tab">  <h4></h4> <h1> <div class="btn-group pull-right"> <button type="button" class="btn btn-info btn-lg" onclick="api.impexp.doexport(this);">  <%= lemon.repeat('&nbsp;', 3) %> <span class="glyphicon glyphicon-export" title="Export"></span> Export <%= lemon.repeat('&nbsp;', 3) %> </button> <button type="button" class="btn btn-info btn-lg dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> <span class="caret"></span> <span class="sr-only">Toggle Dropdown</span> </button> <ul class="dropdown-menu" style="border:0px;"> <li role="separator" class="divider"></li> <li><a href="javascript:void(0);"  onclick="api.impexp.doexport(this, 2);"> <span class="glyphicon glyphicon-export" title="Export"></span> Export as Human Readable </a></li> <li role="separator" class="divider"></li> <li><a href="javascript:void(0);"  onclick="api.impexp.doexport(this, 3);"> <span class="glyphicon glyphicon-export" title="Export"></span> Export as data center configuration </a></li> <li role="separator" class="divider"></li> </ul> </div> </h1>  <p>&nbsp;</p> <div id="export_option" class="list-group" style="width:50%"> <button type="button" class="list-group-item btn btn-default active" id="exp_basic">  <span class="glyphicon glyphicon-check" title="Basic Setting"></span> Basic Setting </button> <p></p> <button type="button" class="list-group-item btn btn-default active" id="exp_server">  <span class="glyphicon glyphicon-check" title="Define Server"></span> Define Server </button> <p></p> <button type="button" class="list-group-item btn btn-default active" id="exp_api">  <span class="glyphicon glyphicon-check" title="Define API"></span> Define API </button> <p></p> <button type="button" class="list-group-item btn btn-default active" id="exp_mutate">  <span class="glyphicon glyphicon-check" title="Define API Mutation"></span> Define API Mutation</button> <p></p> <button type="button" class="list-group-item btn btn-default active" id="exp_dft">  <span class="glyphicon glyphicon-check" title="Define API Default Value"></span> Define API Default Value </button> <p></p> <button type="button" class="list-group-item btn btn-default active" id="exp_cust">  <span class="glyphicon glyphicon-check" title="Request History Note & Tag & Favourite"></span> Request History Note & Tag & Favourite </button> <p></p> <button type="button" class="list-group-item btn btn-default" id="exp_note">  <span class="glyphicon glyphicon-unchecked" title="Notes"></span> Notes </button> <p></p> <button type="button" class="list-group-item btn btn-default" id="exp_history">  <span class="glyphicon glyphicon-unchecked" title="Request History"></span> Request Histories </button> </div>  </div> </div> </div></script> <script type=text/html id=setting_server_tmpl><div class="row" style="margin: 0 5px;">  <div class="col-md-6" id="p_server_left"> <h4></h4> <form>  <div class="btn-group" role="group" aria-label="..."> <div class="btn-group" role="group"> <select class="form-control" id="ss_env" name="env"> <% lemon.each(api.preference.env().environment, function(env, idx)	{ %> <option value="<%= env.env %>"><%= env.desc %></option> <%	}); %> </select> </div>&nbsp; <span class="glyphicon glyphicon-pencil" aria-hidden="true" title="Define Environment" onclick="api.redefineEnvInterfG(1);"></span> </div>  <%= lemon.repeat('&nbsp;', 1) %>  <div class="btn-group" role="group" aria-label="..."> <div class="btn-group" role="group"> <select class="form-control" id="ss_interf" name="typeId"> <% lemon.each(api.preference.interf(), function(group, idx)	{ %> <option value="<%= group.id %>"><%= group.name %></option> <%	}); %> </select> </div>&nbsp; <span class="glyphicon glyphicon-pencil" aria-hidden="true" title="Define Interface Group" onclick="api.redefineEnvInterfG(2);"></span> </div>  <%= lemon.repeat('&nbsp;', 1) %> <button type="button" class="btn btn-info" id="ss_default"> <span class="glyphicon glyphicon-unchecked" aria-hidden="true"></span>  Default </button> <%= lemon.repeat('&nbsp;', 1) %> <button type="button" class="btn btn-default" onclick="api.preference.help(this);" title="Show Server Define Help"> <span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span> </button> <button type="button" class="btn btn-default" onclick="api.preference.newServId();" title="New Server ID"> <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> </button> </form> <h5> </h5> <textarea id="ss_server" style="border:0px solid #ffffff;width:580px;height:221px;"></textarea> <h5> </h5> </div>  <div class="col-md-6" style="overflow-y:auto;height:550px;" id="p_server_right"> <% lemon.each(api.preference.service(), function(envGroup, k) {  var isProduct = 'PRODUCT' === envGroup.env; var clazz = isProduct ? 'danger' : 'info'; lemon.each(api.env.servSortEsc(envGroup.serv), function(serv, k) { var servGroup = api.getInterfGroup(serv.type.id); var servName = lemon.repeat('&nbsp;', 1) + servGroup.name; var showServ = lemon.clone(serv); delete showServ.type; if (showServ.asDefault) { delete showServ.asDefault; } %> <div class="thumbnail" tenv="<%=envGroup.env%>" tgroup="<%= serv.type.id %>" tid="<%= serv.id %>"> <div class="caption"> <p> <span class="badge"><%= serv.id %></span> <code><font class="text-<%= clazz %>""> <%= envGroup.desc %><%= servName %> </font></code> <% if (serv.asDefault && 1 === serv.asDefault) { %> <span class="label label-info pull-right">Default Server</span> <% } %> <p> <pre style="border:0px solid #ffffff;background-color:#ffffff;"><%= lemon.json.highlight(showServ) %></pre> </div> </div> <% }); %> <% }); %>  </div> </div></script> <script type=text/html id=setting_apic_tmpl><div class="row" style="margin: 0 5px;"> <div class="col-md-8" id="p_apic_left"> <h4></h4> <blockquote> <form> <%= lemon.repeat('&nbsp;', 2) %> <div class="btn-group" role="group" aria-label="..."> <div class="btn-group" role="group"> <select class="form-control" id="sa_interf" name="apiTypeId">  <% lemon.each(api.preference.interf(), function(group, idx) { %> <option value="<%= group.id %>"><%= group.name %></option>  <% }); %> </select> </div>&nbsp; <span class="glyphicon glyphicon-pencil" aria-hidden="true" title="Define Interface Group" onclick="api.redefineEnvInterfG(2);"></span> </div> <%= lemon.repeat('&nbsp;', 4) %> <button type="button" class="btn btn-info" onclick="api.defineMutation();" id="btn_mutation" title="Define as Mutation"> <span class="glyphicon glyphicon-unchecked"></span> Define as Mutation  </button> <%= lemon.repeat('&nbsp;', 4) %> <div class="btn-group" id="apic_env_container"></div> </form> <h4></h4> <textarea id="sa_apic" style="border: 0px solid #ffffff; width: 790px; height: 380px;"></textarea> <footer> The property "note": [ <cite>string | string array | JSON</cite> ] </footer> </blockquote> </div> <div class="col-md-4" id="p_apic_right"> </div> </div></script> <script type=text/html id=cross_source_tmpl><!DOCTYPE HTML> <html> <head> <meta charset="utf-8"> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" /> <meta name="format-detection" content="telephone=no" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-status-bar-style" content="black" /> <title>API Configuration</title> </head> <body> <%= decodeURI('%3Cscript%20%20type=%22text/javascript%22%3E') %> var put = function(cfg) { window.name = cfg; try { var target = parent.postMessage ? parent : (parent.document.postMessage ? parent.document : undefined);  if (typeof target != "undefined") { target.postMessage(cfg, "*"); } } catch (e) {/**/} }; var defines = <%= rapicfg %>; put(defines); <%= decodeURI('%3C/script%3E') %> </body> </html></script> <script type=text/html id=note_tool_tmpl><nav class="navbar navbar-default" id="note_tool_bar" style="margin-bottom:0px;border:0px;background-color:#ffffff"> <div class="container-fluid"> <ul class="nav navbar-nav"> <li class="dropdown"> <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">File</a> <ul class="dropdown-menu" style="border:0px;"> <li><a href="javascript:void(0);" onclick="note.newNote();" title=":new"><%= note.menu('New', ':n', 'visual') %></a></li> <li><a href="javascript:void(0);" onclick="note.openFile();" title=":open"><%= note.menu('Open File...', ':o', 'visual') %></a></li> <li role="separator" class="divider"></li> <li><a href="javascript:void(0);" onclick="note.menuTgl();" title="Mouse move left toggle menu"><%= note.menu('Close Menu', ':menu', 'visual') %></a></li> <li><a href="javascript:void(0);" onclick="note.close();" title="Close Note"><%= note.menu('Close Note', ':q', 'visual') %></a></li> <li><a href="javascript:void(0);" onclick="note.share();" title="Share Note to Browser Address"><%= note.menu('Share Note', ':share', 'visual') %></a></li> <li><a href="javascript:void(0);" onclick="note.preview();" title=":view"><%= note.menu('Preview', ':v', 'visual') %></a></li> <li role="separator" class="divider"></li> <li><a href="javascript:void(0);" onclick="note.save();" title="Save Note"><%= note.menu('Save Note', ':w', 'visual') %></a></li> <li><a href="javascript:void(0);" onclick="note.saveclose();" title="Save & Close Note"><%= note.menu('Save & Close Note', ':wq', 'visual') %></a></li> <li><a href="javascript:void(0);" onclick="note.save(null, 1);" title="Save As..."><%= note.menu('Save As...', ':sa', 'visual') %></a></li> <li><%= lemon.repeat('&nbsp;', 80) %></li> </ul> </li>  <li class="dropdown"> <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Edit</a> <ul class="dropdown-menu" style="border:0px;" id="note_edit"> <li><a href="javascript:void(0);" ex="undo" title=":undo"><%= note.menu('Undo', 'u', 'visual') %></a></li> <li><a href="javascript:void(0);" ex="redo" title=":redo"><%= note.menu('Redo', 'Ctrl-R', 'visual') %></a></li> <li role="separator" class="divider"></li> <li><a href="javascript:void(0);" func="editMode" title=""><%= note.menu('Edit Mode', 'i', 'visual') %></a></li> <li><a href="javascript:void(0);" func="visualMode" title=""><%= note.menu('Visual Mode', 'Esc', 'edit') %></a></li> <li role="separator" class="divider"></li> <li><a href="javascript:void(0);" func="wordwrap" title=":wrapword"><%= note.menu('Word Wrap', ':wrap', 'visual') %></a></li> <li><a href="javascript:void(0);" cmd="toggleComment" title=""><%= note.menu('Toggle Comment', 'Ctrl-/', 'visual & edit') %></a></li> <li><a href="javascript:void(0);" func="tglFoldCode" title=""><%= note.menu('Toggle Fold Code', 'Ctrl-Q', 'visual & edit') %></a></li> <li><a href="javascript:void(0);" cmd="autocomplete" title=""><%= note.menu('Content Assist', 'Ctrl-J', 'visual & edit') %></a></li> <li><a href="javascript:void(0);" cmd="toMatchingTag" title=""><%= note.menu('Matching Tag', 'Ctrl-K', 'visual & edit') %></a></li> <li role="separator" class="divider"></li> <li><a href="javascript:void(0);" cmd="selectAll" title="Select All"><%= note.menu('Select All', 'Ctrl-A', 'visual & edit') %></a></li> <li><a href="javascript:void(0);" cmd="find" title="/"><%= note.menu('Find...', 'Cmd-F', 'edit') %></a></li> <li><a href="javascript:void(0);" cmd="findNext" title="n"><%= note.menu('Find Next', 'Cmd-G', 'edit') %></a></li> <li><a href="javascript:void(0);" cmd="replace" title=":%s/"><%= note.menu('Replace...', 'Cmd-Alt-F', 'edit') %></a></li> <li><a href="javascript:void(0);" cmd="replaceAll" title=":%s/"><%= note.menu('Replace All', 'Shift-Cmd-Alt-F', 'edit') %></a></li> <li><a href="javascript:void(0);" cmd="jumpToLine" title=":jump"><%= note.menu('Jump To Line', 'Alt-G', 'edit') %></a></li> <li><%= lemon.repeat('&nbsp;', 80) %></li> </ul> </li>  <li class="dropdown"> <a href="javascript:void(0);" id="note_list_dd" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Note</a> <ul class="dropdown-menu fixed-dropdown" style="max-width: 400px;border:0px;" id="note_list"> <div class="form-group form-group-lg" style="margin-left:15px;margin-bottom:15px;margin-top:15px;"> <div class="col-sm-12"> <input class="form-control" type="text" id="note_list_qry" style="width:300px;" placeholder="Search Note..."> </div> </div> <% lemon.each(note.listNote(), function(n, idx) { var cnid = note.instance.noteId || -1; %> <li nid="<%= n.id %>" id="note_<%= n.id %>" note="1"><blockquote style="width:380px;" title="" class=""> <h4 class="text-info"><%= n.title %><% if (cnid == n.id) { %><span class="pull-right text-danger glyphicon glyphicon-check"></span><% } %></h4> <h6 class="text-muted">Created <%= '  ' + n.create %></h6> <h6 class="text-muted">Modified <%= ' ' + n.lastmodify %></h6> <h6 class="text-muted"> <span class="badge"><%= n.id %></span> <div class="btn-group pull-right" role="group" aria-label="..."> <button type="button" title="Delete Note <%= n.title %>" id="note_rem_<%= n.id %>" nt="<%= n.title %>" nid="<%= n.id %>" style="border:0px;" class="btn btn-default"> <span class="text-danger glyphicon glyphicon-remove-circle"></span> </button> </div> </h6> </blockquote></li> <% }); %> </ul> </li>  <li class="dropdown"> <a href="javascript:void(0);" id="note_mode_dd" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Language</a> <ul class="dropdown-menu fixed-dropdown" style="max-width: 400px;border:0px;" id="note_mode"> <div class="form-group form-group-lg" style="margin-left:15px;margin-bottom:15px;margin-top:15px;"> <div class="col-sm-12"> <input class="form-control" type="text" id="note_mode_qry" style="width:300px;" placeholder="Search Language..."> </div> </div> <% lemon.each(notesource.langs, function(lang, langname) { %> <li name="<%= langname %>" id="lang_<%= lang.id %>" lang="1"> <blockquote style="width:380px;" title="" class=""> <h4 class="text-success"><%= langname %><% if (langname == note.storecfg('language')) { %><span class="pull-right text-danger glyphicon glyphicon-check"></span><% } %></h4> <div class="row"> <div class="col-md-8"> <% if ('null' != lang.mime || (lang.mimes && lang.mimes.length > 0)) { %> <h5><p class="text-muted"> Defined MIME types </p></h5> <% } %> <% if (lang.mimes && lang.mimes.length > 0) { lemon.each(lang.mimes, function(mime, i2) { %> <h5 class="text-muted"><a href="javascript:void(0);" clk="1" val="<%= mime %>"><%= mime %></a></h5> <% }); } else if ('null' != lang.mime) { %> <h5 class="text-muted"><a href="javascript:void(0);" clk="1" val="<%= lang.mime %>"><%= lang.mime %></a></h5> <% } %> </div> <div class="col-md-4"> <% if (lang.ext && lang.ext.length > 0) {  %> <h5><p class="text-muted"> Extensions </p></h5> <% lemon.each(lang.ext, function(ext, idx) { %> <h5 class="text-muted"><a href="javascript:void(0);" clk="1" val="<%= ext %>"><%= ext %></a></h5> <% }); }%> </div> </div> </blockquote> </li> <% }); %> <li><%= lemon.repeat('&nbsp;', 60) %></li> </ul> </li>  <li class="dropdown"> <a href="javascript:void(0);" id="note_theme_dd" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Theme</a> <ul class="dropdown-menu fixed-dropdown" style="border:0px;" id="note_theme"> <% lemon.each(notesource.themes, function(th, idx) { %> <li th="<%= th %>"> <blockquote style="" title="" class=""> <h5 class="text-success"><%= th %><% if (th == note.storecfg('theme')) { %> <span class="pull-right text-danger glyphicon glyphicon-check"></span><% } %></h5> </blockquote> </li> <% }); %> <li><%= lemon.repeat('&nbsp;', 60) %></li> </ul> </li>  <li> <a href="javascript:void(0);" id="note_compare" role="button" aria-haspopup="true" aria-expanded="false">Compare</a> </li>  <li> <a href="javascript:void(0);" id="note_preview" role="button" aria-haspopup="true" aria-expanded="false">Preview</a> </li>  <li class="dropdown"> <a href="javascript:void(0);" id="note_help_dd" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Help</a> <ul class="dropdown-menu" style="border:0px;"> <li><a href="javascript:void(0);" onclick="note.showhelp(3);" title="Vim">Vim</a></li> <li><a href="javascript:void(0);" onclick="note.showhelp(7);" title="Vim Cheat Sheet">Vim Cheat Sheet</a></li> <li><a href="javascript:void(0);" onclick="note.showhelp(6);" title="Vim Cheat Sheets">Vim Cheats</a></li> <li><a href="javascript:void(0);" onclick="note.showhelp(5);" title="Note Vim">Note Vim</a></li> <li><a href="javascript:void(0);" onclick="note.showhelp(4);" title="Codemirror Vim">Codemirror Vim</a></li> </ul> </li>  </ul> <ul class="nav navbar-nav navbar-right"> <li><a href="javascript:void(0);" class="close" title="Close" aria-label="Close" onclick="note.close();"><span aria-hidden="true">x</span></a></li> </ul> </div> </nav></script> <script type=text/html id=note_merge_menu_tmpl><nav class="navbar navbar-default navbar-fixed-top" id="nav_merge" style="margin-bottom:0px;border:0px;background-color:#ffffff"> <div class="container-fluid"> <ul class="nav navbar-nav">  <li class="dropdown"> <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">File</a> <ul class="dropdown-menu" style="border:0px;" id="note_edit"> <li> <a href="javascript:void(0);" onclick="note.diff.loadLeft();" role="button" aria-haspopup="true" aria-expanded="false">Open File for Left...</a> </li> <li> <a href="javascript:void(0);" onclick="note.diff.loadRight();" role="button" aria-haspopup="true" aria-expanded="false">Open File for Right...</a> </li> <li role="separator" class="divider"></li> <li> <a href="javascript:void(0);" onclick="note.diff.saveNote();" role="button" aria-haspopup="true" aria-expanded="false">Save Note</a> </li> <li> <a href="javascript:void(0);" onclick="note.diff.saveasNewNote();" role="button" aria-haspopup="true" aria-expanded="false">Save As New Note</a> </li> <li> <a href="javascript:void(0);" onclick="note.diff.saveas();" role="button" aria-haspopup="true" aria-expanded="false">Save As...</a> </li> <li><%= lemon.repeat('&nbsp;', 60) %></li> </ul> </li>  <li><li> <a href="javascript:void(0);" title="Open File for Left..." onclick="note.diff.loadLeft();" role="button" aria-haspopup="true" aria-expanded="false">Left <span class="text-success glyphicon glyphicon-option-horizontal"></span></a></li> <li><li> <a href="javascript:void(0);" title="Open File for Right..." onclick="note.diff.loadRight();" role="button" aria-haspopup="true" aria-expanded="false">Right <span class="text-success glyphicon glyphicon-option-horizontal"></span></a></li> <li><li> <a href="javascript:void(0);" title="Next Different Section" onclick="note.diff.next();" role="button" aria-haspopup="true" aria-expanded="false">Next <span class="text-success glyphicon glyphicon-circle-arrow-down"></span></a></li> <li><li> <a href="javascript:void(0);" title="Previous Different Section" onclick="note.diff.prev();" role="button" aria-haspopup="true" aria-expanded="false">Prev <span class="text-success glyphicon glyphicon-circle-arrow-up"></span></a></li>  </ul> <ul class="nav navbar-nav navbar-right"> <li><button type="button" class="btn btn-info btn-xs" style="margin-top:15px;" title="Toggle Three Panes" onclick="note.diff.threeway();" id="btn_threeway"><span class="glyphicon glyphicon-unchecked"></span> Panes</button></li> <li style="margin-left:15px;"><button type="button" class="btn btn-info btn-xs" style="margin-top:15px;" title="Toggle Collapse Unchanged Stretches of Text" onclick="note.diff.collapse();" id="btn_collapse"><span class="glyphicon glyphicon-unchecked"></span> Collapse</button></li> <li id="li_to_note" style="display:none;"> <a href="javascript:void(0);" title="Note" role="button" aria-haspopup="true" aria-expanded="false"><span class="glyphicon glyphicon-th-list"></span></a> </li> <li><a href="javascript:void(0);" class="close" title="Close" aria-label="Close" onclick="note.diff.close();"><span aria-hidden="true">x</span></a></li> </ul> </div> </nav></script> <script type=text/html id=extract_base_tmpl><form class="form-inline" id="<%= cid %>"> <h4> <span class="label label-info"><span class="glyphicon glyphicon-filter"></span> Matches</span> <select class="form-control btn-sm" name="symbol">  <option value="&">AND</option> <option value="|">OR</option> </select> <button type="button" class="btn btn-default" onclick="api.advqry.addCond('<%= cid %>');"><span class="text-muted glyphicon glyphicon-plus"></span></button> <button type="button" class="btn btn-default" cid="<%= cid %>" onclick="api.advqry.camera(this);"><span class="text-muted glyphicon glyphicon-camera"></span></button> </h4> </form> <h4></h4></script> <script type=text/html id=extract_tmpl><div ex="filter" idx="<%= index %>" id="ex_filter_<%= index %>"> <h4></h4> <select class="form-control" name="op<%= index %>">  <option value="both">Request OR Response</option> <option value="requ">Request</option> <option value="resp">Response</option> </select> <input type="text" class="form-control" name="key<%= index %>" placeholder="'s property"> <input type="text" class="form-control" name="val<%= index %>" placeholder="like this value"> <button type="button" class="btn btn-default" onclick="api.advqry.remCond('<%= index %>');"><span class="text-muted glyphicon glyphicon-minus"></span></button> </div></script> <script type=text/html id=extract_prop_base_tmpl><form class="form-inline" id="<%= cid %>"> <h4> <span class="label label-info"><span class="glyphicon glyphicon-filter"></span> Extract Properties</span> <button type="button" class="btn btn-default" onclick="api.advqry.addProp('<%= cid %>');"><span class="text-muted glyphicon glyphicon-plus"></span></button> <button type="button" class="btn btn-primary pull-right" cid="<%= cid %>" pid="<%= parentCid %>" onclick="api.advqry.extract2note(this);"><span class="glyphicon glyphicon-tint"></span> Extract to Note</button> </h4> </form> <h4></h4></script> <script type=text/html id=extract_prop_tmpl><div ex="prop" idx="<%= index %>" id="ex_prop_<%= index %>"> <select class="form-control" name="op<%= index %>">  <option value="requ">Request</option> <option value="resp">Response</option> </select> <input type="text" class="form-control" name="key<%= index %>" id="fname_key_<%= index %>" onkeyup="api.advqry.chgProp(this);" placeholder="'s property"> <input type="text" class="form-control" name="val<%= index %>" id="fname_val_<%= index %>" placeholder="as filed name..."> <button type="button" class="btn btn-default" onclick="api.advqry.remProp('<%= index %>');"><span class="text-muted glyphicon glyphicon-minus"></span></button> </div></script> <script type=text/html id=share_opt_tmpl><div id="share_option" class="list-group"> <button type="button" style="border:0px;" class="list-group-item btn btn-default" id="share_min" stype="1">  <span class="glyphicon glyphicon-hand-right" title="Readonly"></span> &nbsp;&nbsp; Minimum </button> <p></p> <button type="button" style="border:0px;" class="list-group-item btn btn-default" id="share_minhelp" stype="2">  <span class="glyphicon glyphicon-hand-right" title="Readonly & API help"></span> &nbsp;&nbsp; Readonly & API help </button> <p></p> <button type="button" style="border:0px;" class="list-group-item btn btn-default" id="share_one" stype="3">  <span class="glyphicon glyphicon-hand-right" title="Editable & Unload Defines"></span> &nbsp;&nbsp; Editable & Unload defines </button> <p></p> <button type="button" style="border:0px;" class="list-group-item btn btn-default" id="share_max" stype="4">  <span class="glyphicon glyphicon-hand-right" title="Share Maximum"></span> &nbsp;&nbsp; Maximum </button> <p></p> <button type="button" style="border:0px;" class="list-group-item btn btn-default" id="share_regret_load" stype="5">  <span class="glyphicon glyphicon-hand-right" title="Regret Share load defines"></span> &nbsp;&nbsp; Regret Load Defines </button> <p></p> <button type="button" style="border:0px;" class="list-group-item btn btn-default" id="share_clean" stype="6">  <span class="glyphicon glyphicon-hand-right" title="Share Clean"></span> &nbsp;&nbsp; Response Command </button> </div></script>  <script type=text/html id=modal_tmpl><% var titleLabel = 'title_' + lemon.uniqueId(); %> <div class="modal fade" id="<%= triggerId %>" tabindex="-1" role="dialog" aria-labelledby="<%= titleLabel %>"> <div class="modal-dialog <%= modalDialogClass %>"> <div class="modal-content"> <% if (!lemon.isBlank(title)) { %> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">x</span></button> <h6 class="modal-title" id="<%= titleLabel %>"><%= title %></h6> </div> <% } %> <div class="modal-body"> <% var theContent = content; if (lemon.isFunc(content)) { theContent = content(); } %> <%= theContent %> </div> </div> </div> </div></script> <script>root=window,lemon.addDateMask({tiny:"yyyymmddHHMMss",mark:"yyyymmddHHMMss.l"}),lemon.console(),lemon.getset({env:null,api:null});var api=api||{batches:[],intialized:!1,previousInterval:{when:"",batch:0},analyze:[{id:1,sep:",",subsep:":"},{id:2,sep:",",subsep:"="},{id:3,sep:"&",subsep:"="},{id:4,sep:"&",subsep:":"},{id:5,sep:";",subsep:"="},{id:6,sep:";",subsep:":"}],initialize:function(){this.env.render(),this.cmd.render(),this.nav.render(),this.mod.render(),this.intialized=!0},hash:{curHisId:null,to:function(e){location.hash=lemon.startIf(e,"#")},requ:function(e,n){this.to(lemon.format("#api/{0}/{1}.{2}",e,lemon.when.mark(),n))},apid:function(e,n){this.to(lemon.format("#apid/{0}/{1}{2}",e,lemon.when.mark(),lemon.isUndefined(n)?"":"."+n))},snap:function(e,n){api.hash.localtrigger=1,this.to(lemon.format("#snap/{0}/{1}",lemon.when.mark(),e||api.hash.snapshoot(n)))},note:function(e,n){api.hash.localtrigger=1,e=LZString.compressToEncodedURIComponent(e||""),lemon.endWith("…")&&lemon.warn(e),this.to(lemon.format("#note/{0}/{1}/{2}",lemon.when.mark(),e,LZString.compressToEncodedURIComponent(lemon.json.reverse(n||{}))))},snapshoot:function(e){var n=api.env.which(lemon.getEnv());-10!=n.id&&(n=api.getServer(n.id));var t={api:lemon.getApi(),name:api.getAPI(lemon.getApi()).desc,serv:n,requ:lemon.json.reverse(api.requ()),resp:lemon.json.reverse(api.resp())};if(e)switch(t.share={type:parseInt(e)},lemon.isBlank(t.api)||(t.share.dapi=api.getAPI(t.api)),t.share.type){case 1:t.share.dapi=null;break;case 2:break;case 3:break;case 4:break;case 5:break;case 6:t.doi=t.resp,t.resp={}}return LZString.compressToEncodedURIComponent(lemon.json.reverse(t))},page:function(e){try{var n=e.split("/"),t=".navbar,#left_toolbar,#right_toolbar";switch(n[0]){case"api":var i=n[2].substring(19);api.apichg(i),api.hash.curHisId=parseInt(i),api.enable(t),$("#copy_url,#share_this").show();break;case"apid":var o=n[2].substring(19);api.apichg(lemon.format("api_{0}{1}",n[1],lemon.isBlank(o)?"":"_"+o)),api.enable(t),$("#copy_url,#share_this").show();break;case"note":if(!api.hash.localtrigger){note.open(),note.newNote(LZString.decompressFromEncodedURIComponent(n[2]));var a=$.parseJSON(LZString.decompressFromEncodedURIComponent(n[3]));lemon.isBlank(a)||(a.mode&&note.mode(a.mode,!0),a.th&&note.theme(a.th,!0),a.menu&&1==a.menu&&note.menuTgl(),a.viminsert&&1==a.viminsert&&note.handleFunc.editMode())}break;case"snap":var r=$.parseJSON(LZString.decompressFromEncodedURIComponent(n[2]));api.nav.title(r.api),api.requ(lemon.json(r.requ)),api.resp(lemon.json(r.resp)),lemon.setEnv(r.serv.interf);var s=api.env.which(r.serv.interf);-10==s.id&&(s=null),api.env.changeEnv(s||r.serv);var l=api.env.which(r.serv.interf).type.id;if(lemon.setApi(r.api),l>0&&api.env.dorender(l),api.chgJSONPView(),api.hash.localtrigger);else if(r.share)switch(api.hash.localtrigger=0,api.hash.capture=r,$("#copy_url,#share_this").hide(),api.hash.capture.share.type){case 1:api.disable(t);break;case 2:api.disable(t.replace(",#left_toolbar","")),api.disable($("#left_toolbar button").not("#api_define"));break;case 3:break;case 4:break;case 5:var p={profile:{version:0,lemon:7}};api.impexp.doimport(p),p.profile.lemon=8,api.impexp.doimport(p),p.profile.lemon=9,api.impexp.doimport(p);break;case 6:api.impexp.doimport(r.doi),r.resp={}}else api.disable(t);after.rich.fitSize(after.request),after.rich.fitSize(after.response);break;default:api.tip("Unknow action "+e)}}catch(c){api.tip("Unknow action "+e+" "+c.message)}}},nav:{render:function(){api.nav.navTitle(),$(".dropdown-toggle").dropdown(),$("#btn_request").click(function(){api.isServSupportJSONP()&&api.chkRequest()&&(api.progressHome(),api.resp(""),api.request(function(e){api.resp(lemon.json(e)),api.progressHomeEnd()},function(){api.progressHomeEnd()}))}),api.requestGetPost("#btn_request_post"),api.requestGetPost("#btn_request_get","get"),$("#btn_request_tab").click(function(){if(api.chkRequest()){var e=api.getCleanRequestData(),n=api.getRequestData(e),t=api.getCurrentAPI(e);lemon.store.set(api.uniqueId(),{api:t,when:lemon.when(),request:e,response:null,interf:lemon.getEnv(),name:api.getAPI(t).desc}),window.open(api.nav.getRequestURLwithParams(lemon.json.reverse(n),!0))}}),$("#as_default").click(function(){var e=api.getCleanRequestData(),n=api.getCurrentAPI(e);lemon.isBlank(n)||(api.defaultValue(n,e),api.inlineTip("#as_default"))});var e=api.nav.newModal({title:"Set Join Selection Separator",triggerId:"from_url_modal",content:function(){return['<div class="input-group input-group-lg">','<input type="text" id="input_sep" class="form-control" style="width:265px;" placeholder="Separator default is \',\'">',"</div>"].join("")},onHidden:function(){lemon.joinsep=$("#input_sep").val()}});api.nav.rightclick("#from_url",function(){lemon.delay(function(){e.toggle()},100)}),$("#from_url").click(function(){if(after.styled&&after.request.somethingSelected()){var e=after.request.getSelection();if(!lemon.isBlank(e)){var n=[],t=null;lemon.each(e.split(/\s/),function(e,i){lemon.isBlank(t=lemon.trim(e))||n.push(t)})}return after.request.replaceSelection(n.join(lemon.joinsep||",")),!1}var i=api.requ(),o=api.decode(i,2);i!=o&&api.requ(api.decode(i,2));var i=api.strAsJSON(i);i.url&&(lemon.setEnv(i.url),api.env.change(i.url)),api.requ(lemon.json(i.param));var a=null;if(lemon.isBlank(i.url));else{var r=api.env.which(i.url);if(-10==r.id);else{var s=r.request;s&&1==s.type&&(a=api.getRequestAPI(i.param[s.paramName]||{}),api.requ(lemon.json(i.param[s.paramName]))),api.env.render(r.type.id)}}if(lemon.isBlank(a)&&(a=api.getRequestAPI(i.param),!lemon.isBlank(a))){var l=api.getAPI(a);lemon.isBlank(l)||api.env.render(l.type.id)}lemon.setApi(a||null)}),$("#define_api").click(function(){var e=api.getRequestAPI(api.getCleanRequestData()||{});if(lemon.isBlank(e)){if(!lemon.isBlank(api.requ())){var n=api.env.which(lemon.getEnv());(n.id=-10)&&api.redefineAPI("new")}}else lemon.isBlank(api.getAPI(e))?api.redefineAPI("new"):api.redefineAPI(e,1)}),$("#share_this").click(function(){api.hash.snap(null,2)}),api.nav.rightclick("#share_this",function(){$("#share_this").popover("toggle")}),api.popover("#share_this",function(){return lemon.tmpl($("#share_opt_tmpl").html(),{})},{placement:"right",title:"Share...",trigger:"manual"}).on("inserted.bs.popover",function(){$(this).data("bs.popover").tip()}).on("show.bs.popover",function(){$(this).data("bs.popover").tip().css({border:0})}).on("shown.bs.popover",function(){$(this).data("bs.popover").tip();$("#share_option button[id^=share_]").click(function(){api.hash.snap(null,$(this).attr("stype")),$("#share_this").popover("hide")})}),api.popover("#snapshoot_share",function(){return'<div id="snap_qrcode"></div>'},{placement:"right"}).on("show.bs.popover",function(){$(this).data("bs.popover").tip().css({"min-width":288,height:278,border:0})}).on("shown.bs.popover",function(){try{$("#snap_qrcode").qrcode({width:256,height:256,text:api.requ()})}catch(e){$("#snapshoot_share").popover("hide");var n="Generate qrcode fail "+e.message;lemon.warn(n),api.tip(n)}}),api.description("#api_define"),api.popover("#copy_url",function(){var e=api.nav.humanreadRequest(),n=80,t=document.body.clientWidth/2,i=['<textarea id="request_url" style="border:0px solid #ffffff;height:'+n+"px;width:"+t+'px">'+e+"</textarea>"].join("");return i},{title:["Request URL",'<div class="pull-right">','<span class="glyphicon glyphicon-pencil" title="encodeURIComponent" onclick="api.nav.copyEncodeUrl(this);"></span>',"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",'<button type="button" class="close" aria-label="Close" onclick="javascript:$(\'#copy_url\').click();">','<span aria-hidden="true">&times;</span></button>',"</div>"].join(""),placement:"top"}).on("show.bs.popover",function(){$(this).data("bs.popover").tip().css({border:0,maxWidth:document.body.clientWidth/2+200})}).on("shown.bs.popover",function(){$("#request_url").focus(function(){var e=$(this);e.select(),e.mouseup(function(){return e.unbind("mouseup"),!1})})}),$(".navbar-brand").click(function(){api.typeSearch(7)}),$("#input_search").click(function(){$("#btn_search").hasClass("active")&&$("#btn_search").click()}),$("#input_search").keypress(function(e){e.ctrlKey&&13==e.which||10==e.which||e.shiftKey&&13==e.which||10==e.which||"13"==e.keyCode&&(e.preventDefault(),$("#btn_search").click())}),api.advqry.intl({triggerId:"#btn_advance",container:"advance_qry",title:"Advance Search",inserted:function(e){var e=$(e).data("bs.popover").tip();e.find(".arrow").remove(),e.hide()},hidden:function(e){api.enable("#group_search,#btn_search")},shown:function(e){$("#btn_search").hasClass("active")&&$("#btn_search").click();var e=$(e).data("bs.popover").tip(),n=$("#input_search").offset(),t=$("#input_search").height();e.css({left:n.left-150,top:n.top+t}),api.disable("#group_search,#btn_search");var i=["<h4></h4>",'<p class="pull-right" style="margin-right:13px;">','<button type="button" onclick="api.advqry.search(\'#advance_qry\',\'#btn_advance\');" class="btn btn-primary">','<span class="glyphicon glyphicon-search" title="Search"></span> Search</button></p>',"<h4></h4>"].join("");$("#advance_qry").after(i),api.advqry.fill("advance_qry"),e.show()}}),api.popoverOnBtn("#btn_search",function(){lemon.notes=[],lemon.defaults=[],lemon.tags=[],lemon.descs=[],lemon.nextHis=null,lemon.searchconds=null,lemon.skeys=[],api.progressHome(),api.previousInterval={when:"",batch:0};var e=lemon.trim($("#input_search").val()),n=1,t="";if(!lemon.isBlank(e))if(n=2,lemon.startWith(e,"/l")||lemon.startWith(e,"/r"))n=8;else if(e.indexOf("|")>0)n=8;else if(e.indexOf("&")>0)n=9;else if(e.indexOf(":")>0){n=3;var i=e.split(":");t=i[0],e=i[1],"TAG"==t&&(n=4)}else"FAV"==e?n=5:"ALL"==e?n=6:"SETTING"==e?n=7:"MUTATION"==e?n=11:"BLANK"==e&&(n=15);lemon.searchType=n;var o=new RegExp(e),a={},r={},s=!1;switch(n){case 1:case 2:case 3:var l=3==n,p=1==n,c=api.preference.defines().items.sort(function(e,n){return e.type.id-n.type.id});if(lemon.each(api.apiMutation(),function(e,n){lemon.each(e,function(e,n){var i=api.nav.makeApi(e);l?o.test(lemon.json.get(e.request,t))&&(a["api_"+e.api+"_"+n]=i):(p||o.test(e.api)||o.test(e.note)||o.test(e.desc))&&(a["api_"+e.api+"_"+n]=i)})}),lemon.each(c,function(e,n){var i=api.nav.makeApi(e);l?o.test(lemon.json.get(e.request,t))&&(a["api_"+e.api]=i):(p||o.test(e.api)||o.test(e.desc))&&(a["api_"+e.api]=i)}),!p){s=!0;var d=[];if(l?d.push({type:"both",prop:t,match:o}):(d.push({type:"self",prop:"api",match:o}),d.push({type:"self",prop:"name",match:o}),d.push({type:"cust",prop:"note",match:o})),lemon.searchconds={opt:1,exp:d},lemon.isBlank(a)){var u=api.queryNextHis(lemon.searchconds);u.realSize>0&&(lemon.searchconds.now=!0,r=u.items),s=!1}lemon.skeys.push(e)}break;case 8:case 9:lemon.searchconds=api.getSearchConds(e,function(e){lemon.skeys.push(e)});var u=api.queryNextHis(lemon.searchconds);u.realSize>0&&(lemon.searchconds.now=!0,r=u.items),s=!1;break;case 4:lemon.each(api.tag(),function(n,t){if(lemon.isBlank(e))lemon.each(api.customHis(),function(e,n){var t=e.tag||[];if(t.length>0){var i=lemon.store(n);i&&i.request&&(r[n]=api.nav.makeHis(i))}});else if(lemon.skeys.push(e),o.test(decodeURI(n.name))){var i=parseInt(n.id);lemon.each(api.customHis(),function(e,n){var t=e.tag||[];if(-1!=t.indexOf(i)){var o=lemon.store(n);o&&o.request&&(r[n]=api.nav.makeHis(o))}})}});break;case 5:lemon.each(api.customHis(),function(e,n){e.fav&&1==e.fav&&(r[n]=api.nav.makeHis(lemon.store(n)))});break;case 6:lemon.store.forEach(function(e,n){n&&!lemon.isBlank(n.request)&&(r[e]=api.nav.makeHis(n))});break;case 11:lemon.each(api.apiMutation(),function(e,n){lemon.each(e,function(e,n){var t=api.nav.makeApi(e);a["api_"+e.api+"_"+n]=t})});break;case 7:return lemon.tmpl($("#setting_tmpl").html(),{});case 15:return lemon.tmpl($("#blank_tmpl").html(),{id:"blank_popup"})}return lemon.tmpl($("#table_tmpl").html(),{histories:r,apis:a,showHisBtn:s,theHisTrs:api.getTrHis(1,r)})},{title:"",trigger:"click"},function(e){switch($("#btn_history").hasClass("active")&&$("#btn_history").click(),lemon.searchconds&&lemon.searchconds.now&&($("#btn_search").data("bs.popover").tip().find("div .panel-body").attr({id:"scroll_search_body"}),api.scroll("#scroll_search_body",function(){api.progressHome();var e=api.queryNextHis(lemon.searchconds);$("#his_body").append(api.getQueryTrHis(e.items,lemon.nextHis.intlNo)),api.progressHomeEnd()})),api.matchSearch(),lemon.searchType){case 1:case 2:case 3:case 11:$("#btn_show_match_his").click(function(){$(this).button("loading"),api.showMatchedHistories(lemon.searchconds),api.matchSearch(),api.historyCtl(),$(this).slideToggle()}),$("#btn_tgl_apirequ").click(function(){$(this).button("toggle"),$('pre[tgl-apirequ="tgl"]').fadeToggle("slow","linear")}),$("#btn_tgl_apiresp").click(function(){$(this).button("toggle"),$('pre[tgl-apiresp="tgl"]').fadeToggle("slow","linear")}),$("#btn_tgl_interf").click(function(){$(this).button("toggle"),lemon.each(api.preference.interf(),function(e,n){api.interfType(e.id)})});break;case 15:break;case 7:$(e).data("bs.popover").tip().css({left:0}),$("#export_option button[id^=exp_]").click(function(){api.nav.check("#"+$(this).attr("id"),1)}),$("#imp_file").change(function(e){api.file.handle(this,e,{onLoadStart:function(e,n){$("#btn_imp").button("loading"),api.progressHome()},onLoadEnd:function(e,n){api.impexp.doimport(n.reader.result,!0),api.progressHomeEnd(),$("#btn_imp").button("reset"),$("#imp_file").val("")}})}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var n=e.target,t=e.relatedTarget;api.preference.tab={current:n,previous:t};var i=$(n).attr("href");if("#basic"==i)api.mirrorVal("#p_interf",api.preference.interf()),api.mirrorVal("#p_env",api.preference.env()),api.mirrorVal("#p_config",api.preference.basic());else if("#export_tab"==i);else if("#import_tab"==i);else if("#server"==i){var o=lemon.tmpl($("#setting_server_tmpl").html(),{});$("#server").empty().append(o),$("#server .thumbnail").hover(function(){$(this).css({"background-color":"#fafafa"})},function(){$(this).css({"background-color":""})}),lemon.prevDefineServId=null,api.mirrorVal("#ss_server",{id:"",interf:"",note:""},{width:580,height:172,valchange:function(e){try{var n=$.parseJSON(e.getValue()),t=lemon.isString(n.id),i=parseInt(n.id);if(i&&i>0){var o=e.getCursor();i!=lemon.prevDefineServId&&(lemon.prevDefineServId=i,n=api.getServer(i),t&&(o.ch=o.ch-1),lemon.isBlank(n)?(n={id:i,interf:"",note:""},e.setValue(lemon.json(n))):api.preference.showServer(n)),e.setCursor(o)}}catch(a){}}}),$("#ss_default").click(function(){api.nav.check("#ss_default",1)}),$("#p_server_right .thumbnail").click(function(){var e=parseInt($(this).attr("tid")),n=api.getServer(e);api.preference.showServer(n)})}else if("#theapic"==i){var a=lemon.tmpl($("#setting_apic_tmpl").html(),{});$("#theapic").empty().append(a).show(),$("#sa_interf").change(function(){api.preference.apicEnvRender()});var r=null;if(lemon.apicedit)if("new"==lemon.apicedit)r={api:"",desc:"",note:"",request:api.getCleanRequestData()};else{var s=lemon.apicedit.split("_");lemon.apicedit=s[0],2==s.length?(r=lemon.clone(api.apiMutation(lemon.apicedit,s[1])),api.mutation(2)):1==s.length&&(r=lemon.clone(api.getAPI(lemon.apicedit)),1==lemon.apiceditfrom&&(r.request=lemon.extend(r.request,api.getCleanRequestData()))),r.type&&(lemon.fillParam("#p_apic_left",{apiTypeId:r.type.id}),delete r.type)}api.preference.apicEnvRender(),lemon.prevDefineId=lemon.apicedit,api.mirrorVal("#sa_apic",r||{api:"",desc:"",note:"",request:""},{lineNumbers:!0,height:436,width:796,valchange:function(e){try{var n=$.parseJSON(e.getValue()),t=n.api;if(t&&t.length>0){t!=lemon.prevDefineId&&(lemon.prevDefineId=t,n=lemon.clone(api.getAPI(t)),lemon.isBlank(n)?n={api:t,desc:"",note:"",request:""}:(lemon.fillParam("#p_apic_left",{apiTypeId:n.type.id}),delete n.type));var i=e.getCursor();e.setValue(lemon.json(n)),e.setCursor(i),after.rich.chgFontSize(e,15)}}catch(o){}}}),after.rich.chgFontSize(lemon.mirror.sa_apic,15),r&&r.defserv&&r.defserv>0&&api.preference.apicEnvClick(api.getServer(r.defserv))}}).on("hide.bs.tab",function(e){return api.preference.saveBasic()?void 0:!1}),""==api.preference.tab.current&&$("#theapic-tab").click()}api.progressHomeEnd()},function(e){switch(lemon.searchType){case 7:lemon.mirror={},api.preference.tab={current:"",previous:""}}}),$("#btn_note").click(function(){note.open()}),$("#btn_note_diff").click(function(){$("#btn_note").click(),note.open(1)}),$("#btn_repl").click(function(){$(this).button("toggle");var e=$(this).hasClass("active");e?(api.repl.views||(api.repl.views=!0,$("#btn_resp").click()),$("#area_repl").show()):$("#area_repl").hide()}),$("#btn_his_prev, #btn_his_next").click(function(){var e=parseInt(lemon.store("last")||"0"),n=api.hash.curHisId||e,t=parseInt($(this).attr("step")),i=n+t;0>=i||i>e?api.tip("There is no "+(-1==t?"previous":"next")+" history."):api.hash.requ("history",i)});var n=function(e){var n="";n=after.styled&&after.response.somethingSelected()?after.response.getSelection():api.resp(),api.preview(n=n.replace(/\\"/g,"'"),e)};api.nav.rightclick("#btn_preview",function(){lemon.delay(function(){n(!0)},100)}),$("#btn_preview").click(function(){n()}),api.popoverOnBtn("#btn_history",function(){return lemon.notes=[],lemon.descs=[],lemon.tags=[],lemon.currentP=1,lemon.searchconds=null,api.progressHome(),api.previousInterval={when:"",batch:0},lemon.tmpl($("#table_tmpl").html(),{histories:1,apis:{},showHisBtn:!1,theHisTrs:api.getTrHis()})},{title:"",trigger:"click"},function(e){$("#btn_search").hasClass("active")&&$("#btn_search").click(),$(e).data("bs.popover").tip().find("div .panel-body").attr({id:"scroll_body"}),api.scroll("#scroll_body",function(){api.progressHome(),++lemon.currentP,$("#his_body").append(api.getTrHis()),api.tglhis("#btn_tgl_requ",'pre[tgl-requ="tgl"]'),api.tglhis("#btn_tgl_resp",'pre[tgl-resp="tgl"]'),api.doHisFilter(),api.progressHomeEnd()}),api.progressHomeEnd()}),$("#request,#response").css({border:"0px solid #ffffff"}),api.nav.dblclick("#request"),api.nav.dblclick("#response"),$("#request").change(function(){try{$(this).val(lemon.json($(this).val()))}catch(e){lemon.warn(e,"Can not parse JSON string.")}$("#request_url").text(api.nav.humanreadRequest())})},navTitle:function(){$(".navbar-brand").text(api.preference.basic().navTitle||"Manual API")},title:function(e){$("title").text(e||api.preference.basic().title||"API")},copyEncodeUrl:function(e){$("#request_url").length&&($(e).button("toggle"),$("#request_url").text(api.nav.humanreadRequest($(e).hasClass("active"))))},makeApi:function(e){return{name:e.api,desc:e.desc,note:e.note,type:api.getInterfGroup(e.type.id),when:"",request:e.request,response:e.response||"",interf:"",mutation:e.mutation||0}},makeHis:function(e){var n=e.api||api.getRequestAPI(e.request),t=e.name||(api.getAPI(n)||{desc:""}).desc;return{api:n,when:e.when,request:e.request,response:e.response,interf:e.interf,name:t}},check:function(e,n){switch(n=n||4){case 1:$(e).button("toggle");break;case 2:$(e).addClass("active");break;case 3:$(e).removeClass("active")}var t=$(e).hasClass("active");return 4==n?t?1:0:(t?$(e+" .glyphicon").removeClass("glyphicon-unchecked").addClass("glyphicon-check"):$(e+" .glyphicon").removeClass("glyphicon-check").addClass("glyphicon-unchecked"),t?1:0)},newModal:function(e){e=lemon.extend({title:"",content:"",triggerId:"",modalDialogClass:"modal-sm",onShow:null,onShown:null,onHide:null,onHidden:null,onLoaded:null},e||{}),$("body").append(lemon.tmpl($("#modal_tmpl").html(),e));var n="#"+e.triggerId;return api.nav.disableRightclick(n),$(n).on("show.bs.modal",function(t){lemon.isFunc(e.onShow)&&e.onShow(n)}).on("shown.bs.modal",function(t){lemon.isFunc(e.onShown)&&e.onShown(n)}).on("hide.bs.modal",function(t){lemon.isFunc(e.onHide)&&e.onHide(n)}).on("hidden.bs.modal",function(t){lemon.isFunc(e.onHidden)&&e.onHidden(n)}).on("loaded.bs.modal",function(t){lemon.isFunc(e.onLoaded)&&e.onLoaded(n)}),{mid:n,show:function(){$(n).modal("show")},hide:function(){$(n).modal("hide")},handleUpdate:function(){$(n).modal("handleUpdate")},toggle:function(){$(n).modal("toggle")},options:function(e){$(n).modal(lemon.extend({backdrop:!0,keyboard:!0,show:!0},e||{}))}}},disableRightclick:function(e){$(e).bind("contextmenu",function(){return!1})},rightclick:function(e,n){api.nav.disableRightclick(e),$(e).mousedown(function(t){3==t.which&&(t.stopPropagation(),t.preventDefault(),lemon.isFunc(n)&&n(e,t))})},dblclick:function(e){api.nav.disableRightclick(e),api.nav.rightclick(e,function(e){lemon.endWith(e,"_view")?api.nav.edit(e):api.nav.view(e)})},humanreadRequest:function(e){var n=api.getCleanRequestData(),t=api.getRequestData(n);t=lemon.json.reverse(t);var i=api.nav.getRequestURLwithParams(t,e);return lemon.info(i,"Request URL"),i},getRequestURLwithParams:function(e,n){var t=api.env.which(lemon.getEnv()),i=t.request||api.preference.basic().request;switch(-10==t.id&&(i.type=2),i.type){case 1:return n&&(e=encodeURIComponent(e)),lemon.format("{0}?{1}={2}",lemon.getEnv(),i.paramName,e);case 2:if(e=$.parseJSON(e),n)return lemon.getUrl(lemon.getEnv(),e);var o=[];return lemon.each(e,function(e,n){o.push(n+"="+e)}),lemon.format("{0}?{1}",lemon.getEnv(),o.join("&"))}},textarea:function(e,n){api.popover(e,function(){return['<div class="btn-group btn-group-xs" role="group">','<button type="button" class="btn btn-default" ',"onclick=\"api.nav.edit('"+e+"');\">&nbsp;&nbsp;&nbsp;edit&nbsp;&nbsp;&nbsp;</button>",'<button type="button" class="btn btn-default" ',"onclick=\"api.nav.view('"+e+"');\">&nbsp;&nbsp;&nbsp;view&nbsp;&nbsp;&nbsp;</button>","</div>"].join("")},lemon.extend({trigger:"focus",placement:"bottom"},n||{})).on("shown.bs.popover",function(){var n=$(e).parent();n.children(".popover").children(".arrow").removeClass("arrow"),n.children(".popover").css({top:"-10px"})})},edit:function(e){lemon.endWith(e,"_view")&&($(e).popover("destroy").remove(),$(lemon.rtrim(e,"_view")).show())},view:function(e,n){if(!lemon.endWith(e,"_view")){var t=e+"_view";n&&$(t).remove();var i=$(e).val();if(lemon.isBlank(i)){if(!n)return}else try{JSON.parse(i)}catch(o){return void lemon.warn(o,"Can not parse JSON string")}var a=12,r=$(e).height()-a,s=$(e).width();$(e).hide();var l=r-5,p=['<div class="panel panel-default" id="'+lemon.ltrim(t,"#")+'" style="margin-bottom:0px;height:'+l+"px;width:"+s+'px;border:0px solid #ffffff;">','<div class="panel-body" style="padding:0px;"><pre style="border:0px solid #ffffff;background-color:#ffffff;height:'+(l-22)+'px;">',lemon.json.highlight(i),"</pre></div></div>"].join("");$(e).parent().append(p),after.styled||api.nav.dblclick(t,{trigger:"click"})}}},decode:function(e,n){if(!lemon.isString(e))return e;if(n=n||1,1==n||3==n)try{e=decodeURI(e)}catch(t){lemon.info(e,"decode"),lemon.warn(t,"decodeURI")}if(2==n||3==n)try{e=decodeURIComponent(e)}catch(t){lemon.info(e,"decode"),lemon.warn(t,"decodeURIComponent")}return e},decodeJson:function(e){if(!lemon.isJson(e))return e;var n={};return lemon.each(e,function(e,t){n[api.decode(t,3)]=api.decode(e,3)}),n},strAsJSON:function(e){if(!lemon.isString(e))return e;var n={url:null,param:{}};e=e.replace(/\n/g,"");var t=e.indexOf("?");-1!=t&&(n.url=e.substr(0,t),e=e.substring(t+1)),e=api.decode(e);for(var i=!0,o=0;o<api.analyze.length;o++){var a=api.analyze[o],r={};if(-1!=e.indexOf(a.sep)&&-1!=e.indexOf(a.subsep)){if(1==a.id){var s=e.indexOf("{"),l=e.lastIndexOf("}");s>=0&&l>=0&&(e=e.substring(s,l+1));try{r=$.parseJSON(lemon.endIf(lemon.startIf(e,"{"),"}")),i=!1;break}catch(p){lemon.warn(p,"Invalid request JSON data")}}try{if(lemon.each(e.split(a.sep),function(e,n){var t=e.split(a.subsep);r[t[0]]=t[1]}),!lemon.isBlank(r)){i=!1;break}}catch(c){lemon.warn(c,"Invalid request data")}}}if(i)try{r={};var d=null;if(-1!=e.indexOf(d="=")||-1!=e.indexOf(d=":")){var u=e.split(d);r[u[0]]=u[1]}}catch(c){}n.param=r;var m={};return lemon.each(r,function(e,n){var t=api.decode(e,2);if(lemon.isString(t)){var i=t.indexOf("{"),o=t.lastIndexOf("}");i>=0&&o>=0&&(t=api.strAsJSON(t).param)}m[api.decode(n,2)]=t}),n.param=m,n},preview:function(e,n){var t="";n?(t="#blank_modal",api.mod.blank()):(t="#blank_popup",api.typeSearch(15));var i=lemon.iframe({frameborder:0},t);n?i.attr({width:$(root).width(),height:$(root).height()-3,style:"background-color: white"}):i.fit(t),lemon.isUrl(e)?i.openUrl(e):(i.write(e),n&&i.doc.keydown(function(e){27==e.keyCode&&api.mod.blank()})),api.viewer=i},typeSearch:function(e,n){var t="";switch(e){case 1:break;case 4:t="TAG:";break;case 5:t="FAV";break;case 6:t="ALL";break;case 7:t="SETTING";break;case 11:t="MUTATION";break;case 15:t="BLANK";break;case 100:t=n||"";break;case 12:return void $("#btn_advance").click()}switch($("#input_search").val(t),4!=e&&$("#btn_search").click(),e){case 5:case 6:case 7:case 11:case 15:$("#input_search").val("")}},scroll:function(e,n){var t=0;lemon.scrollNext=!1,$(e).scroll(function(){var e=($(this),$(this).height()),i=$(this).get(0).scrollHeight,o=$(this).scrollTop();(lemon.scrollNext||t!=i&&o/(i-e)>=.95)&&(lemon.scrollNext=!1,t=i,lemon.isFunc(n)&&n())})},description:function(e,n,t,i,o){api.popover(e,function(){var e=n||api.getRequestAPI(api.getCleanRequestData())||"",t=lemon.clone(api.getAPI(e)),i=t.note;delete t.note;var o=lemon.json.highlight(t),a=document.body.clientHeight-50,r=document.body.clientWidth/2;return['<div style="max-height:'+a+'px;overflow-y: scroll;">',api.showNote(i),'<pre style="width:620px;max-width:'+r+"px;max-height:"+(a-5)+'px;border:0;background-color:#ffffff;">'+o+"</pre>","</div>"].join("")},lemon.extend({placement:"right",title:"API Description"},o||{})).on("show.bs.popover",function(){$(this).data("bs.popover").tip().css({border:0,maxWidth:document.body.clientWidth/2+200})}).on("shown.bs.popover",function(){lemon.isFunc(t)&&t()}).on("hidden.bs.popover",function(){lemon.isFunc(i)&&i()})},showResponse:function(e,n){return lemon.isBlank(e)?"":['<pre title="Property Description" style="background-color:#ffffff;border:0px;" tgl-apiresp="tgl">','<p class="pull-right text-muted">Response</p>',lemon.json.highlight(e),"</pre>"].join("")},showNote:function(e){if(lemon.isBlank(e))return"";if(!lemon.isBlank(e)){if(lemon.isFunc(e))return e();if(lemon.isArray(e)){var n=['<ul class="list-group">'];return lemon.each(e,function(e,t){n.push('<li class="list-group-item"><h6 class="text-muted">'+e+"</h6></li>")}),n.push("</ul>"),n.join("")}return lemon.isJson(e)?'<pre title="Property Description" style="border:0px;">'+lemon.json.highlight(e)+"</pre>":'<div class="panel panel-default"><div class="panel-body"><h6 class="text-muted">'+e+"</h6></div></div>"}},historySortDesc:function(e){var n=[];return lemon.each(e,function(e,t){e&&!lemon.isBlank(e.request)&&(e.k=t,e.api=e.api||api.getRequestAPI(e.request),n.push(e))}),n.sort(function(e,n){return n.k-e.k})},getTrHis:function(e,n){e=e||lemon.currentP;var n=n||api.getHistories(e),t=(e-1)*api.preference.basic().history.pageSize+1;return lemon.tmpl($("#his_tr_tmpl").html(),{histories:n,intlNo:t})},getQueryTrHis:function(e,n){return lemon.tmpl($("#his_tr_tmpl").html(),{histories:e,intlNo:n})},matchSearch:function(){lemon.each(lemon.skeys,function(e,n){api.matched(e,"#r_search")})},showMatchedHistories:function(e,n,t){if(api.progressHome(),!$("#scroll_search_body").length){if($("#btn_search").data("bs.popover").tip().find("div .panel-body").attr({id:"scroll_search_body"}),!$("#his_table").length){var i={show:1},o=lemon.tmpl($("#table_tmpl").html(),{histories:i,apis:{},showHisBtn:!1,theHisTrs:""});$("#scroll_search_body").append($(o).find("#his_table").html()),$("#btn_search").data("bs.popover").tip().css({maxWidth:"100%"})}lemon.nextHis=null,api.scroll("#scroll_search_body",function(){api.progressHome();var n=api.queryNextHis(e);$("#his_body").append(api.getQueryTrHis(n.items,lemon.nextHis.intlNo)),api.matchSearch(),api.progressHomeEnd()})}var a=api.queryNextHis(e);$("#his_body").append(api.getQueryTrHis(a.items,lemon.nextHis.intlNo)),api.progressHomeEnd()},queryNextHis:function(e){if(lemon.isBlank(lemon.nextHis)?lemon.nextHis={lastId:null,intlNo:1,ps:null,rs:null,mayHasNext:!0}:lemon.nextHis.intlNo=lemon.nextHis.rs+lemon.nextHis.intlNo,lemon.nextHis.mayHasNext){var n=api.queryHistories(e,lemon.nextHis.ps,lemon.nextHis.lastId);return lemon.nextHis={lastId:n.lastId,ps:n.pageSize,rs:n.realSize,intlNo:lemon.nextHis.intlNo,mayHasNext:n.mayHasNext},n}return{}},queryHistories:function(e,n,t){var i=parseInt(lemon.store("last")||"0");t=t||i;var o={},n=n||api.preference.basic().searchPageSize,a=0,r=0;n=-1==n?t+1:n;for(var s=t;s>=0;s--){var l=lemon.store(s);if(l&&l.request){var p=[];lemon.each(e.exp,function(e,n){var t=!1;switch(e.type){case"requ":t=e.match.test(lemon.json.get(l.request,e.prop));break;case"resp":t=e.match.test(lemon.json.get(l.response,e.prop));break;case"both":t=e.match.test(lemon.json.get(l.request,e.prop))||e.match.test(lemon.json.get(l.response,e.prop));break;case"self":if("api"==e.prop||"name"==e.prop){var i=l.api||api.getRequestAPI(l.request);if("name"==e.prop){var o=l.name||(api.getAPI(i)||{desc:""}).desc;t=e.match.test(o)}else t=e.match.test(i)}else t=e.match.test(lemon.json.get(l,e.prop));break;case"cust":t=e.match.test(api.customHis(s,e.prop))}p.push(t?!0:!1)});for(var c=p[0],d=1;d<p.length;d++)if(1==e.opt){if(c=c||p[d])break}else if(2==e.opt&&(c=c&&p[d],!c))break;if(++r,c&&(o[s]=api.nav.makeHis(l),t=s,++a,a>=n))break}}var u=lemon.isBlank(o)?!1:n>a?!1:!0;return{lastId:u?t-1:null,mayHasNext:u,pageSize:n,realSize:a,items:o}},getHistories:function(e,n){for(var t=parseInt(lemon.store("last")||"0"),i={},n=n||api.preference.basic().history.pageSize,e=e||1,o=(e-1)*n,a=t-o,r=0;n>r;r++){var s=a-r,l=lemon.store(s);l&&l.request&&(i[s]=api.nav.makeHis(l))}return i},inlineTip:function(e,n,t){var i=e+" .inlinetip",o="BUTTON"==$(e).get(0).tagName;$(i).length||$(e).append('<span class="inlinetip"></span>'),o&&$(e).attr({disabled:"disabled"}).addClass("disabled"),$(i).html(n||" done!"),lemon.delay(function(){$(i).empty(),$(e).removeAttr("disabled").removeClass("disabled")},t||1500)},elhistag:function(e,n,t){return'<span id="t_'+e+"_"+n+'">&nbsp;<span class="label label-success"> '+t+" </span></span>"},onhistag:function(e,n){var t="#tag_his_"+e+"_"+n,i=api.customHis(e,"tag")||[];-1==i.indexOf(n)?(i.push(n),$(t).addClass("active"),$("#tag_area_"+e).append(api.elhistag(e,n,$(t).text())),$("#"+e).attr("tag"+n,n)):(lemon.rmByVal(i,n),$(t).removeClass("active"),$("#t_"+e+"_"+n).remove(),$("#"+e).removeAttr("tag"+n).hide()),api.customHis(e,"tag",i)},mutation:function(e){return api.nav.check("#btn_mutation",e)},defineMutation:function(e){var n="";try{n="Define API Mutation";var t=$.parseJSON(api.mirrorVal("#sa_apic"));if(api.mutation(1)){var i=$("#btn_mutation").data("mutateId");i=i?i:api.autoId(),$("#btn_mutation").data("mutateId",i),t.mutation=i}else delete t.mutation;api.mirrorVal("#sa_apic",t)}catch(o){api.preference.tip(n," invalid JSON value, "+o.message)}},apiMutation:function(e,n,t){var i="mutation",o=lemon.store(i)||{};if(lemon.isUndefined(e))return o;var a=o[e]||{};if(lemon.isUndefined(n))return a;var r=a[n]||{};return lemon.isBlank(t)?r:(lemon.isBlank(r)||(t=lemon.extend(r,t)),a[n]=t,lemon.has(t,"delete")&&1==t["delete"]?(delete a[n],o[e]=a,lemon.store(i,o),t):(o[e]=a,lemon.store(i,o),t))},tag:function(e,n){var t="definedTag",i=lemon.store(t)||{};if(lemon.isUndefined(e))return i;var o=i[e]||{};if(lemon.isUndefined(n))return lemon.isBlank(o)?o:(o.name=decodeURI(o.name),o);var a=1,r=encodeURI(n);return-1==n?(delete i[e],lemon.store(t,i),o):(lemon.each(i,function(e,n){r==e.name&&(a=2,o=e)}),1==a?(i[e]={id:e,name:r},lemon.store(t,i),{id:e,name:n}):(o.exists=!0,o))},defaultValue:function(e,n){var t="defaultApiVal",i=lemon.store(t)||{};if(lemon.isUndefined(e))return i;i[e]||{};return lemon.isUndefined(n)?i[e]:(i[e]=n,lemon.store(t,i),i[e])},customHis:function(e,n,t,i){var o="definehis",a=lemon.store(o)||{};if(lemon.isUndefined(e))return a;var r=a[e]||{};if(lemon.isUndefined(n))return r;if(lemon.isUndefined(t))return r[n];if(-1==t){if(lemon.isUndefined(i))return delete r[n], lemon.store(o,a),r;var s=r[n];return lemon.isBlank(s)?s:lemon.isArray(s)?(s=lemon.rmByVal(s,i),lemon.store(o,a),s):(delete s[i],lemon.store(o,a),s)}return r[n]=t,a[e]=r,lemon.store(o,a),a[e]},resetDefaultVal:function(e){var n=$(e).attr("tapi");after.styled&&after[n]&&after[n].setValue(lemon.json(api.getAPI(n).request||{}))},setAPIDefaultValClose:function(e){$("#set_default_"+e).popover("hide")},setAPIDefaultVal:function(e){var n="#set_default_"+e,t=[e+" Default Value",'<div class="pull-right">','<span class="glyphicon glyphicon-refresh" title="Reset API Defaut Value" onclick="api.resetDefaultVal(this);" tapi="'+e+'"></span>',"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",'<button type="button" class="close" aria-label="Close" onclick="api.setAPIDefaultValClose(\''+e+"');\">",'<span aria-hidden="true">&times;</span></button>',"</div>"].join("");-1==lemon.defaults.indexOf(e)&&(api.popover(n,function(){var n=lemon.json(api.getAPIDefaultVal(e,api.getAPI(e).request));return'<textarea id="api_default_edit_'+e+'" style="height:300px;width:500px;border:0px solid #ffffff;">'+n+"</textarea>"},{title:t,placement:"left"}).on("shown.bs.popover",function(){after.styled&&(after[e]=after.mirror("#api_default_edit_"+e,{width:500,height:305}))}).on("show.bs.popover",function(){$(this).data("bs.popover").tip().css({border:0,maxWidth:document.body.clientWidth/2+200}),$(n).addClass("active")}).on("hidden.bs.popover",function(){$(n).removeClass("active")}).on("hide.bs.popover",function(){var n=$("#api_default_edit_"+e).val();if(after.styled&&(n=after[e].getValue(),after[e]=null),!lemon.isBlank(n))try{n=$.parseJSON(n||{}),api.defaultValue(e,n)}catch(t){}}),lemon.defaults.push(e),$(n).popover("show"))},itemTag:function(e,n){var t="#tags_"+e,i=['Tags <span class="badge">'+n+"</span>",'<div class="pull-right">','<button type="button" class="close" aria-label="Close" onclick="api.itemTagClose('+e+');">','<span aria-hidden="true">&times;</span></button>',"</div>"].join("");-1==lemon.tags.indexOf(e)&&(api.popover(t,function(){var n=['<div style="height:300px;width:500px;overflow-y:auto;">'],t=api.customHis(e,"tag")||[],i=api.tag();return lemon.each(i,function(i,o){var a=decodeURI(i.name),r=[' <button type="button" onclick="api.onhistag('+e+","+i.id+');"',' class="btn btn-default '+(t.indexOf(i.id)>-1?"active":"")+'" style="margin-top:5px;" ',' id="tag_his_'+e+"_"+i.id+'"> '+a+" </button> "].join("");n.push(r)}),lemon.isBlank(i)?'<div style="width:500px" class="alert alert-info" role="alert">No tag defined.</div>':(n.push("</div>"),n.join(""))},{title:i,placement:"left"}).on("show.bs.popover",function(){$(this).data("bs.popover").tip().css({border:0,maxWidth:document.body.clientWidth/2+200})}).on("shown.bs.popover",function(){$(t).addClass("active")}).on("hidden.bs.popover",function(){$(t).removeClass("active")}).on("hide.bs.popover",function(){}),lemon.tags.push(e),$(t).popover("show"))},itemTagClose:function(e){$("#tags_"+e).popover("hide")},redefineEnvInterfG:function(e){$("#basic-tab").click();var n=null;switch(e){case 1:n="#basic .panel:eq(1)";break;case 2:n="#basic .panel:eq(0)"}lemon.delay(function(){api.attention(n)},1e3)},redefineAPI:function(e,n){lemon.apicedit=e.replace("api_",""),lemon.apiceditfrom=n||0,$("#btn_search").hasClass("active")&&$("#btn_search").click(),api.typeSearch(7)},hisTglRequResp:function(e,n){switch(n){case 1:n="requ";break;case 2:n="resp";break;case 3:n="apirequ";break;case 4:n="apiresp"}var t=lemon.format("#his_tgl_{0}_{1}",n,e);$(t).button("toggle"),$(lemon.format('#{0} pre[tgl-{1}="tgl"]',e,n)).fadeToggle("slow","linear")},historyAPIDesc:function(e,n){var t="#desc_"+e;-1==lemon.descs.indexOf(e)&&(api.description(t,n,function(){$(t).addClass("active")},function(){$(t).removeClass("active")},{placement:"left"}),lemon.descs.push(e),$(t).popover("show"))},pencil:function(e,n){var t="#pencil_"+e,i=['Note <span class="badge">'+n+"</span>",'<div class="pull-right">','<span class="glyphicon glyphicon-trash" title="Clean Note" onclick="api.pencilClose('+e+', 1);"></span>',"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;",'<button type="button" class="close" aria-label="Close" onclick="api.pencilClose('+e+');">','<span aria-hidden="true">&times;</span></button>',"</div>"].join("");-1==lemon.notes.indexOf(e)&&(api.popover(t,function(){var n=['<textarea id="his_note_'+e+'" style="border:0px solid #ffffff;height:150px;width:500px"></textarea>'].join("");return n},{title:i,placement:"left"}).on("show.bs.popover",function(){$(this).data("bs.popover").tip().css({border:0,maxWidth:document.body.clientWidth/2+200})}).on("shown.bs.popover",function(){$(t).addClass("active");var n=api.customHis(e,"note")||"";$("#his_note_"+e).val(n)}).on("hidden.bs.popover",function(){$(t).removeClass("active")}).on("hide.bs.popover",function(){var n=$("#his_note_"+e).val()||"";api.customHis(e,"note",n);var t="#show_note_"+e;lemon.isBlank(n)?$(t).empty():$(t).html('<div class="alert alert-warning" role="alert" style="font-size:75%;">'+n+"</div>")}),lemon.notes.push(e),$(t).popover("show"))},pencilClose:function(e,n){$("#pencil_"+e).popover("hide"),1==n&&(api.customHis(e,"note",""),$("#show_note_"+e).empty())},favourite:function(e,n){var t=$(e).children("span"),i=$("#prop_filter_1").hasClass("active");t.hasClass("glyphicon-star")?(t.removeClass("glyphicon-star"),t.addClass("glyphicon-star-empty"),api.customHis(n,"fav",0),i&&$("#"+n).attr({prop:0}).fadeToggle("slow","linear")):(t.removeClass("glyphicon-star-empty"),t.addClass("glyphicon-star"),api.customHis(n,"fav",1),$("#"+n).attr({prop:1}))},tglhis:function(e,n){var t=$(e).hasClass("active");t?$(n).hide("slow","linear"):$(n).show("slow","linear")},popoverOnBtn:function(e,n,t,i,o){api.popover(e,n,t).on("show.bs.popover",function(){$(this).data("bs.popover").tip().css({border:0,maxWidth:"100%"}),$(e).button("toggle")}).on("hide.bs.popover",function(){switch(lemon.searchType){case 7:if(!api.preference.saveBasic())return!1}$(e).button("toggle")}).on("hidden.bs.popover",function(){lemon.isFunc(o)&&o(this)}).on("shown.bs.popover",function(){lemon.isFunc(i)&&i(this),api.historyCtl()})},repl:{views:!1,intl:function(){var e=after.response.getWrapperElement(),n=$(e).position();n.width=$(e).width()+23,n.height=$(e).height()+26,api.popover("#btn_resp",function(){return['<div id="repl_view"></div>'].join("")},{placement:"bottom"}).on("inserted.bs.popover",function(){var e=$(this).data("bs.popover").tip();e.hide()}).on("hidden.bs.popover",function(){$("#btn_resp").button("toggle")}).on("show.bs.popover",function(){var e=$(this).data("bs.popover").tip();e.find(".arrow").remove()}).on("shown.bs.popover",function(){$("#btn_resp").button("toggle");var e=$(this).data("bs.popover").tip();e.css({top:n.top-5,left:n.left-15,"max-width":n.width,width:n.width,height:n.height,"max-height":n.height,border:0}),e.show(),lemon.isUndefined(console)||(root.repl=new Console(lemon.query("#repl_view"),{outputH:n.height-30}),repl.wrapLog(console),after.rich.mapkey(repl.input,{Tab:"autocomplete",Enter:function(e){var n=repl.input.getValue().trim();n&&repl.exec(n),after.rich.toLastLine(repl.output)}}),repl.input.focus())})}},advqry:{intl:function(e){var n=[e.title,'<div class="pull-right">','<button type="button" class="close" aria-label="Close" onclick="api.advqry.close(\''+e.triggerId+"');\">",'<span aria-hidden="true">&times;</span></button>',"</div>"].join("");api.popover(e.triggerId,function(){return lemon.tmpl($("#extract_base_tmpl").html(),{cid:e.container})},{title:n,placement:"bottom"}).on("inserted.bs.popover",function(){e.inserted&&e.inserted(this)}).on("hidden.bs.popover",function(){e.hidden&&e.hidden(this)}).on("show.bs.popover",function(){var n=$(this).data("bs.popover").tip(),t=$(root).width()/2-26;n.css({width:t,"max-width":t,border:0}),e.show&&e.show(this)}).on("shown.bs.popover",function(){e.shown&&e.shown(this)})},close:function(e){$(e).click()},fill:function(e){var n=$("#input_search").val(),t={};lemon.isBlank(n)?api.advqry.addCond(e):(-1!=n.indexOf("|")?t.symbol="|":-1!=n.indexOf("&")?t.symbol="&":t.symbol="&",lemon.each(n.split(t.symbol),function(n,i){var o=api.advqry.addCond(e),a="both",r="",s="",l=null,p=!1,c=!1,d=n,p=lemon.startWith(n,"/l."),c=lemon.startWith(n,"/r.");p?(a="requ",d=n.substring(3)):c&&(a="resp",d=n.substring(3)),l=d.split(":"),l.length>=2?(r=l[0],s=l[1]):s=l[0],t["op"+o]=a,t["key"+o]=r,t["val"+o]=s}),lemon.fillParam(e,t))},search:function(e,n){api.typeSearch(100,api.advqry.getKeys(e)),api.advqry.close(n)},getKeys:function(e){var n=lemon.getParam(e),t=[];return $(e+' div[ex="filter"]').each(function(e,i){var o=$(this).attr("idx"),a=n["op"+o],r=n["key"+o],s=n["val"+o],l="";if(!lemon.isBlank(a)&&!lemon.isBlank(r)&&!lemon.isBlank(s)){switch(l=r+":"+s,a){case"requ":l="/l."+l;break;case"resp":l="/r."+l;break;case"both":}t.push(l)}}),t.join(n.symbol)},getExtracts:function(e){var n={requ:{},resp:{}},t=lemon.getParam(e);return $(e+' div[ex="prop"]').each(function(e,i){var o=$(this).attr("idx");n[t["op"+o]][t["key"+o]]=t["val"+o]}),n},extract2note:function(e){if(!$(e).hasClass("disabled")){api.progressHome(),$(e).addClass("disabled");var n="#"+$(e).attr("cid"),t="#"+$(e).attr("pid"),i="",o=api.advqry.getKeys(t),a=lemon.searchconds?lemon.searchconds:api.getSearchConds(o),r=api.queryHistories(a,-1),s=api.advqry.getExtracts(n);if(lemon.isBlank(s.requ)&&lemon.isBlank(s.resp))i=lemon.json(r.items);else{var l={extracts:[]};lemon.each(r.items,function(e,n){var t={},i=null;lemon.each(s.requ,function(n,o){"all"==o?t.request=e.request:lemon.isBlank(i=lemon.json.get(e.request,o))||(t[n]=i)}),lemon.each(s.resp,function(n,o){"all"==o?t.response=e.response:lemon.isBlank(i=lemon.json.get(e.response,o))||(t[n]=i)}),lemon.isBlank(t)||l.extracts.push(t)}),l.summary={size:l.extracts.length,time:lemon.when(),filter:o},i=lemon.json(l)}note.open(),note.newNote(i),note.mode("json"),api.progressHomeEnd(),$(e).removeClass("disabled")}},chgProp:function(e){var n="#"+$(e).attr("id"),t=n.replace("_key_","_val_"),i=$(n).val();$(t).val(i.substring(i.lastIndexOf(".")+1))},addProp:function(e){var n=lemon.uniqueId(),t=lemon.tmpl($("#extract_prop_tmpl").html(),{index:n});return $("#"+e).append(t),n},remProp:function(e){$("#ex_prop_"+e).remove()},camera:function(e){$("#input_search").val(api.advqry.getKeys("#"+$(e).attr("cid")))},addCond:function(e){var n=lemon.uniqueId(),t=lemon.tmpl($("#extract_tmpl").html(),{index:n});return $("#"+e).append(t),n},remCond:function(e){$("#ex_filter_"+e).remove()}},historyCtl:function(){api.advqry.intl({triggerId:"#btn_extract",container:"his_extract",title:"Extract What You Need",shown:function(e){$("#btn_extract").button("toggle"),$("#btn_search").hasClass("active")&&api.advqry.fill("his_extract"),$("#his_extract").after(lemon.tmpl($("#extract_prop_base_tmpl").html(),{parentCid:"his_extract",cid:"his_extract_prop"}))},hidden:function(e){$("#btn_extract").button("toggle")}}),$("#btn_tgl_requ").click(function(){$(this).button("toggle"),lemon.scrollNext=!0,api.tglhis(this,'pre[tgl-requ="tgl"]')}),$("#btn_tgl_resp").click(function(){$(this).button("toggle"),lemon.scrollNext=!0,api.tglhis(this,'pre[tgl-resp="tgl"]')}),$("#btn_tgl_interval").click(function(){$(this).button("toggle");var e=$(this).hasClass("active");lemon.each(api.batches||[],function(n,t){var i=api.getHisFilterExp(),o="";o=lemon.isBlank(i)?'tr[batch="'+n+'"]':'tr[batch="'+n+'"]'+i,e?$(o).hide("slow","linear"):$(o).show("slow","linear")})}),$("#tag_edit").click(function(){var e=$("#tag_input"),n=e.attr("tagId"),t="",i=e.val();if(n&&!lemon.isBlank(i)){var o="#tag_filter_"+n;api.tag(n,i),$(o).text(i),t=" Edit Done!",$("span[id$="+n+"]").children("span").text(i)}else t=" None Exist Tag.";api.inlineTip("#tag_edit",t)}),$("#tag_add").click(function(){$(this).button("disable");var e=$("#tag_input"),n=$("#tag_group"),t=e.val();if(!lemon.isBlank(t)){var i=api.autoId(),o=api.tag(i,t),a="";if(o.exists)a=" Tag Exists.";else{var r=[' <button type="button" onclick="api.ontag('+i+');"',' class="btn btn-default btn-sm" style="margin-top:5px;" ',' id="tag_filter_'+i+'"> '+t+" </button> "].join("");n.append(r),e.attr({tagId:o.id}),a=" Add Done!"}api.inlineTip("#tag_add",a)}}),$("#tag_rem").click(function(){var e=$("#tag_input"),n=e.attr("tagId"),t="";if(n){var i="#tag_filter_"+n;api.tag(n,-1),$(i).remove(),e.removeAttr("tagId"),t=" Remove Done!",$("span[id$="+n+"]").remove(),$(lemon.format('[tag{0}="{0}"]',n)).removeAttr("tag"+n).hide(),api.filters.tag=lemon.rmByVal(api.filters.tag,parseInt(n)),api.doHisFilter()}else t=" None Exist Tag.";api.inlineTip("#tag_rem",t)}),api.filters={env:[],interf:[],prop:[],tag:[]},$('button[id^="env_filter_"],button[id^="filter_"],button[id^="prop_filter_"]').click(function(){var e=$(this).hasClass("active"),n=$(this).attr("id"),t=lemon.ltrim(n,"env_filter_|filter_|prop_filter_"),i=0,o="";if(lemon.startWith(n,"env_filter_")?(i=1,o='[env="{0}"]'):lemon.startWith(n,"filter_")?(i=2,o='[interf="{0}"]'):lemon.startWith(n,"prop_filter_")&&(i=3,o='[prop="{0}"]'),$(this).button("toggle"),e)switch(i){case 1:api.filters.env.pop();break;case 2:api.filters.interf.pop();break;case 3:api.filters.prop.pop()}else switch(i){case 1:api.filters.env.length>0&&$("#env_filter_"+api.filters.env.pop()).button("toggle"),api.filters.env.push(t);break;case 2:api.filters.interf.length>0&&$("#filter_"+api.filters.interf.pop()).button("toggle"),api.filters.interf.push(t);break;case 3:api.filters.interf.length>0&&$("#prop_filter_"+api.filters.prop.pop()).button("toggle"),api.filters.prop.push(t)}api.doHisFilter()})},getHisFilterExp:function(){var e=[api.filters.env.length>0?lemon.format('[env="{0}"]',api.filters.env[0]):"",api.filters.interf.length>0?lemon.format('[interf="{0}"]',api.filters.interf[0]):"",api.filters.prop.length>0?lemon.format('[prop="{0}"]',api.filters.prop[0]):""];return lemon.each(api.filters.tag,function(n,t){e.push(lemon.format("[tag{0}={0}]",n))}),e.join("")},doHisFilter:function(){var e=api.getHisFilterExp();$('tr[his="1"]').show(),lemon.isBlank(e)||$('tr[his="1"]:not('+e+")").hide()},ontag:function(e){var n="#tag_filter_"+e,t=api.tag(e),i=$("#tag_input");i.val(t.name).attr({tagId:t.id});var o=$(n).hasClass("active");o?api.filters.tag=lemon.rmByVal(api.filters.tag,e):api.filters.tag.push(e),$("#tag_filter_"+e).button("toggle"),api.doHisFilter()},popover:function(e,n,t){var i=['<div class="popover" role="tooltip">','<div class="arrow"></div>','<h3 class="popover-title"></h3>','<div class="popover-content"></div>',"</div>"].join(""),o="prevent_twice"+lemon.uniqueId();t=t||{title:null};var a=$(e).popover(lemon.extend({title:"",trigger:"click",content:n,template:i,placement:"bottom",html:!0},t||{},{title:t.title||'<div id="'+o+'">&nbsp;</div>'})).on("shown.bs.popover",function(){lemon.isBlank(t.title)&&$("#"+o).parent().hide()});return a},autoId:function(e){return e=e||"autoid",lemon.store.set(e,parseInt(lemon.store.get(e)||0)+1)},uniqueId:function(){var e=api.preference.basic().history.max,n=lemon.store.set("last",parseInt(lemon.store.get("last")||0)+1);return e>0&&n>=e&&lemon.store.forEach(function(t){n-e+1>=t&&lemon.store(t,null)}),n},chkRequest:function(){if(null==lemon.getEnv())return api.tip("Choose an environment first!"),!1;if(lemon.isBlank(api.requ()))return api.tip("Choose or define an API first!"),!1;if(api.env.isProduct()){var e=confirm("Are you sure?\nProduct Environment!");if(!e)return!1}return!0},getSearchConds:function(e,n){var t=[],i="|";-1!=e.indexOf("|")?i="|":-1!=e.indexOf("&")&&(i="&"),lemon.each(e.split(i),function(e,i){var o=e.split(":"),a={};a=lemon.startWith(o[0],"/l.")?{type:"requ",prop:o[0].replace("/l.",""),match:new RegExp(o[1])}:lemon.startWith(o[0],"/r.")?{type:"resp",prop:o[0].replace("/r.",""),match:new RegExp(o[1])}:{type:"both",prop:o[0],match:new RegExp(o[1])},t.push(a),lemon.isFunc(n)&&n(o[1])});var o="|"==i?1:2;return{opt:o,exp:t}},getCleanRequestData:function(e){var e=api.requ();if(lemon.isBlank(e))return lemon.warn(e,"request params is not valid."),{};try{return $.parseJSON(e||{})}catch(n){throw api.tip(lemon.asStr(n.message)),n}},getRequestData:function(e){e=lemon.clone(e||{});var n=api.env.which(lemon.getEnv());return lemon.isBlank(n.params)||lemon.extend(e,n.params),e},getHoverOrSelectItem:function(e){var n={};if(lemon.isUndefined(e))return n;if(lemon.startWith(e,"api_")){var t=e.split("_");n=2==t.length?api.getAPI(t[1]):lemon.endWith(t[2],"s")?api.getAPI(t[1]):api.apiMutation(t[1],t[2])}else n=lemon.store(e)||{};return n},getInterfGroup:function(e){var n={};return lemon.each(api.preference.interf(),function(t,i){return e==t.id?(n=t,!1):void 0}),n},getServer:function(e){var n={};return lemon.each(api.preference.service(),function(t,i){lemon.each(t.serv,function(i,o){return i.id===e?(n=i,n.env=t.env,n.desc=t.desc,n.type=api.getInterfGroup(i.type.id),n.request=i.request||api.preference.basic().request,!1):void 0})}),n},getAPI:function(e){if(!lemon.isBlank(api.hash.capture)&&!lemon.isBlank(api.hash.capture.share.dapi))return api.hash.capture.share.dapi;var n={};return lemon.each(api.preference.defines().items,function(t,i){return t.api===e?(n=t,n.type=api.getInterfGroup(t.type.id),!1):void 0}),n},getAPIDefaultVal:function(e,n){var t=api.defaultValue(e);return lemon.isBlank(t)?n:t},interval:function(e){var n=api.getHisFilterExp();lemon.isBlank(n)?$('tr[batch="'+e+'"]').fadeToggle("slow","linear"):$('tr[batch="'+e+'"]'+n).fadeToggle("slow","linear")},interfType:function(e){$('[type="'+e+'"]').fadeToggle("slow","linear")},onSelectSinleClick:function(e,n,t){var i=$(e).button("toggle").attr("clkey");api.hisTglRequResp(i,n||1),api.hisTglRequResp(i,t||2)},onSelect:function(e,n){var t=$(n).attr("ctype"),i=$(n).attr("rapi");switch(t){case"1":api.hash.requ(i,e);break;case"2":var o=e.split("_");2==o.length?api.hash.apid(o[1]):api.hash.apid(o[1],o[2])}},apichg:function(e){var n=api.getHoverOrSelectItem(e),t=null;if(!lemon.isBlank(n)){var i=0;if(lemon.startWith(e,"api_")){var o=e.split("_");t=o[1];var a={},r=!1;if(a=2==o.length?api.getAPIDefaultVal(t)||n.request||{}:(r=lemon.endWith(o[2],"s"))?api.getAPIDefaultVal(t)||n.request||{}:n.request,api.requ(lemon.json(a)),lemon.isBlank(n.response)||api.resp(lemon.json(n.response)),n.defserv&&n.defserv>0){var s=api.getServer(n.defserv);lemon.setEnv(s.interf),api.env.change(s.interf)}else if(r){var s=api.getServer(parseInt(lemon.rtrim(o[2],"s")));lemon.setEnv(s.interf),api.env.change(s.interf)}i=n.type.id,$("#btn_search").hasClass("active")&&$("#btn_search").click()}else t=n.api||api.getRequestAPI(n.request),api.requ(lemon.json(n.request||{})),api.resp(lemon.json(n.response||{})),lemon.setEnv(n.interf),api.env.change(n.interf),$("#btn_history").hasClass("active")&&$("#btn_history").click(),$("#btn_search").hasClass("active")&&$("#btn_search").click(),i=api.env.which(n.interf).type.id;api.nav.title(t),lemon.setApi(t),i>0&&api.env.render(i),after.styled||($("#request:visible").length||api.nav.view("#request",!0),api.nav.view("#response",!0)),api.chgJSONPView()}},mirrorVal:function(e,n,t){var i=lemon.ltrim(e,"#");return lemon.mirror=lemon.mirror||{},lemon.isUndefined(n)?after.styled?lemon.mirror[i]?lemon.mirror[i].getValue():{}:$(e).val():(n=lemon.json(n),after.styled?(lemon.mirror[i]=lemon.mirror[i]||after.mirror(e,lemon.extend({width:358,height:360},t||{})),lemon.mirror[i].setValue(n)):$(e).val(n))},requ:function(e){var n="#request";return lemon.isUndefined(e)?after.styled?after.request.getValue():$(n).val():after.styled?(after.request.setValue(lemon.isNull(e)?"":e),e):($(n).val(e),e)},resp:function(e){var n="#response";return lemon.isUndefined(e)?after.styled?after.response.getValue():$(n).val():after.styled?(after.response.setValue(lemon.isNull(e)?"":e),e):($(n).val(e),e)},matched:function(e,n){var t=$(n).blast({search:e});return t.css({backgroundColor:"yellow",transition:"color 400ms"}).velocity({backgroundColorAlpha:1},{duration:400}),t},disable:function(e){return progressJs(e).setOptions({theme:"blueOverlayRadiusHalfOpacity",overlayMode:!0}).start().set(0)},enable:function(e){progressJs(e).end()},progressHomeEnd:function(){api.loadingHome.end()},progressHome:function(e){api.loadingHome=api.progress({selector:e||api.progressSelector||"#home_navbar",auto:{ms:100,step:1},set:50}),api.progressSelector&&(api.progressSelector=null)},progress:function(e){e=lemon.extend({selector:null,start:1,auto:{ms:1e3,step:1},set:0,cfg:{theme:"blueOverlayRadiusHalfOpacity",overlayMode:!0}},e||{});var n=progressJs(e.selector).setOptions(e.cfg).set(e.set);return e.start&&n.start(),e.auto&&n.autoIncrease(e.auto.step,e.auto.ms),n},requestGetPost:function(e,n){$(e).click(function(){api.chkRequest()&&(api.progressHome(),api.resp(""),api.request(function(e){api.resp(lemon.json(e)),api.progressHomeEnd()},function(e,n,t){api.progressHomeEnd()},n||"post"))})},chgJSONPView:function(){api.isServSupportJSONP()?$("#btn_request").removeClass("disabled"):$("#btn_request").addClass("disabled")},isServSupportJSONP:function(e){var n=api.getServRequCfg(e);return lemon.isUndefined(n.jsonp)?1:parseInt(n.jsonp)},getServRequCfg:function(e){var n=api.env.which(e||lemon.getEnv());return n.request||api.preference.basic().request},getRequestAPI:function(e){var n=api.preference.basic(),t=null;if(lemon.isJson(e)&&!lemon.isBlank(n.apiParamNameInRequest)&&(t=e[n.apiParamNameInRequest]),!lemon.isBlank(t))return t;var i=api.getServRequCfg();return 2==i.type?api.getCurrentAPI():null},getCurrentAPI:function(e){return lemon.getApi()?lemon.getApi():api.getRequestAPI(e||api.getCleanRequestData())},request:function(e,n,t){var i=api.getCleanRequestData(),o=api.getRequestData(i);lemon.info(o,"request");var a=function(n,t,o){lemon.info(t,"request status"),lemon.info(n,"response");var a=api.getCurrentAPI(i),r=api.uniqueId();lemon.store.set(r,{api:a,when:lemon.when(),request:i,response:n,interf:lemon.getEnv(),name:api.getAPI(a).desc}),api.hash.requ(a,r),e&&e(n),after.styled||api.nav.view("#response",!0)};t=t||"jsonp";var r=lemon.getEnv(),s=api.env.which(r),l={},p=s.request||api.preference.basic().request;switch(p.type){case 1:l[p.paramName]=lemon.json.reverse(o);break;case 2:r=api.nav.humanreadRequest()}var c=function(e,i,o){lemon.error(e),lemon.error(i,"request status"),lemon.error(o),api.resp(lemon.json({title:"Request Failed ("+t.toUpperCase()+")",cause:(lemon.startWith(location.href,r)||"jsonp"==t?"":"May cross domain issue. ")+"See browser console for more information",jqXHR:e,textStatus:i,errorThrown:o,server:r})),$("#btn_request").button("reset"),n&&n(e,i,o)};switch(t){case"jsonp":$.ajax({type:"get",async:!1,url:r,data:l,dataType:"jsonp"}).done(a).fail(c);break;case"get":$.get(r,l).success(a).error(c);break;case"post":$.post(r,l).success(a).error(c)}},attention:function(e,n,t){lemon.times(t||4,function(){$(e).fadeToggle(n||500)})},tip:function(e,n){n=lemon.extend({where:1,level:"warning",delay:3e3,close:"auto"},n||{});var t="#tip_id_"+n.where+lemon.uniqueId(),i="#msg_id",o=$(document.createElement("div")).attr({"class":"alert alert-"+n.level,role:"alert",id:lemon.ltrim(t,"#"),style:"display:none"}).html(e);switch(n.where){case 1:$("#message").append(o),$(i).slideToggle();break;case 2:$("#message_settings").append(o);break;case 3:$("#nav_merge").append(o)}"manual"==n.close&&o.append(['<button type="button" class="close" data-dismiss="alert" aria-label="Close">','<span aria-hidden="true">&times;</span></button>'].join("")),$(t).slideToggle(),"auto"==n.close&&lemon.delay(function(){1==n.where&&$(i).slideToggle(),$(t).slideToggle(function(){$(t).remove()})},n.delay)},msg:function(e,n,t){var i=$(document.createElement("div")).attr({"class":"alert alert-"+e||"info",role:"alert",env:t,id:"msg_id"}).text(n);return $("#message").empty().append(i),i},preference:{help:function(e){$(e).button("toggle");var n=$(e).hasClass("active"),t="serv_help_tip_id";$("#"+t).remove(),n&&this.tip(this.getWarn(this.valid.serv,null,1),null,"#p_server_left",t)},showServer:function(e){var n=lemon.clone(e);delete n.type,delete n.asDefault,delete n.env,delete n.desc,lemon.fillParam("#p_server_left",{env:e.env,typeId:e.type.id}),e.asDefault&&1==e.asDefault?api.nav.check("#ss_default",2):api.nav.check("#ss_default",3),api.mirrorVal("#ss_server",n)},apicEnvClick:function(e){var n="";try{n=api.mutation()?"Define API Mutation":"Define API";var t=$.parseJSON(api.mirrorVal("#sa_apic"));t.defserv=e.id,api.mirrorVal("#sa_apic",t)}catch(i){api.preference.tip(n," invalid JSON value, "+i.message)}$("#api_default_serv_href").attr({title:e.desc}).text(e.note||e.type.name),"PRODUCT"==e.env?$("#api_default_serv_href").removeClass("text-info").addClass("text-danger"):$("#api_default_serv_href").removeClass("text-danger").addClass("text-info")},apicEnvRender:function(){var e=parseInt($("#sa_interf").val());$("#apic_env_container").html(api.env.envselect({id:"api_default_serv",name:"API default server",typeId:e,handle:function(e){api.preference.apicEnvClick(e)}})),$("#show_envs").remove()},newServId:function(){var e=0;lemon.each(api.preference.service(),function(n,t){lemon.each(n.serv,function(n,t){e=Math.max(e,n.id)})});try{var n=$.parseJSON(api.mirrorVal("#ss_server"));n.id=e+1,api.mirrorVal("#ss_server",n)}catch(t){api.preference.tip("New Server ID"," invalid JSON value, "+t.message)}},tab:{current:"",previous:""},valid:{basic:{"{{Group name}}":{id:"[number, unique id]",name:"[string]"}},env:{environment:[{env:"[string, unique string]",desc:"[string]"}]},serv:{id:"[number, unique id]",interf:"[string, request url]",note:"[string]",params:"[JSON optional, add to request parameters]",request:{type:"[number, 1 wrap as a param eg: {{paramName}}={a:1,b:2}, 2 using lemon.getUrl eg: ?a=1&b=2]",paramName:"[string, if type is 1 then must provide]",jsonp:"[string optional, 1 support JSONP else unsupport, default is support]"}},interf:{api:"[string, unique string]",desc:"[string, interface description]",note:"[string|string array|JSON]",request:"[JSON, request data structure]"}},close:function(){api.preference.closeanyway=!0,$("#btn_search").click()},saveBasic:function(){if(api.preference.closeanyway)return api.preference.closeanyway=!1,!0;var e="",n=$(api.preference.tab.current).attr("href");if("#export_tab"==n);else if("#import_tab"==n);else if("#server"==n){try{e="Define Server";var t=$.parseJSON(api.mirrorVal("#ss_server")),i=lemon.getParam("#p_server_left"),o=api.nav.check("#ss_default"),a="";if(""==t.id&&""==t.interf&&""==t.note)return lemon.mirror.ss_server=void 0,!0;if(t.id&&t.interf?lemon.has(t,"params")&&!lemon.isJson(t.params)?a='the "params" must be a valid JSON. ':lemon.has(t,"request")&&(lemon.isJson(t.request)?lemon.has(t.request,"type")?1!=t.request.type||t.request.paramName?2!=t.request.type&&1!=t.request.type&&(a='the "request" must define a valid type 1 or 2.'):a='the "request" must define paramName when type is 1. ':a='the "request" must define a valid type.':a='the "request" must define a valid JSON. {"type":"","paramName":""}'):a=api.preference.getWarn(api.preference.valid.serv,t),!lemon.isBlank(a))return api.preference.tip(e,a),!1;var r=api.preference.service();if(lemon.has(t,"delete")&&1==t["delete"]){var s=[],l=parseInt(t.id);return lemon.each(r[i.env].serv,function(e,n){l!=e.id&&s.push(e)}),r[i.env].serv=s,api.preference.service(r),lemon.mirror.ss_server=void 0,api.env.dorender(),!0}var p=lemon.extend({asDefault:o,type:api.getInterfGroup(i.typeId)},t);p.id=parseInt(p.id),p.note=p.note||"";var c=!1;1==p.asDefault&&lemon.each(r,function(e,n){lemon.each(e.serv,function(e,n){1==e.asDefault&&(e.asDefault=0)})});var d=r[i.env].serv;lemon.each(d,function(e,n){return e.id==p.id?(d[n]=lemon.extend(e,p),c=!0,!1):void 0}),c||d.push(p),api.preference.service(r)}catch(u){return api.preference.tip(e," invalid JSON value, "+u.message),!1}api.env.dorender(),lemon.mirror.ss_server=void 0}else if("#theapic"==n){e="Define API",y=!1,api.mutation()&&(e="Define as Mutation");try{var m=$.parseJSON(api.mirrorVal("#sa_apic")),a="";if(""==m.api&&""==m.desc&&""==m.note&&""==m.request)return lemon.mirror.sa_apic=void 0,!0;if(lemon.has(m,"api")&&lemon.has(m,"desc")&&lemon.has(m,"request")&&lemon.has(m,"note"))if(lemon.isJson(m.request))if(lemon.isString(m.note)||lemon.isArray(m.note)||lemon.isJson(m.note))if(lemon.isArray(m.note)){var f=!1;lemon.each(m.note,function(e,n){return lemon.isString(e)?void 0:(f=!0,!1)}),f&&(a='The property "note" must be a string array when define as array.')}else lemon.isBlank(m.api)||-1!=m.api.indexOf("_")?a='The property "api" cannot be empty or contains underline "_"':lemon.isBlank(m.desc)?a='The property "desc" cannot be empty.':lemon.isBlank(m.request)&&(a='The property "request" cannot be a empty JSON.');else a='The property "note" must be a [string | string array | JSON].';else a='The property "request" must be a JSON.';else a=api.preference.getWarn(api.preference.valid.interf,m);if(!lemon.isBlank(a))return api.preference.tip(e,a),!1;if(m.type=api.getInterfGroup(lemon.getParam("#p_apic_left").apiTypeId),api.mutation()&&m.mutation>0)return lemon.isString(m.note)?(api.apiMutation(m.api,m.mutation,m),lemon.mirror.sa_apic=void 0,!0):(api.preference.tip(e,'Property "note" must be a string when define mutation.'),!1);var h=api.preference.defines(),v=lemon.has(m,"delete")&&1==m["delete"],g=[],b=!0;lemon.each(h.items,function(e,n){m.api==e.api?v||(b=!1,g.push(lemon.extend(e,m))):g.push(e)}),!v&&b&&g.push(m),h.items=g,api.preference.defines(h)}catch(u){return api.preference.tip(e," invalid JSON value, "+u.message),!1}api.cmd.render(),lemon.mirror.sa_apic=void 0}else if("#basic"==n){e="Interface Group";try{var a="",_={},y=!1,k=$.parseJSON(api.mirrorVal("#p_interf")),w=[];if(lemon.each(k,function(e,n){if(!(e&&e.id&&e.name)){var t={};return t[n]=e,a=api.preference.getWarn(api.preference.valid.basic,t),!1}return-1!=w.indexOf(e.id)?(a="the id "+e.id+" is duplicated",!1):void((y=lemon.has(e,"delete")&&1==e["delete"])||(_[n]=e,w.push(e.id)))}),!lemon.isBlank(a))return api.preference.tip(e,a),!1;api.preference.interf(_,y),e="Environment",y=!1;var x=$.parseJSON(api.mirrorVal("#p_env")).environment,q={};if(a="",valid=api.preference.valid.env,envs=[],!x)return api.preference.tip(e,api.preference.getWarn(valid)),!1;var r=api.preference.service();if(lemon.each(x,function(e,n){if(!(e&&e.env&&e.desc))return a=api.preference.getWarn(valid,{environment:[e]}),!1;if(-1!=envs.indexOf(e.env))return a="the env "+e.env+" is duplicated",!1;var t={env:e.env,desc:e.desc};r[e.env]?t.serv=r[e.env].serv:t.serv=[],(y=lemon.has(e,"delete")&&1==e["delete"])||(q[e.env]=t,envs.push(e.env))}),!lemon.isBlank(a))return api.preference.tip(e,a),!1;api.preference.service(q,y),e="Configuration",y=!1;var I=$.parseJSON(api.mirrorVal("#p_config"));if(y=lemon.has(I,"delete")){var C=I["delete"];if(C&&C.indexOf(".")>0){var S=C.lastIndexOf("."),N=lemon.json.get(I,C.substring(0,S));delete N[C.substring(S+1)]}else delete I[C];delete I["delete"]}api.preference.basic(I,y),api.nav.title()}catch(u){return api.preference.tip(e," invalid JSON value, "+u.message),!1}api.env.dorender(),api.cmd.render()}return!0},getWarn:function(e,n,t){var i=[];t=t||2,i.push('<div class="row">');var o=1==t?"col-md-12":"col-md-6";return e&&(i.push('<div class="'+o+'"><pre style="background-color:#ffffff;border:0px;">'),i.push('<p class="text-success">the legal structure</p>'+lemon.json.highlight(e)+"</pre></div>")),n&&(i.push('<div class="'+o+'"><pre style="background-color:#ffffff;border:0px;">'),i.push('<p class="text-danger">below is illegal structure</p>'+lemon.json.highlight(n)+"</pre></div>")),i.push("</div>"),i.join("")},tip:function(e,n,t,i){var i=i||"p_tip_"+lemon.uniqueId(),o=['<div class="alert alert-default alert-dismissible fade in" style="border:1px solid;border-color:#a94442;" role="alert" id="'+i+'">','<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">x</span></button>'];return e?o.push(e):o.push("<h5>Oh snap! You got an error!</h5>"),n&&o.push("<p>"+n+"</p>"),o.push("</div>"),$(t||"#message_settings").append(o.join("")),i},basic:function(e,n){return api.preference.val("basic",e,n); },interf:function(e,n){return api.preference.val("interf",e,n)},env:function(e){var n={environment:[]};return lemon.each(api.preference.service(),function(e,t){n.environment.push({env:e.env,desc:e.desc})}),n},service:function(e,n){return api.preference.val("service",e,n)},defines:function(e,n){return api.preference.val("defines",e,n)},val:function(e,n,t){var i="preference",o=lemon.store(i)||{};if(lemon.isUndefined(e))return o;var a=o[e]||{};return lemon.isUndefined(n)?a:(t?lemon.isNull(n)?delete o[e]:o[e]=n:o[e]=lemon.extend(a,n),lemon.store(i,o),o[e])},isExists:function(e,n,t){for(var i=e.length-1;i>=0;i--)if(e[i][n]==t[n])return!0;return!1}},env:{servSortEsc:function(e){return e.sort(function(e,n){return e.type.id-n.type.id})},load:function(){var e=null;if(lemon.isBlank(root.config)||(e=api.preference.basic(),lemon.each(config,function(n,t){e[t]||(e[t]=n)}),api.preference.basic(e),e=null,config=void 0),lemon.isBlank(root.interf)||(e=api.preference.interf(),lemon.each(interf,function(n,t){e[t]||(e[t]=n)}),api.preference.interf(e),e=null,interf=void 0),lemon.isBlank(root.definedServs)||(e=api.preference.service(),lemon.each(root.definedServs,function(n,t){if(e[n.env]){var i=e[n.env].serv||[];lemon.each(n.serv,function(e,n){api.preference.isExists(i,"id",e)||i.push(e)}),e[n.env].serv=i}else e[n.env]=n}),api.preference.service(e),e=null,definedServs=void 0),!lemon.isBlank(root.definedAPIs)){e=api.preference.defines();var n=e.items||[];lemon.each(definedAPIs.items,function(e,t){api.preference.isExists(n,"api",e)||n.push(e)}),e.items=n,api.preference.defines(e),e=null,definedAPIs=void 0}},envselectclick:function(e,n){var t=api.env.envClickHandle[e];lemon.isFunc(t)&&t(api.getServer(n))},choosableServs:function(){return lemon._curservs},defaultChoosableServ:function(){var e={};return lemon.each(api.env.choosableServs(),function(n,t){return n.curDefault?(e=n,!1):void 0}),e},envselect:function(e){e=lemon.extend({id:"",name:"Environment",handle:null,typeId:null,choosable:!1},e||{});var n=lemon.uniqueId(),t=!1;api.env.envClickHandle=api.env.envClickHandle||{},api.env.envClickHandle[n]=e.handle,e.choosable&&(lemon._curservs={});var i=['<li class="dropdown" style="list-style-type:none;">','<a href="javascript:void(0);" id="'+e.id+'_href" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">',e.name+' <span class="caret"></span> </a>','<ul class="dropdown-menu fixed-dropdown" style="border:0px;" role="menu" id="'+e.id+'">'];return lemon.each(api.preference.service(),function(o,a){var r="PRODUCT"===o.env,s=r?"danger":"info",l=['<li role="presentation" class="dropdown-header"><h4>','<span class="label label-'+s+'">'+o.desc+"</span>","</h4></li>"].join("");i.push('<li role="presentation" class="divider"></li>'),i.push(l);var p=-1;lemon.each(api.env.servSortEsc(o.serv),function(o,a){if(!e.typeId||e.typeId&&e.typeId==o.type.id){var s=lemon.isBlank(o.note),l=api.getInterfGroup(o.type.id);if(!s&&p!=o.type.id){var c=['<li role="presentation" class="dropdown-header"><h5>',lemon.repeat("&nbsp;",2)+l.name,"</h5></li>"].join("");i.push(c),p=o.type.id}var d=s?l.name:lemon.repeat("&nbsp;",5)+o.note,u=l.name+(s?"":" - "+o.note),m=['<li title="'+u+'">'];o.asDefault&&1===o.asDefault?m.push('<a id="default_env" onclick="api.env.envselectclick('+n+","+o.id+');">'):m.push('<a onclick="api.env.envselectclick('+n+","+o.id+');">'),m.push('<p class="text-'+(r?"warning":"info")+'">'+lemon.repeat("&nbsp;",2)+d+"</p></a>"),m.push("<li>"),i.push(m.join("")),t||(t=!0,o.curDefault=!0),e.choosable&&(lemon._curservs[o.id]=o)}})}),lemon.isBlank(e.typeId)?api.env.prevTypeId&&(i.push('<li role="presentation" class="divider"></li>'),i.push('<li title="Show Type Filter Environments" id="show_envs" type="'+api.env.prevTypeId+'"><a><p class="text-success">&nbsp;&nbsp;Filter Environments</p></a></li>')):(i.push('<li role="presentation" class="divider"></li>'),i.push('<li title="Show All Environments" id="show_envs" type=""><a><p class="text-success">&nbsp;&nbsp;All Environments</p></a></li>'),api.env.prevTypeId=e.typeId),i.push("<li>"+lemon.repeat("&nbsp;",80)+"</li>"),i.push("</ul>"),i.push("</li>"),i.join("")},dorender:function(e){$("#env_container").html(api.env.envselect({id:"which_env",typeId:e,choosable:!0,handle:function(e){lemon.setEnv(e.interf),api.env.change(e.interf),api.chgJSONPView(),lemon.isBlank(lemon.getApi())||api.hash.apid(lemon.getApi(),e.id+"s")}})),$("#show_envs").bind("click",function(){var e=$(this).attr("type");return api.env.dorender(lemon.isBlank(e)?null:parseInt(e)),!1})},render:function(e){if(api.intialized||api.env.load(),api.env.dorender(e),e){if(!lemon.isBlank(lemon.getEnv())&&!api.env.prevTypeId){var n=api.env.which(lemon.getEnv());if(n.type.id!=e){var t=api.env.defaultChoosableServ();lemon.isBlank(t)||(lemon.setEnv(t.interf),api.env.change(t.interf))}}}else $("#default_env").click()},changeEnv:function(e){var n=e.desc+"  "+e.type.name+(lemon.isBlank(e.note)?"":" - "+e.note);switch(e.env){case"PRODUCT":api.msg("danger",n,e.interf).append("&nbsp;&nbsp;&nbsp;&nbsp;<strong>Danger !!!</strong>");break;default:api.msg("success",n,e.interf)}$("#request_url").length&&$("#request_url").text(api.nav.humanreadRequest())},change:function(e){var n=api.env.which(e);lemon.isBlank(n)||api.env.changeEnv(n)},lemon:function(){if(!lemon.isBlank(api.hash.capture)&&4==api.hash.capture.share.type){var e=api.preference.basic().dcs;try{lemon.cross(lemon.format("{0}/rapicfg.html",lemon.rtrim(e,"/")),function(e){api.impexp.doimport(e)})}catch(n){lemon.warn("Connection and do dcs("+e+") fail "+n.message)}}},isProduct:function(e){return api.env.is(e,"PRODUCT")},is:function(e,n,t){return n===(api.env.which(e||lemon.getEnv(),t)||{env:""}).env},which:function(e,n){if(!lemon.isBlank(api.hash.capture))return api.hash.capture.serv;var t={};return lemon.each(api.preference.service(),function(i,o){lemon.each(i.serv,function(o,a){if(o.interf===e){var r={env:i.env,desc:i.desc,type:api.getInterfGroup(o.type.id),interf:o.interf,note:o.note,params:o.params||{},id:o.id,request:o.request||api.preference.basic().request};if(lemon.isUndefined(n))return t=r,!1;if(n===r.type.id)return t=r,!1}})}),lemon.isBlank(t)&&(t={env:"AUTOGENERATION",desc:"Autogeneration Environment",type:{id:-20,name:"Undefined API"},interf:e,note:"Temporary",id:-10,request:api.preference.basic().request}),t}},file:{cur:{},read:function(e,n){$(e).change(function(t){api.file.handle(this,t,{onLoadStart:function(e,n){api.progressHome()},onLoadEnd:function(t,i){lemon.isFunc(n)&&n(i.reader.result,i),api.progressHomeEnd(),$(e).val("")}})})},handle:function(e,n,t){api.file.cur=api.file.newinst();var i=api.file.cur.file=e.files[0],o=api.file.cur.reader=new FileReader;api.file.cur.total=i.size,api.file.cur.options=t||{},o.onloadstart=api.file.onLoadStart,o.onprogress=api.file.onProgress,o.onabort=api.file.onAbort,o.onerror=api.file.onerror,o.onload=api.file.onLoad,o.onloadend=api.file.onLoadEnd,o.readAsText(i)},abortHandle:function(e){api.file.cur.reader&&api.file.cur.reader.abort()},onLoadStart:function(e){lemon.info("start reading file "+api.file.cur.file.name),lemon.isFunc(api.file.cur.options.onLoadStart)&&api.file.cur.options.onLoadStart(e,api.file.cur)},onProgress:function(e){api.file.cur.loaded+=e.loaded;var n=api.file.cur.loaded/api.file.cur.total*100;lemon.info("reading progress: "+n),lemon.isFunc(api.file.cur.options.onProgress)&&api.file.cur.options.onProgress(e,api.file.cur,n)},onAbort:function(e){lemon.isFunc(api.file.cur.options.onAbort)&&api.file.cur.options.onAbort(e,api.file.cur)},onError:function(e){lemon.isFunc(api.file.cur.options.onError)&&api.file.cur.options.onError(e,api.file.cur)},onLoad:function(e){api.file.cur.loaded<api.file.cur.total?api.file.cur.readBlob(api.file.cur.loaded):api.file.cur.loaded=api.file.cur.total,lemon.isFunc(api.file.cur.options.onLoad)&&api.file.cur.options.onLoad(e,api.file.cur)},onLoadEnd:function(e){lemon.info("end reading file "+api.file.cur.file.name+", size: "+api.file.cur.total),lemon.isFunc(api.file.cur.options.onLoadEnd)&&api.file.cur.options.onLoadEnd(e,api.file.cur)},newinst:function(){return{total:0,file:null,reader:null,loaded:0,step:1048576,times:0,options:{}}}},impexp:{load:function(){$("#imp_file").click()},doimport:function(e,n){var t="<h3>Export</h3>",i="";try{lemon.isJson(e)||(e=$.parseJSON(e))}catch(o){return i="Cannot import: Unknown configuration. "+o.message,n&&api.preference.tip(t,i),void lemon.info(i)}if(!lemon.has(e,"profile"))return i="Cannot import: Unknown profile.",n&&api.preference.tip(t,i),void lemon.info(i);var a=lemon.store("api.profile")||{},r=e.profile;if(lemon.isBlank(r)||!lemon.has(r,"version"))return i="Cannot import: Unknown profile version.",n&&api.preference.tip(t,i),void lemon.info(i);if(lemon.has(r,"lemon")){switch(r.lemon){case 1:api.impexp.lemon.his();break;case 2:api.impexp.lemon.dftapival();break;case 3:api.impexp.lemon.tag();break;case 4:api.impexp.lemon.custhis();break;case 5:api.impexp.lemon.prefer();break;case 6:api.impexp.lemon.pbasic();break;case 7:api.impexp.lemon.pinterf();break;case 8:api.impexp.lemon.pservice();break;case 9:api.impexp.lemon.pdefines();break;case 10:case 11:api.impexp.lemon.his(),api.impexp.lemon.dftapival(),api.impexp.lemon.tag(),api.impexp.lemon.custhis(),api.impexp.lemon.prefer(),api.impexp.lemon.profile();break;case 12:api.disable("body")}if(11==r.lemon)return void api.impexp.lemon.disabled()}if(lemon.isBlank(a)||lemon.isBlank(a.version))api.impexp.lemon.prefer("Clean local preference for initialize.");else if(parseInt(a.version)>=parseInt(r.version))return void lemon.info("import done "+r.version);lemon.info(e),lemon.has(e,"basic")&&(lemon.has(e.basic,"config")&&api.preference.basic(e.basic.config),lemon.has(e.basic,"group")&&api.preference.interf(e.basic.group)),lemon.has(e,"server")&&api.preference.service(e.server),lemon.has(e,"apis")&&api.preference.defines(e.apis),lemon.has(e,"mutates")&&lemon.each(e.mutates,function(e,n){lemon.each(e,function(e,t){api.apiMutation(n,t,e)})}),lemon.has(e,"histories")&&lemon.each(e.histories,function(e,n){lemon.store(n,e)}),lemon.has(e,"lastId")&&lemon.store("last",e.lastId),lemon.has(e,"apidft")&&lemon.store("defaultApiVal",e.apidft),lemon.has(e,"hiscust")&&(lemon.has(e.hiscust,"tag")&&lemon.store("definedTag",e.hiscust.tag),lemon.has(e.hiscust,"cust")&&lemon.store("definehis",e.hiscust.cust)),lemon.has(e,"autoid")&&lemon.store("autoid",e.autoid),lemon.has(e,"notes")&&lemon.each(e.notes,function(e,n){"lastId"!=n&&note.pool(e.id,e.content,e.title)}),lemon.store("api.profile",lemon.extend(a,r)),lemon.isBlank(api.preference.basic())&&api.impexp.lemon.disabled("The base setting configuration is not exists!"),api.env.dorender(),api.cmd.render(),lemon.info("import success version: "+r.version)},doexport:function(e,n){$(e).button("loading"),api.progressHome();var t={basic:api.nav.check("#exp_basic"),server:api.nav.check("#exp_server"),apis:api.nav.check("#exp_api"),mutate:api.nav.check("#exp_mutate"),apidft:api.nav.check("#exp_dft"),histories:api.nav.check("#exp_history"),hiscust:api.nav.check("#exp_cust"),notes:api.nav.check("#exp_note")},i={};if(1==t.basic&&(i.basic={config:api.preference.basic(),group:api.preference.interf()}),1==t.server&&(i.server=api.preference.service()),1==t.apis&&(i.apis=api.preference.defines()),1==t.mutate&&(i.mutates=api.apiMutation()),1==t.histories){i.histories={};for(var o=parseInt(lemon.store("last")||"0"),a=0,r=o;r>=0;r--)i.histories[r]=lemon.store(r),++a;i.lastId=o}if(1==t.apidft&&(i.apidft=api.defaultValue()),1==t.hiscust&&(i.hiscust={tag:api.tag(),cust:api.customHis()},i.autoid=lemon.store("autoid")),1==t.notes&&(i.notes=note.pool()),lemon.isBlank(i))api.preference.tip("<h3>Export</h3>","There is nothing to export!");else switch(i.profile={version:lemon.when.tiny()},n=n||1){case 1:after.saveAs(lemon.json.reverse(i),"api.cfg");break;case 2:after.saveAs(lemon.json(i),"api.cfg");break;case 3:after.saveAs(lemon.tmpl($("#cross_source_tmpl").html(),{rapicfg:lemon.json(i)}),"apicfg.html")}api.progressHomeEnd(),$(e).button("reset")},lemon:{disabled:function(e){alert("Manual API disabled");var n=['<div class="alert alert-danger alert-dismissible fade in" role="alert">','<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">x</span></button>',"<h4>Oh snap!</h4>","<p>The Manual API disabled!</p>","<p>"+(e||"")+"&nbsp;</p>","</div>"].join("");$("body").empty().append(n)},his:function(){lemon.info("Clean local histories");for(var e=parseInt(lemon.store("last")||"0"),n=e;n>=0;n--)lemon.store(n,null);lemon.store("last",null)},dftapival:function(){lemon.info("Clean local default api value"),lemon.store("defaultApiVal",null)},tag:function(){lemon.info("Clean local define tag"),lemon.store("definedTag",null)},custhis:function(){lemon.info("Clean local custom history"),lemon.store("definehis",null)},prefer:function(e){lemon.info(e||"Clean local preference"),lemon.store("preference",null)},pbasic:function(){lemon.info("Clean local base setting configuration"),api.preference.basic(null,!0)},pinterf:function(){lemon.info("Clean local base setting interface group"),api.preference.interf(null,!0)},pservice:function(){lemon.info("Clean local define server"),api.preference.service(null,!0)},pdefines:function(){lemon.info("Clean local define api"),api.preference.defines(null,!0)},profile:function(){lemon.info("Clean local api.profile"),lemon.store("api.profile",null)}}},cmd:{render:function(){var e=$("#which_api");e.empty(),lemon.each(api.preference.interf(),function(n,t){var i=['<li role="presentation" class="dropdown-header"><h4>','<span class="label label-info">'+n.name+"</span>","</h4></li>"].join(""),o=$(document.createElement("li")).attr({role:"presentation","class":"divider"});e.append(o).append(i);var a=api.preference.defines();(lemon.isBlank(a)||!lemon.has(a,"items"))&&(a={items:[]}),lemon.each(a.items,function(t,i){if(n.id===t.type.id){var o=["<h5>"+t.api+"</h5>",'<h6 class="text-muted" style="width:200px;">'+t.desc+"</h6>"].join(""),a=$(document.createElement("blockquote")).attr({style:"width:300px;","data-container":"body","data-toggle":"popover","data-placement":"right","data-content":[api.showNote(t.note||""),'<pre style="width:500px;background-color:#ffffff;border:0;">','<p class="pull-right text-muted">Request</p>',lemon.json.highlight(t.request),"</pre>"].join(""),title:t.api+" "+t.desc}).append(o);a.click(function(){if(lemon.setApi(t.api),api.requ(lemon.json(api.getAPIDefaultVal(t.api,t.request))),lemon.isBlank(t.response)||api.resp(lemon.json(t.response)),api.env.render(t.type.id),api.chgJSONPView(),!lemon.isBlank(lemon.getEnv())){var e=api.env.which(lemon.getEnv());e.type.id==t.type.id&&api.hash.apid(t.api,e.id+"s")}});var r=$(document.createElement("li")).append(a);e.append(r)}})}),$('[data-toggle="popover"]').popover({trigger:"hover",html:!0}).on("show.bs.popover",function(){$(this).data("bs.popover").tip().css({border:0,maxWidth:"600px"})}),$("#which_api blockquote").hover(function(){$(this).addClass("block-grey")},function(){$(this).removeClass("block-grey")})}},mod:{blank:function(){$("#btn_modal_blank").click()},render:function(){$("#modal_tpl").on("show.bs.modal",function(e){var n=$(e.relatedTarget),t=$(this);t.empty(),api.mod.currentTriggerId=n.data("element");var i=-26;switch(api.mod.currentTriggerId){case"both":var o=document.body.clientHeight-i,a=document.body.clientWidth/2,r=['<div class="row">','<div class="col-md-6">','<textarea id="edit-area-requ" style="border:0px solid #ffffff;height:'+o+"px;width:"+a+'px">'+api.requ()+"</textarea>","</div>",'<div class="col-md-6" style="padding-left: 0px;">','<textarea id="edit-area-resp" style="border:0px solid #ffffff;height:'+o+"px;width:"+a+'px">'+api.resp()+"</textarea>","</div>","</div>"].join("");t.append(r),after.styled||api.nav.dblclick("#edit-area-requ"),api.nav.view("#edit-area-requ"),after.styled||api.nav.dblclick("#edit-area-resp"),api.nav.view("#edit-area-resp");break;case"#request":case"#response":var s="";"#request"==api.mod.currentTriggerId?s=api.requ():"#response"==api.mod.currentTriggerId&&(s=api.resp()),i=-26;var l=$(document.createElement("textarea")).attr({id:"edit-area"}).css({border:"0px solid #ffffff",height:document.body.clientHeight-i,width:document.body.clientWidth}).text(s);t.append(l),api.nav.dblclick("#edit-area"),api.nav.view("#edit-area");break;case"blank":t.append(lemon.tmpl($("#blank_tmpl").html(),{id:"blank_modal"})),t.css({"z-index":50103})}}).on("hide.bs.modal",function(e){switch(api.mod.currentTriggerId){case"both":api.requ($("#edit-area-requ").val()),api.resp($("#edit-area-resp").val()),after.styled||(api.nav.view("#request",!0),api.nav.view("#response",!0));break;case"#request":api.requ($("#edit-area").val());break;case"#response":api.resp($("#edit-area").val());break;case"blank":}})},currentTriggerId:null}},note=note||{instance:null,merge:null,current:{mode:null,theme:null},root:null,defineEx:[{name:"wq",shortn:"wq",handle:function(e,n){note.saveclose(n)}},{name:"q",shortn:"q",handle:function(e,n){note.close(n)}},{name:"save",shortn:"sa",handle:function(e,n){note.save(n,1)}},{name:"new",shortn:"n",handle:function(e,n){note.newNote()}},{name:"edit",shortn:"e",handle:function(e,n){lemon.isBlank(n.argString)?note.tip('edit note need a note id. use "list" commond to get.'):note.loadNote(n.args[0])}},{name:"list",shortn:"l",handle:function(e,n){note.showListNote()}},{name:"open",shortn:"o",handle:function(e,n){note.openFile()}},{name:"del",shortn:"d",handle:function(e,n){lemon.isBlank(n.argString)?note.tip('del note need a note id. use "list" commond to get.'):note.delNote(n.args[0])}},{name:"view",shortn:"v",handle:function(e,n){note.preview(n)}},{name:"wrapword",shortn:"wrap",handle:function(e,n){note.handleFunc.wordwrap()}},{name:"help",shortn:"h",handle:function(e,n){!lemon.isBlank(n.argString)&&note.thehelp[n.args[0]]?note.help(n.args[0]):(note.menuTgl(2),$("#note_help_dd").click())}},{name:"menu",shortn:"menu",handle:function(e,n){$("#note_tool").popover("toggle")}},{name:"jumptoline",shortn:"jump",handle:function(e,n){note.handleCmd("jumpToLine")}},{name:"share",shortn:"share",handle:function(e,n){note.share()}},{name:"theme",shortn:"th",handle:function(e,n){return lemon.isBlank(n.argString)?(note.tip('change theme need a theme name. see <a onclick="note.showhelp(2);">themes</a>.'),void note.showListTheme()):void note.theme(n.args[0])}},{name:"mode",shortn:"m",handle:function(e,n){return lemon.isBlank(n.argString)?(note.tip('change mode need a mode name. see <a onclick="note.showhelp(1);">supports modes</a>.'),void note.showListMode()):void note.mode(n.args[0])}},{name:"joinline",shortn:"jo",handle:function(e,n){var t=0,i=note.instance.lineCount();if(n.args){var o=n.args.length;1==o?t=parseInt(n.args[0])-1:o>1&&(t=parseInt(n.args[0])-1,i=parseInt(n.args[1])-1)}var a=note.instance.getCursor(),r=lemon.clone(a);r.line=t,note.instance.setCursor(r);for(var s=t;i>s;s++)note.handleKey("J");note.instance.setCursor(a)}}],thehelp:{mode:"http://codemirror.net/mode/index.html",theme:"http://codemirror.net/demo/theme.html",vim:"http://vimdoc.sourceforge.net/htmldoc/",cmvim:lemon.keymapvim.replace("min.js","js"),vimcheats:"http://michael.peopleofhonoronly.com/vim/",vimcheat:"https://jronrun.github.io/refs/img/vim_cheat_sheet_for_programmers_screen.png",notevim:function(){return["<style>",lemon.json.toCSS(lemon.json.style),"</style>",'<pre title="Note Commands" style="border:0px;">',lemon.json.highlight({commands:note.defineEx}),"</pre>"].join("")}},showhelp:function(e){switch(e){case 1:e=note.thehelp.mode;break;case 2:e=note.thehelp.theme;break;case 3:e=note.thehelp.vim;break;case 4:e=note.thehelp.cmvim;break;case 5:e=note.thehelp.notevim;break;case 6:e=note.thehelp.vimcheats;break;case 7:e=note.thehelp.vimcheat}note.help(e)},help:function(e){note.thehelp[e]&&(e=note.thehelp[e]),lemon.isFunc(e)&&(e=e()),api.preview(e,!0)},tip:function(e){note.instance.openNotification('<span style="color: orange">'+e+"</span>",{bottom:!0,duration:5e3})},handleEx:function(e){CodeMirror.Vim.handleEx(note.instance,e)},handleKey:function(e,n){lemon.isUndefined(n)?CodeMirror.Vim.handleKey(note.instance,e):CodeMirror.Vim.handleKey(note.instance,e,n)},handleCmd:function(e){note.instance.execCommand(e)},handleFunc:{tglFoldCode:function(){note.instance.foldCode(note.instance.getCursor())},visualMode:function(){CodeMirror.Vim.exitInsertMode(note.instance)},editMode:function(){note.handleKey("i")},wordwrap:function(){var e=!note.instance.getOption("lineWrapping");note.instance.setOption("lineWrapping",e),note.storecfg("lineWrapping",e)}},openFile:function(){api.progressSelector="#note_tool_bar",$("#note_open_file").click()},delNote:function(e){var n=note.pool(),t=n[e];if(lemon.isUndefined(t))note.tip("the note "+e+" is not exists.");else{delete n[e],lemon.store("note.pool",n),n.lastId==e&&(note.instance.noteId=null);var i="Note "+t.id+" "+t.title+" is delete.";lemon.info(t.content,i),note.tip(i)}return t},lastNote:function(e){var n=note.pool();return lemon.isUndefined(e)?n[n.lastId]||{}:(n.lastId=e,lemon.store("note.pool",n),n[e]||{})},showListMode:function(){note.menuTgl(2),$("#note_mode_dd").click()},showListTheme:function(){note.menuTgl(2),$("#note_theme_dd").click()},showListNote:function(){note.menuTgl(2),$("#note_list_dd").click()},theme:function(e,n){var t=e;lemon.startWith(e,"solarized")&&(t="solarized"),note.themeload=note.themeload||["default","lemon"],-1==note.themeload.indexOf(t)&&(lemon.css(lemon.format(lemon.getUrl(cmprfix+"theme/{0}.min.css"),t)),note.themeload.push(t)),note.current.theme=e,note.instance.setOption("theme",e);var i=note.status();note.tip("Current mode: "+i.mode+" & theme: "+i.th),n||note.storecfg("theme",e)},storecfg:function(e,n){var t=api.preference.basic();return lemon.isUndefined(e)?t.note:lemon.isUndefined(n)?t.note[e]:(t.note[e]=n,void api.preference.basic(t))},langInfo:function(e){if(lemon.isBlank(e))return null;var n,t=null;return t=notesource.langs[e],lemon.isBlank(t)?((n=/.+\.([^.]+)$/.exec(e))?t=CodeMirror.findModeByExtension(n[1]):/\//.test(e)&&(t=CodeMirror.findModeByMIME(e),t.mime=e),lemon.isBlank(t)?(t=CodeMirror.findModeByFileName(e),lemon.isBlank(t)?(t=CodeMirror.findModeByName(e),lemon.isBlank(t)?null:t):t):t):t},mode:function(e,n){var t=note.langInfo(e);if(lemon.isBlank(t))return void note.tip("Could not find a mode corresponding to "+e);var i=t.mime,o=t.mode,a="json"==e.toLocaleLowerCase();a?(note.prevTheme=note.instance.getOption("theme"),i="application/ld+json",note.instance.setOption("theme","lemon")):note.instance.setOption("theme",note.prevTheme||note.storecfg("theme")),note.instance.setOption("mode",i),a||CodeMirror.autoLoadMode(note.instance,o),note.current.mode=t;var r=note.status();note.tip("Current mode: "+r.mode+" & theme: "+r.th),n||note.storecfg("language",t.name)},status:function(){return{mode:note.instance.getOption("mode"),th:note.instance.getOption("theme"),menu:note.isMenuOpen()?1:0,viminsert:"vim-insert"==note.instance.getOption("keyMap")?1:0}},preview:function(e){var n="";n=!e||lemon.isBlank(e.argString)?note.instance.somethingSelected()?note.instance.getSelection():note.instance.getValue():e.args[0],api.preview(n,!0)},share:function(){var e=note.instance.getValue();lemon.isBlank(e)||api.hash.note(e,note.status()),note.tip("There are nothing to share :(")},listNote:function(){var e=[];return lemon.each(note.pool(),function(n,t){n.id&&n.title&&n.create&&n.lastmodify&&e.push({id:n.id,title:n.title,create:n.create,lastmodify:n.lastmodify})}),e.sort(function(e,n){return lemon.when.time(n.lastmodify)-lemon.when.time(e.lastmodify)})},newNote:function(e){note.instance.setValue(e||""),note.instance.noteId=null},loadNote:function(e){var n=note.lastNote(e);lemon.isBlank(n)?e&&lemon.info("the note "+e+" is not exists."):(note.instance.setValue(n.content),note.instance.noteId=n.id)},pool:function(e,n,t){var i="note.pool",o=lemon.store(i)||{};if(lemon.isUndefined(e))return o;var a=o[e];return lemon.isUndefined(n)?a||{}:(lemon.isBlank(a)?(a={id:e,create:lemon.when(),lastmodify:lemon.when(),content:n},a.title=t||a.create,o[a.id]=a):(a.content=n,a.lastmodify=lemon.when(),a.title=t||a.title),o.lastId=a.id,lemon.store(i,o),a)},open:function(e){note.root=$("#input_note_wrap"),note.root.show();var n=lemon.isBlank(note.instance);if(note.instance=note.instance||CodeMirror.fromTextArea(lemon.query("#input_note"),{mode:"htmlmixed",keyMap:"vim",fullScreen:!0,lineNumbers:!0,matchBrackets:!0,lineWrapping:note.storecfg("lineWrapping"),showCursorWhenSelecting:!0,styleActiveLine:!0,foldGutter:!0,autoCloseBrackets:!0,autoCloseTags:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchTags:{bothTags:!0},extraKeys:{"Ctrl-J":"autocomplete","Ctrl-K":"toMatchingTag","Ctrl-/":"toggleComment","Ctrl-A":function(e){note.handleCmd("selectAll")},"Ctrl-Q":function(e){e.foldCode(e.getCursor())}}}),n){CodeMirror.commands.save=note.save,lemon.each(note.defineEx,function(e,n){CodeMirror.Vim.defineEx(e.name,e.shortn,e.handle)}),after.rich.chgStyle(note.instance,{"z-index":5e4});var t=[];lemon.each(CodeMirror.modeInfo||[],function(e,n){e.id=lemon.uniqueId(),notesource.langs[e.name]=e,t.push(e)}),CodeMirror.modeInfo=t,note.loadNote(),api.popover("#note_merge",function(){return'<div id="note_merge_view"></div>'},{title:lemon.tmpl($("#note_merge_menu_tmpl").html(),{})}).on("hidden.bs.popover",function(){}).on("show.bs.popover",function(){}).on("inserted.bs.popover",function(){var e=$(this).data("bs.popover").tip();e.hide()}).on("shown.bs.popover",function(){var e=$(this).data("bs.popover").tip(),n=$(root).width();e.css({width:n,"max-width":n,border:0,top:-10,left:0,right:0,bottom:0,position:"fixed","z-index":50003}),e.find(".popover-content").css({padding:0}),e.find(".arrow").remove(),e.show(),note.diff.intl()}),api.file.read("#note_open_file",function(e){note.newNote(),note.instance.setValue(e)}),api.file.read("#diff_left_file",function(e){note.diff.load("l",e)}),api.file.read("#diff_right_file",function(e){note.diff.load("r",e)}),api.file.read("#diff_editor_file",function(e){note.diff.load("e",e)}),api.popover("#note_tool",function(){return lemon.tmpl($("#note_tool_tmpl").html(),{})}).on("hidden.bs.popover",function(){$("#note_tool").attr({state:"close"})}).on("show.bs.popover",function(){}).on("inserted.bs.popover",function(){var e=$(this).data("bs.popover").tip();e.hide()}).on("shown.bs.popover",function(){var e=$(this).data("bs.popover").tip();$("#note_tool").attr({state:"open"});var n=Math.floor($(root).width()/2);e.css({width:n,"max-width":n,border:0,top:-8,left:n-5,"z-index":50001}),e.find(".popover-content").css({padding:0}),e.find(".arrow").remove(),e.slideDown(),note.hover($("#note_list li").click(function(e){e.stopPropagation()}).dblclick(function(e){var n=parseInt($(this).attr("nid"));note.loadNote(n),note.menuRefresh()})),note.hover($("#note_theme li").click(function(e){e.stopPropagation();var n=$(this).attr("th");note.theme(n,!0)}).dblclick(function(e){var n=$(this).attr("th");note.theme(n),note.menuRefresh()})),$('#note_mode a[clk="1"]').click(function(e){e.stopPropagation(),note.mode($(this).attr("val")),note.menuRefresh()}),$("#note_list_qry").keyup(function(e){var n=$(this).val();if(lemon.isBlank(n))return void $('#note_list li[note="1"]').show();var t=[],i=new RegExp(n),o=!1;lemon.each(note.pool(),function(e,n){o=!1,(o=i.test(e.id))||(o=i.test(e.title))||(o=i.test(e.lastmodify))||(o=i.test(e.create))||(o=i.test(e.content)),o&&t.push("#note_"+e.id)}),$('#note_list li[note="1"]').hide(),$(t.join(",")).show(),$("#note_list").blast(!1),api.matched(n,"#note_list")}),$("#note_mode_qry").keyup(function(e){var n=$(this).val();if(lemon.isBlank(n))return void $('#note_mode li[lang="1"]').show();var t=[],i=new RegExp(n),o=!1;lemon.each(notesource.langs,function(e,n){o=!1,(o=i.test(e.name))||(o=i.test(e.mode))||o||lemon.each(e.mimes||[],function(e,n){return o?!1:void(o=i.test(e))}),o||lemon.each(e.ext||[],function(e,n){return o?!1:void(o=i.test(e))}),o||lemon.each(e.alias||[],function(e,n){return o?!1:void(o=i.test(e))}),o&&t.push("#lang_"+e.id)}),$('#note_mode li[lang="1"]').hide(),$(t.join(",")).show(),$("#note_mode").blast(!1),api.matched(n,"#note_mode")}),note.hover($("#note_mode li").click(function(e){e.stopPropagation(),note.mode($(this).attr("name"),!0)}).dblclick(function(e){note.mode($(this).attr("name")),note.menuRefresh()})),$("#note_edit li a").click(function(e){var n=$(this).attr("ex"),t=$(this).attr("key"),i=$(this).attr("cmd"),o=$(this).attr("func");lemon.isBlank(n)?lemon.isBlank(t)?lemon.isBlank(i)?lemon.isBlank(o)||note.handleFunc[o]():note.handleCmd(i):note.handleKey(t):note.handleEx(n)}),$('button[id^="note_rem_"]').click(function(e){var n=confirm('Are you sure?\nRemove Note "'+$(this).attr("nt")+'"');if(n){var t=parseInt($(this).attr("nid"));note.delNote(t),$("#note_"+t).remove()}e.stopPropagation()}),$("#note_compare").click(function(){note.diff.from=0,$("#note_merge").click()}),$("#note_preview").click(function(){note.preview()})}),lemon.mousepos("#input_note_wrap .CodeMirror").listen({direct:"leftTop",movein:note.close}).listen({direct:"left",movein:function(){note.menuTgl(1)},moveout:function(){}}),note.theme(note.storecfg("theme"));var i=note.storecfg("language");lemon.isBlank(i)||note.mode(i)}e&&(note.diff.from=1,$("#note_merge").click()),note.instance.focus()},diff:{current:null,from:0,intl:function(){note.diff.from&&$("#li_to_note").click(function(){note.diff.close(1)}).show();var e=null;e=lemon.isNull(note.diff.current)?note.diff.view({orig2:note.diff.from?"":note.instance.getValue(),mode:note.current.mode?note.current.mode.mode:""}):note.diff.view(note.diff.current),note.diff.current={panes:e.panes,collapseIdentical:e.options.collapseIdentical,allowEditingOriginals:e.options.allowEditingOriginals,mode:e.options.mode},note.merge=e},view:function(e){e=lemon.extend({elId:"#note_merge_view",mergedval:"",panes:2,orig1:"",orig2:"",connect:null,mode:"",lineNumbers:!0,highlightDifferences:!0,collapseIdentical:!1,allowEditingOriginals:!1,height:$(root).height()-55,top:30},e||{});var n,t,i,o=lemon.query(e.elId),a=CodeMirror.MergeView(o,{value:e.mergedval,origLeft:3==e.panes?e.orig1:null,orig:e.orig2,lineNumbers:e.lineNumbers,mode:e.mode,highlightDifferences:e.highlightDifferences,connect:e.connect,collapseIdentical:e.collapseIdentical,allowEditingOriginals:e.allowEditingOriginals});return(n=a.editor())&&n.setSize(null,e.height),(t=a.leftOriginal())&&t.setSize(null,e.height),(i=a.rightOriginal())&&i.setSize(null,e.height),$(a.wrap).css({top:e.top}).find(".CodeMirror-merge-gap").css({height:e.height,"background-color":"#ffffff"}),$(a.wrap).find(".CodeMirror-gutters").css({border:0,"background-color":"#ffffff"}),a.panes=e.panes,a},tip:function(e,n){api.tip(e,lemon.extend({},n||{},{where:3}))},saveNote:function(){note.diff.from?note.diff.tip("Cannot save to current note, Please try save as new Note."):(note.pool(note.instance.noteId,note.merge.editor().getValue(),note.merge.editor().getLine(0)),note.loadNote(note.instance.noteId))},saveasNewNote:function(){note.pool(api.autoId(),note.merge.editor().getValue(),note.merge.editor().getLine(0))},saveas:function(){after.saveAs(note.merge.editor().getValue())},refresh:function(){$("#note_merge_view").empty(),note.diff.intl(),note.diff.current.mergedval="",note.diff.current.orig1="",note.diff.current.orig2=""},threeway:function(){note.diff.tgl("#btn_threeway",2)},collapse:function(e){note.diff.tgl("#btn_collapse")},tgl:function(e,n){api.nav.check(e,1);var t="",i=note.merge.rightOriginal().getValue(),o=note.merge.editor().getValue();switch(2==note.diff.current.panes?t=o:3==note.diff.current.panes&&(t=note.merge.leftOriginal().getValue()),n||1){case 1:note.diff.current.collapseIdentical=!note.diff.current.collapseIdentical;break;case 2:2==note.diff.current.panes?note.diff.current.panes=3:3==note.diff.current.panes&&(note.diff.current.panes=2);break;case 3:note.diff.current.allowEditingOriginals=!note.diff.current.allowEditingOriginals; }note.diff.current=lemon.extend(note.diff.current,{orig1:t,orig2:i,mergedval:o}),note.diff.refresh()},next:function(){CodeMirror.commands.goNextDiff(note.diff.leftview())},prev:function(){CodeMirror.commands.goPrevDiff(note.diff.leftview())},leftview:function(){return 2==note.diff.current.panes?note.merge.editor():3==note.diff.current.panes?note.merge.leftOriginal():void 0},loadLeft:function(){2==note.diff.current.panes?note.diff.load("e"):3==note.diff.current.panes&&note.diff.load("l")},loadRight:function(){note.diff.load("r")},load:function(e,n){api.progressSelector="#nav_merge";var t=!lemon.isUndefined(n);switch(e){case"l":t?note.merge.leftOriginal().setValue(n):$("#diff_left_file").click();break;case"r":t?note.merge.rightOriginal().setValue(n):$("#diff_right_file").click();break;case"e":t?note.merge.editor().setValue(n):$("#diff_editor_file").click()}},close:function(e){switch($("#note_merge").click(),note.diff.current=null,e||0){case 0:note.menuRefresh(),note.diff.from&&note.close();break;case 1:note.showListNote()}}},save:function(e,n){var t=note.instance.getValue(),i="";if(!lemon.isBlank(t)){for(var o=note.instance.lineCount(),a=0;o>a&&(i=note.instance.getLine(a),lemon.isBlank(i));a++);switch(lemon.isBlank(note.instance.noteId)&&(note.instance.noteId=api.autoId()),note.pool(note.instance.noteId,t,i),n=n||-1){case 1:var r=e&&e.args&&e.args[0]?e.args[0]:"";after.saveAs(t,r)}note.menuRefresh()}},hover:function(e){e.hover(function(){$(this).addClass("block-grey")},function(){$(this).removeClass("block-grey")})},isMenuOpen:function(){return"open"==$("#note_tool").attr("state")},menuTgl:function(e){switch(e||1){case 1:$("#note_tool").popover("toggle");break;case 2:note.isMenuOpen()||note.menuTgl();break;case 3:note.isMenuOpen()&&note.menuTgl()}},menuRefresh:function(){note.isMenuOpen()&&lemon.times(2,note.menuTgl)},menu:function(e,n,t){return e=e||"",n=n||"",lemon.isBlank(n)?e:[e,lemon.isUndefined(t)?"":'<span class="text-info" style="float:right;position:relative;font-size:55%;">'+t+"</span>",'<span class="text-info" style="float:right;position:relative;">'+n+"&nbsp;</span>"].join("")},close:function(e){note.root.hide()},saveclose:function(e){note.save(e),note.close(e)}},after=after||{styled:!1,request:null,response:null,initialize:function(){CodeMirror.modeURL=lemon.getUrl(cmprfix+"mode/%N/%N.min.js"),after.behavious(),after.styled=!0},saveAs:function(e,n,t){isFileSaverSupported&&saveAs(new Blob([e||""],lemon.extend({type:"text/plain;charset="+document.characterSet},t||{})),n)},behavious:function(){var e="#view_left #request",n="#view_right #response",t=$(e).html(),i=$(n).html();$(e).html(t),$(n).html(i);var o=$(root).height()-230;lemon.isBlank($("#message").html())&&(o+=70),after.request=after.mirror("#request",{height:o}),after.response=after.mirror("#response",{height:o}),$('[data-element="#request"],[data-element="#response"]').removeAttr("data-target").click(function(){var e=$(this).attr("data-element");switch(e){case"#request":after.rich.fullscreenTgl(after.request);break;case"#response":after.rich.fullscreenTgl(after.response)}})},mirror:function(e,n){n=n||{};var t=CodeMirror.fromTextArea(lemon.query(lemon.startIf(e,"#")),lemon.extend({lineNumbers:!1,matchBrackets:!0,theme:"lemon",styleActiveLine:!1,readOnly:!1,mode:"application/ld+json",autoCloseBrackets:!0,autoCloseTags:!0,lineWrapping:!0,foldGutter:!0,content:"",gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchTags:{bothTags:!0},extraKeys:{Esc:function(e){after.rich.fullscreenTgl(e)},"Ctrl-K":"toMatchingTag","Ctrl-J":"autocomplete","Ctrl-Q":function(e){e.foldCode(e.getCursor())}}},n));return t.setSize(n.width||$(root).width()/2-60,n.height||$(root).height()-235),t.on("inputRead",function(e,t){n.valchange&&lemon.isFunc(n.valchange)?n.valchange(e,t):after.rich.fmt(e)}),t},rich:{mapkey:function(e,n){e.setOption("extraKeys",lemon.extend(e.getOption("extraKeys"),n||{}))},toLastLine:function(e){e.scrollIntoView({line:e.lastLine()})},fitSize:function(e){var n=$(root).height()-230;lemon.isBlank($("#message").html())&&(n+=70),e.setSize(null,n)},fullscreenTgl:function(e,n){e.getOption("fullScreen")||(after.fullBefore={lineNumbers:e.getOption("lineNumbers"),styleActiveLine:e.getOption("styleActiveLine")}),e.setOption("fullScreen",lemon.isUndefined(n)?!e.getOption("fullScreen"):n),e.getOption("fullScreen")?(e.setOption("lineNumbers",!0),e.setOption("styleActiveLine",!0)):lemon.each(after.fullBefore,function(n,t){e.setOption(t,n)})},fmt:function(e){var n=e.getCursor();try{e.setValue(lemon.json(e.getValue()))}catch(t){lemon.warn(t,"format error.")}e.setCursor(n)},chgFontSize:function(e,n){after.rich.chgStyle(e,{"font-size":n+"px"})},chgStyle:function(e,n){lemon.each(n||{},function(n,t){e.getWrapperElement().style[t]=n}),e.refresh()}}},notesource={themes:["default","3024-day","3024-night","abcdef","ambiance","base16-dark","base16-light","bespin","blackboard","cobalt","colorforth","dracula","eclipse","elegant","erlang-dark","hopscotch","icecoder","isotope","lesser-dark","liquibyte","material","mbo","mdn-like","midnight","monokai","neat","neo","night","paraiso-dark","paraiso-light","pastel-on-dark","railscasts","rubyblue","seti","solarized,dark","solarized,light","the-matrix","tomorrow-night-bright","tomorrow-night-eighties","ttcn","twilight","vibrant-ink","xq-dark","xq-light","yeti","zenburn"],langs:{}},config={title:"",navTitle:"51RP Manual API",history:{max:-1,pageSize:2},request:{type:1,paramName:"data"},apiParamNameInRequest:"cmd",searchPageSize:30,dcs:"http://jronrun.github.io/manual/",note:{theme:"default",language:"html",lineWrapping:!0}},interf={},definedServs=[],definedAPIs={items:[]};</script></body></html>
