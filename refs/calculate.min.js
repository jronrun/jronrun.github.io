function addUntil(a){var b=0;if(-1!=a.indexOf("*")||-1!=a.indexOf("/")){for(;-1==a.substr(b,1).indexOf("*")&&-1==a.substr(b,1).indexOf("/")&&a.length>b+1;)++b;return a.substr(0,Math.max(1,b))}return a}function getModeSetting(a){var b="/ 180 * "+Math.PI;return"RAD"==a&&(b=""),"GRA"==a&&(b="/ 400 * 360 / 180 * "+Math.PI),b}function gcf(a,b){var c=1;for(a=Math.abs(a),b=Math.abs(b);a%2==0&&b%2==0;)a/=2,b/=2,c*=2;for(;0!=a;){for(;a%2==0;)a/=2;for(;b%2==0;)b/=2;if(b>a){var d=a;a=b,b=d}a-=b}return b*c}var maxValue=1e19,Calculate={PHI:(1+Math.sqrt(5))/2,sinus:function(a,b){return Math.sin(Parser.parseSimpleTerm(a+getModeSetting(b)))},cosinus:function(a,b){return Math.cos(Parser.parseSimpleTerm(a+getModeSetting(b)))},tangens:function(a,b){return Math.tan(Parser.parseSimpleTerm(a+getModeSetting(b)))},arcusSinus:function(a,b){return Math.asin(Parser.parseSimpleTerm(a+getModeSetting(b)))},arcusCosinus:function(a,b){return Math.acos(Parser.parseSimpleTerm(a+getModeSetting(b)))},arcusTangens:function(a,b){return Math.atan(Parser.parseSimpleTerm(a+getModeSetting(b)))},toFraction:function(a){for(var b=Math.abs(a),c=2;maxValue>c;++c)if(b*c%1==0)return new Fraction(a*c,c)},mod:function(a,b){return a%b},div:function(a,b){return parseInt(a/b)},square:function(a){return a*a},checksum:function(a){var b=0;for(a=parseInt(a);a>0;)b+=a%10,a=Math.div(a,10);return b},multiplicativeDigitalRoot:function(a){var b=1;for(a=parseInt(a);a>0;)b*=a%10,a=Math.div(a,10);return b},root:function(a,b){return Math.pow(a,1/(b>2?b:2))},factorial:function(a){if(a%1==0){for(var b=1,c=2;a>=c;++c)b*=c;return b}return!1},sumOfSquareNumbers:function(a,b){var c,d,e=0;a instanceof Interval?(c=a.startValue,d=a.endValue,a.includingStart||(c+=1),a.includingEnd||(d-=1)):(c=parseInt(a),d=parseInt(b));for(var f=c;d>=f;++f)e+=f*f;return e},sumOfNaturals:function(a,b){var c,d,e=0;a instanceof Interval?(c=a.startValue,d=a.endValue,a.includingStart||(c+=1),a.includingEnd||(d-=1)):(c=parseInt(a),d=parseInt(b));for(var f=c;d>=f;++f)e+=f;return e},lastDigit:function(a){return parseInt(a)%10},isPrime:function(a){if(a==Math.floor(a)){var b=!(2>a||4==a||a>5&&!(a%2&&a%3&&a%5))?!0:!1,c=parseInt(Math.sqrt(a));if(b)for(var d=7;c>=d;d+=2)if(a%d==0)return!1;return b}return!1},nextPrime:function(a,b,c){for(c||++a;b>0;)Math.isPrime(a)&&--b,++a;return--a,a},previousPrime:function(a,b,c){for(c||--a;b>0;)Math.isPrime(a)&&--b,--a,1==a&&(b=0);return++a,a},primeCount:function(a,b){var c,d,e=0;if(a instanceof Interval?(c=a.startValue,d=a.endValue,a.includingStart||(c+=1),a.includingEnd||(d-=1)):(c=parseInt(a),d=parseInt(b)),d>c)for(var f=c;d>=f;++f)Math.isPrime(f)&&++primeCout;return e},primes:function(a,b){var c,d,e=[];if(a instanceof Interval?(c=a.startValue,d=a.endValue,a.includingStart||(c+=1),a.includingEnd||(d-=1)):(c=parseInt(a),d=parseInt(b)),d>c)for(var f=c;d>=f;++f)Math.isPrime(f)&&e.push(f);return e},toCorrectAngle:function(a){return a%360},ln:function(a){return Math.log(a)},lg:function(a){return Math.log(a)/Math.LN10},lb:function(a){return Math.log(a)/Math.LN2},logarithm:function(a,b){return Math.log(a)/Math.log(b?b:10)},isDivisible:function(a,b){return a%b==0},isNatural:function(a){return a>=1&&a==Math.round(a)},isPositive:function(a){return a>0},isNegative:function(a){return 0>a},getGreatestCommonFactor:function(a,b){return gcf(a,b)},getLength:function(a){return a.toString().length},compare:function(a,b){return a==b?0:a>b?1:-1},equal:function(a,b){return a==b},unequal:function(a,b){return a!=b},larger:function(a,b){return a>b},largerEqual:function(a,b){return a>=b},smaller:function(a,b){return b>a},smallerEqual:function(a,b){return b>=a}},Fraction=function(a,b){this.numerator=a,this.denominator=b,this.getNumerator=function(){return this.numerator},this.setNumerator=function(a){this.numerator=a},this.getDenominator=function(){return this.denominator},this.setDenominator=function(a){this.denominator=a},this.getFraction=function(){return this},this.setFraction=function(a,b){this.numerator=a,this.denominator=b},this.getGreatestCommonFactor=function(){return gcf(this.numerator,this.denominator)},this.getCanceledNumerator=function(){return this.numerator/this.getGreatestCommonFactor()},this.getCanceledDenominator=function(){return this.denominator/this.getGreatestCommonFactor()},this.getCanceledFraction=function(){var a=this.getGreatestCommonFactor();return new Fraction(this.numerator/a,this.denominator/a)},this.cancel=function(){var a=this.getGreatestCommonFactor();this.numerator/=a,this.denominator/=a},this.getReciprocal=function(){return new Fraction(this.denominator,this.numerator)},this.getLeastCommonMultiple=function(a){for(var b=this.denominator>a.denominator?this.denominator:a.denominator;b%this.denominator!=0||b%a.denominator!=0;)++b;return b},this.correctAlgebraicSign=function(){this.denominator<0&&(this.numerator*=-1,this.denominator*=-1)},this.calculate=function(){return this.numerator/this.denominator},this.toString=function(a){return this.numerator+(a?a:"/")+this.denominator},this.divide=function(a){if(a instanceof Fraction)this.numerator*=a.denominator,this.denominator*=a.numerator;else{var b=Calculate.toFraction(a);b&&this.divide(b)}},this.multiplicate=function(a){if(a instanceof Fraction)this.numerator*=a.numerator,this.denominator*=a.denominator;else{var b=Calculate.toFraction(a);b&&this.multiplicate(b)}},this.add=function(a){if(a instanceof Fraction){var b=this.getLeastCommonMultiple(a);this.numerator=this.numerator*(b/this.denominator)+a.numerator*(b/a.denominator),this.denominator=b}else{var c=Calculate.toFraction(a);c&&this.add(c)}},this.substract=function(a){if(a instanceof Fraction){var b=this.getLeastCommonMultiple(a);this.numerator=this.numerator*(b/this.denominator)-a.numerator*(b/a.denominator),this.denominator=b}else{var c=Calculate.toFraction(a);c&&this.substract(c)}}},Function=function(a,b){this.term=a,this.mode=b?b:"DEG",this.isCorrectAlphabet=function(){return Parser.isCorrectAlphabet(this.term.replace(/x/g," "),this.alphabet)},this.calculate=function(a){return Parser.calculate(this.term.replace(/x/g,a),this.mode)},this.getTableOfValues=function(a,b,c){var d,e,f={};a instanceof Interval?(d=a.startValue,e=a.endValue,a.includingStart||(d+=1),a.includingEnd||(e-=1),c=b):(d=a,e=b);for(var g=d;e>=g;g+=c?c:1)f[g]=this.calculate(g);return f},this.getYIntercept=function(){return this.calculate(0)},this.toString=function(){return this.correctTerm(),"f(x)="+this.term}},Interval=function(a,b,c,d){"string"==typeof a?(a=a.replace(/ /g,""),this.includingStart=-1!=a.indexOf("(")?!1:!0,this.startValue=parseFloat(a.split(",")[0].replace(this.includingStart?"[":"(","")),this.includingEnd=-1!=a.indexOf(")")?!1:!0,this.endValue=parseFloat(a.split(",")[1].replace(this.includingEnd?"]":")",""))):(this.startValue=a,this.endValue=b,this.includingStart=c?c:!0,this.includingEnd=d?d:!0),this.getStartValue=function(){return this.startValue},this.setStartValue=function(a){this.startValue=a},this.getEndValue=function(){return this.endValue},this.setEndValue=function(a){this.endValue=a},this.getIncludingStart=function(){return this.includingStart},this.setIncludingStart=function(a){this.includingStart=a},this.getIncludingEnd=function(){return this.includingEnd},this.setIncludingEnd=function(){this.includingEnd=b},this.toString=function(){return(this.includingStart?"[":"(")+this.startValue+", "+this.endValue+(this.includingEnd?"]":")")},this.isLeftOpened=function(){return this.includingStart?!1:!0},this.isRightOpened=function(){return this.includingEnd?!1:!0},this.isOpened=function(){return this.includingStart?!1:this.includingEnd?!1:!0},this.isLeftClosed=function(){return this.includingStart?!0:!1},this.isRightClosed=function(){return this.includingEnd?!0:!1},this.isClosed=function(){return this.includingStart&&this.includingEnd?!0:!1}},Parser={alternativeNotation:{":":"/"," ":"",squareroot:"sqrt",w:"sqrt",Wurzel:"sqrt",root:"sqrt",pi:Math.PI,e:Math.E,",":".",log:"lg",sinus:"sin",cosinus:"cos",tangens:"tan"},alphabet:["e","pi","ln(","lg(","tan(","sin(","cos(","sqrt(","|(","."," ",",","1","2","3","4","5","6","7","8","9","0","(",")","+","-","*","/","^"],parseSimpleTerm:function(a){for(var b,c,d,e,f=0,g=a.split("+"),h=0;h<=g.length-1;){for(e=g[h],e=e.replace("--","+"),e=e.replace("+-","-");-1!=e.indexOf("*")||-1!=e.indexOf("/");){if(b=addUntil(e),d=e.substr(b.length,1),c=addUntil(e.substr(b.length+1,e.length-b.length-1)),""==c||""==b)return"wrong";-1!=d.indexOf("*")&&(e=e.replace(e.substr(0,b.length+1+c.length),b*c)),-1!=d.indexOf("/")&&(e=e.replace(e.substr(0,b.length+1+c.length),b/c))}f+=parseFloat(e),++h}return f},parseBracketTerm:function(a,b){var c=0,d=0,e=1;if(-1!=a.indexOf("("))for(;-1!=a.indexOf("(");){for(;e>0;){if("("==a.substr(c,1)&&(d=c+1,e=1),")"==a.substr(c,1)){--e;break}++c}a=a.replace("("+a.substr(d,c-d+1),this.parseTerm(a.substr(d,c-d),b)),e=1,c=0,d=0}return a},parseSin:function(a,b){var c,d=1,e=1;if(-1!=a.indexOf("sin"))for(var f=a.split("sin"),g=1;g<=f.length-1;++g){for(c=f[g];d>0;)"("==c.substr(e,1)&&++d,")"==c.substr(e,1)&&--d,++e;a=a.replace("sin"+c.substr(0,e),Math.sin(this.parseTerm("("+c.substr(0,e)+getModeSetting(b)+")",b))),d=1,e=1}return a},parseCos:function(a,b){var c,d=1,e=1;if(-1!=a.indexOf("cos"))for(var f=a.split("cos"),g=1;g<=f.length-1;++g){for(c=f[g];d>0;)"("==c.substr(e,1)&&++d,")"==c.substr(e,1)&&--d,++e;a=a.replace("cos"+c.substr(0,e),Math.cos(this.parseTerm("("+c.substr(0,e)+getModeSetting(b)+")",b))),d=1,e=1}return a},parseTan:function(a,b){var c,d=1,e=1;if(-1!=a.indexOf("tan"))for(var f=a.split("tan"),g=1;g<=f.length-1;++g){for(c=f[g];d>0;)"("==c.substr(e,1)&&++d,")"==c.substr(e,1)&&--d,++e;a=a.replace("tan"+c.substr(0,e),Math.tan(this.parseTerm("("+c.substr(0,e)+getModeSetting(b)+")",b))),d=1,e=1}return a},parseAbs:function(a,b){var c,d=1,e=1;if(-1!=a.indexOf("|"))for(var f=a.split("|"),g=1;g<=f.length-1;++g){for(c=f[g];d>0;)"("==c.substr(e,1)&&++d,")"==c.substr(e,1)&&--d,++e;a=a.replace("|"+c.substr(0,e),Math.abs(this.parseTerm("("+c.substr(0,e)+")",b))),d=1,e=1}return a},parseLog:function(a,b){var c,d=1,e=1;if(-1!=a.indexOf("ln"))for(var f=a.split("ln"),g=1;g<=f.length-1;++g){for(c=f[g];d>0;)"("==c.substr(e,1)&&++d,")"==c.substr(e,1)&&--d,++e;a=a.replace("ln"+c.substr(0,e),Math.log(this.parseTerm("("+c.substr(0,e)+")",b))),d=1,e=1}if(-1!=a.indexOf("lg"))for(var h=a.split("lg"),g=1;g<=h.length-1;++g){for(c=h[g];d>0;)"("==c.substr(e,1)&&++d,")"==c.substr(e,1)&&--d,++e;a=a.replace("lg"+c.substr(0,e),Math.log(this.parseTerm("("+c.substr(0,e)+")",b))/Math.LN10),d=1,e=1}return a},parseSqr:function(a,b){var c,d=1,e=1;if(-1!=a.indexOf("sqrt"))for(var f=a.split("sqrt"),g=1;g<=f.length-1;++g){for(c=f[g];d>0;)"("==c.substr(e,1)&&++d,")"==c.substr(e,1)&&--d,++e;a=a.replace("sqrt"+c.substr(0,e),Math.sqrt(this.parseTerm("("+c.substr(0,e)+")",b))),d=1,e=1}return a},parsePow:function(a,b){for(var c,d,e=0,f=1,g=0;-1!=a.indexOf("^");){var h=a.split("^");for(c=h[0],d=h[1];c.length>=f;){if("("==c.substr(c.length-f,1)&&(--e,0>e)){c=c.substr(c.length-f+1,f-1);break}if(")"==c.substr(c.length-f,1)&&++e,(-1!=c.substr(c.length-f,1).indexOf("/")||-1!=c.substr(c.length-f,1).indexOf("*")||-1!=c.substr(c.length-f,1).indexOf("^")||-1!=c.substr(c.length-f,1).indexOf("-")||-1!=c.substr(c.length-f,1).indexOf("+"))&&0==e)break;++f}for(e=0;d.length>g;){if("("==d.substr(g,1)&&++e,")"==d.substr(g,1)&&(--e,0>e)){d=d.substr(0,g);break}if((-1!=d.substr(g,1).indexOf("/")||-1!=d.substr(g,1).indexOf("*")||-1!=d.substr(g,1).indexOf("^")||-1!=d.substr(g,1).indexOf("+"))&&0==e)break;g++}a=a.replace(c.substr(c.length-f+1,f-1)+"^"+d.substr(0,g),Math.pow(this.parseTerm(c.substr(c.length-f+1,f-1),b),this.parseTerm(d.substr(0,g),b))),f=1,g=0}return a},parseTerm:function(a,b){return a=a.replace("--","+"),a=this.parseAbs(a,b),a=this.parsePow(a,b),a=this.parseLog(a,b),a=this.parseSin(a,b),a=this.parseTan(a,b),a=this.parseCos(a,b),a=this.parseSqr(a,b),a=this.parseSimpleTerm(this.parseBracketTerm(a,b))},correctTerm:function(a){"-"==a.substr(0,1)&&(a="(-1)*"+a.substr(1,a.length-1)),a=a.toLowerCase();for(item in this.alternativeNotation)for(;-1!=a.indexOf(item);)a=a.replace(item,this.alternativeNotation[item]);a=a.replace("--","+"),a=a.replace("+-","-");for(var b=0;b<=a.length-1;++b)0==a.substr(b,1).indexOf("-")&&-1==a.substr(b-1,1).indexOf("(")&&-1==a.substr(b-1,1).indexOf("/")&&-1==a.substr(b-1,1).indexOf("*")&&-1==a.substr(b-1,1).indexOf("^")&&-1==a.substr(b-1,1).indexOf("-")&&(a=a.substr(0,b)+"+"+a.substr(b,a.length-b),++b);return a=a.toLowerCase()},isCorrectBrackets:function(a){var b=0;if(-1!=a.indexOf("()"))return!1;for(var c=0;c<a.length;++c)if("("==a.substr(c,1)&&++b,")"==a.substr(c,1)&&--b,0>b)return!1;return 0==b?!0:!1},isCorrectAlphabet:function(a,b){b=b?b:this.alphabet;for(var c=0;c<this.alphabet.length;++c)for(;-1!=a.indexOf(b[c]);)a=a.replace(b[c],"");return 0==a.length?!0:!1},calculate:function(a,b){if(a=this.correctTerm(a),this.isCorrectBrackets(a)){if(this.isCorrectAlphabet(a)){var c=this.parseTerm(a,b);return"NaN"==c.toString()||"wrong"==c.toString()?"Invalid term. Something caused the parser to crash.":c}return"Invalid notation. You did not only use chars of the alphabet only."}return"Invalid brackets. You might have not closed all the brackets."}},Term=function(a,b){this.term=a,this.mode=b?b:"DEG",this.alphabet=Parser.alphabet,this.correctTerm=function(){this.term=Parser.correctTerm(this.term)},this.calculate=function(){return Parser.calculate(this.term,this.mode)},this.setMode=function(a){this.mode=a},this.getMode=function(){return this.mode},this.getTerm=function(){return this.term},this.setTerm=function(a){this.term=a},this.isCorrectAlphabet=function(){return Parser.isCorrectAlphabet(this.term,this.alphabet)},this.isCorrectBrackets=function(){return Parser.isCorrectBrackets(this.term)}};Function.prototype=new Term;var Ball=function(a){this.radius=a,this.getDiameter=function(){return 2*this.radius},this.getSurface=function(){return 4*Math.PI*this.radius*this.radius},this.getVolume=function(){return 4/3*Math.PI*this.radius*this.radius*this.radius},this.getRadius=function(){return this.radius},this.setRadius=function(a){this.radius=a},this.toCircle=function(){return new Circle(this.radius)}},Circle=function(a){this.radius=a,this.getDiameter=function(){return 2*this.radius},this.getCircumference=function(){return 2*this.radius*Math.PI},this.getArea=function(){return Math.PI*this.radius*this.radius},this.getArcLength=function(a){return a/360*this.getCircumfenrence()},this.getArcArea=function(a){return a/360*this.getArea()},this.getRadius=function(){return this.radius},this.setRadius=function(a){this.radius=a},this.toBall=function(){return new Ball(this.radius)}},Cuboid=function(a,b,c){this.width=a,this.length=b,this.height=c,this.getLength=function(){return this.length},this.setLength=function(a){this.length=a},this.getHeight=function(){return this.height},this.setHeight=function(a){this.height=a},this.getWidth=function(){return this.width},this.setWidth=function(a){this.width=a},this.getEdgeLength=function(){return 4*(this.width+this.height+this.length)},this.isHexaedron=function(){return this.width==this.length&&this.length==this.height},this.getSurface=function(){return 2*this.width*this.length+2*this.width*this.height+2*this.length*this.height},this.setSize=function(a,b,c){this.width=a,this.length=b,this.height=c},this.getSize=function(a){return a=a?a:"x",this.width+a+this.length+a+this.height},this.getBodyDiagonal=function(){return Math.sqrt(this.width*this.width+this.length*this.length+this.height*this.height)}},Rectangle=function(a,b){this.width=a,this.length=b,this.getLength=function(){return this.length},this.setLength=function(a){this.length=a},this.getWidth=function(){return this.width},this.setWidth=function(a){this.width=a},this.getPerimeter=function(){return 2*(this.width+this.length)},this.isSquare=function(){return this.width==this.length},this.getArea=function(){return this.width*this.length},this.getDiagonal=function(){return Math.sqrt(this.width*this.width+this.length*this.length)},this.setSize=function(a,b){this.width=a,this.length=b},this.getSize=function(a){return this.width+(a?a:"x")+this.length},this.toCuboid=function(a){return new Cuboid(this.width,this.length,a)}},Triangle=function(a,b,c){this.a=a,this.b=b,this.c=c,this.getSideA=function(){return this.a},this.setSideA=function(a){this.a=a},this.getSideB=function(){return this.b},this.setSideB=function(a){this.b=a},this.getSideC=function(){return this.c},this.setSideC=function(a){this.c=a},this.getPerimeter=function(){return this.a+this.b+this.c},this.setSize=function(a,b,c){this.a=a,this.b=b,this.c=c},this.getHeightA=function(){return Math.sin(this.getBeta())*this.c},this.getHeightB=function(){return Math.sin(this.getGamma())*this.a},this.getHeightC=function(){return Math.sin(this.getAlpha())*this.b},this.getHeights=function(){return{heightA:this.getHeightA(),heightB:this.getHeightB(),heightC:this.getHeightC()}},this.getGamma=function(){return Math.acos((this.c*this.c-this.b*this.b-this.a*this.a)/(-2*this.a*this.b))},this.getBeta=function(){return Math.acos((this.b*this.b-this.a*this.a-this.c*this.c)/(-2*this.a*this.c))},this.getAlpha=function(){return Math.acos((this.a*this.a-this.b*this.b-this.c*this.c)/(-2*this.b*this.c))},this.getAngles=function(){return{alpha:this.getAlpha(),beta:this.getBeta(),gamma:this.getGamma()}},this.getArea=function(){return.5*this.c*this.getHeightC()},this.isIsosceles=function(){var a=this.getGamma(),b=this.getAlpha(),c=this.getBeta();return this.a==this.b&&this.a!=this.c&&b==c||this.b==this.c&&this.b!=this.a&&c==a||this.c==this.a&&this.c!=this.b&&b==a},this.isEquilateral=function(){return this.a==this.b&&this.b==this.c&&this.getAlpha()==this.getGamma()&&this.getAlpha()==this.getBeta()},this.isRightAngled=function(){return 90==this.getAlpha()||90==this.getBeta()||90==this.getGamma()},this.isTriangle=function(){return!(this.a+this.b==this.c||this.b+this.c==this.a||this.c+this.a==this.b)}};
